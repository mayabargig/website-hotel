var Zuko;(()=>{var e={704:(e,t,o)=>{var r,i;r=[o(562),o(428),o(692),o(170),o(738),o(23)],i=function(e,t,o,r,i,n){"use strict";var a=[/((\w*\.)+)?google\.(com|ad|ae|com\.af|com\.ag|com\.ai|al|am|co\.ao|com\.ar|as|at|com\.au|az|ba|com\.bd|be|bf|bg|com\.bh|bi|bj|com\.bn|com\.bo|com\.br|bs|bt|co\.bw|by|com\.bz|ca|cd|cf|cg|ch|ci|co\.ck|cl|cm|cn|com\.co|co\.cr|com\.cu|cv|com\.cy|cz|de|dj|dk|dm|com\.do|dz|com\.ec|ee|com\.eg|es|com\.et|fi|com\.fj|fm|fr|ga|ge|gg|com\.gh|com\.gi|gl|gm|gr|com\.gt|gy|com\.hk|hn|hr|ht|hu|co\.id|ie|co\.il|im|co\.in|iq|is|it|je|com\.jm|jo|co\.jp|co\.ke|com\.kh|ki|kg|co\.kr|com\.kw|kz|la|com\.lb|li|lk|co\.ls|lt|lu|lv|com\.ly|co\.ma|md|me|mg|mk|ml|com\.mm|mn|ms|com\.mt|mu|mv|mw|com\.mx|com\.my|co\.mz|com\.na|com\.ng|com\.ni|ne|nl|no|com\.np|nr|nu|co\.nz|com\.om|com\.pa|com\.pe|com\.pg|com\.ph|com\.pk|pl|pn|com\.pr|ps|pt|com\.py|com\.qa|ro|ru|rw|com\.sa|com\.sb|sc|se|com\.sg|sh|si|sk|com\.sl|sn|so|sm|sr|st|com\.sv|td|tg|co\.th|com\.tj|tl|tm|tn|to|com\.tr|tt|com\.tw|co\.tz|com\.ua|co\.ug|co\.uk|com\.uy|co\.uz|com\.vc|co\.ve|vg|co\.vi|com\.vn|vu|ws|rs|co\.za|co\.zm|co\.zw|cat)$/,/((\w*\.)+)?aol\.(com|co\.uk)$/,/((\w*\.)+)?bing\.com$/,/((\w*\.)+)?yahoo\.com$/,/((\w*\.)+)?msn\.com$/,/((\w*\.)+)?duckduckgo\.com$/,/((\w*\.)+)?ask\.com$/,/((\w*\.)+)?360\.cn$/,/((\w*\.)+)?(alice\.com|aliceadsl\.fr)$/,/((\w*\.)+)?alltheweb\.com$/,/((\w*\.)+)?altavista\.com$/,/((\w*\.)+)?search\.auone\.jp$/,/((\w*\.)+)?isearch\.avg\.com$/,/((\w*\.)+)?search\.babylon\.com$/,/((\w*\.)+)?baidu\.com$/,/((\w*\.)+)?biglobe\.ne\.jp$/,/((\w*\.)+)?bing\.com$/,/((\w*\.)+)?search\.centrum\.cz$/,/((\w*\.)+)?search\.comcast\.net$/,/((\w*\.)+)?search\.conduit\.com$/,/((\w*\.)+)?cnn\.com$/,/((\w*\.)+)?daum\.net$/,/((\w*\.)+)?ecosia\.org$/,/((\w*\.)+)?ekolay\.net$/,/((\w*\.)+)?eniro\.se$/,/((\w*\.)+)?globo\.com/,/((\w*\.)+)?go\.mail\.ru$/,/((\w*\.)+)?goo\.ne\.jp$/,/((\w*\.)+)?haosou\.com$/,/((\w*\.)+)?search\.incredimail\.com$/,/((\w*\.)+)?kvasir\.no$/,/((\w*\.)+)?lycos\.(com|de)$/,/((\w*\.)+)?mamma\.com$/,/((\w*\.)+)?mynet\.com$/,/((\w*\.)+)?najdi\.si$/,/((\w*\.)+)?naver\.com$/,/((\w*\.)+)?search\.netscape\.com$/,/((\w*\.)+)?szukaj\.onet\.pl$/,/((\w*\.)+)?ozu\.es$/,/((\w*\.)+)?qwant\.com$/,/((\w*\.)+)?rakuten\.co\.jp$/,/((\w*\.)+)?rambler\.ru$/,/((\w*\.)+)?search-results\.com$/,/((\w*\.)+)?search\.smt\.docomo\.ne\.jp$/,/((\w*\.)+)?sesam\.no$/,/((\w*\.)+)?seznam\.cz$/,/((\w*\.)+)?so\.com$/,/((\w*\.)+)?sogou\.com$/,/((\w*\.)+)?startsiden\.no$/,/((\w*\.)+)?szukacz\.pl$/,/((\w*\.)+)?buscador\.terra\.com\.br$/,/((\w*\.)+)?search\.tut\.by$/,/((\w*\.)+)?search\.ukr\.net$/,/((\w*\.)+)?search\.virgilio\.it$/,/((\w*\.)+)?voila\.fr$/,/((\w*\.)+)?wp\.pl$/,/((\w*\.)+)?yandex\.(com|ru)$/,/((\w*\.)+)?yam\.com$/];function s(o,a){if("string"!=typeof o)throw new Error("Slug is required");if(this.slug=o,this.logger="true"===e.get("ZukoDebug")?new r(r.DEBUG):new r,this.domain=s.getDomain(),this.client=new t(s.api_urn,{logger:this.logger}),window.name.match(n.windowNameFormat)){this.logger.debug("window was opened from Zuko app field labelling");var c=window.name.match(n.windowNameFormat),u=c[1],m=c[2];this.slug===u&&(this.logger.debug("loading Zuko field labelling tool"),this.labeller=new n(m,this.logger),this.logger.debug("loaded Zuko field labelling tool"))}"object"==typeof a&&(this.target=a,s.eventTypes.forEach(function(e){this.target.addEventListener(e,function(e){try{if(e.target){var t=new i(e.target);t.shouldTrack()&&(this.trackEvent(e),this.labeller&&this.labeller.trackField(t.field))}}catch(e){this.logger.error("Event not tracked: "+e.message)}}.bind(this),!1)}.bind(this))),this.attributes=window.zuko&&window.zuko.attributes||{};var d=["zukoVisitorId",o].join("-");e.get(d)||(e.set(d,s.visitorId,s.visitorViewedFormCookieExpiry,this.domain),this.attributes["Visitor Type"]="New"),this.logger.debug("Attempting to retrieve trafficMedium from session cookie");var l=e.get("zukoTrafficMedium");l&&(this.logger.debug("trafficMedium found in session cookie; adding it to attributes"),this.attributes.trafficMedium=l),setInterval(function(){if(window.zuko&&window.zuko.attributes)for(var e in window.zuko.attributes)if(window.zuko.attributes.hasOwnProperty(e)){var t=window.zuko.attributes[e];this.setAttribute(e,t)}}.bind(this),3e3)}return s.visitorIdExpiry=365,s.visitorViewedFormCookieExpiry=365,s.api_urn="api.zuko.io/v2",s.eventTypes=["input","click","change","focusout"],s.getVisitorId=function(){try{return s.visitorId||e.get("zukoVisitorId")}catch(e){(new r).error("Unable to get visitor ID: "+e)}},s.setVisitorId=function(t){try{return s.visitorId=t,e.set("zukoVisitorId",t,s.visitorIdExpiry,s.getDomain())}catch(e){(new r).error("Unable to set visitor ID: "+e)}},s.generateID=function(e){e=e||32;for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*o.length));return t},s.deleteVisitorId=function(){try{e.erase("zukoVisitorId",s.getDomain()),delete s.visitorId}catch(e){(new r).error("Unable to delete visitor ID: "+e)}},s.getDomain=function(e){for(var t=(e=e||document.domain).split("."),o=t.length-1,r="_cn"+(new Date).getTime();o>=0&&-1===document.cookie.indexOf(r+"="+r);){e=t.slice(o).join(".");var i="https:"===document.location.protocol;document.cookie=i?r+"="+r+";SameSite=None; Secure;domain="+e+";":r+"="+r+";domain="+e+";",o--}var n=new Date((new Date).getTime()-864e5).toUTCString();return document.cookie=r+"=;expires="+n+";domain="+e+";",e},s.visitorId=s.getVisitorId()||s.setVisitorId(s.generateID()),s.trackForm=function(e){var t=e.slug,o=e.target;try{return new s(t,o)}catch(e){(new r).error("Unable to track form: "+e)}},s.trackMedium=function(){var t=new r("true"===e.get("ZukoDebug")?r.DEBUG:void 0);try{var o,i=s.getDomain();if(window.URLSearchParams&&(t.debug("Attempting to retrieve utm_medium from URLSearchParams"),o=new window.URLSearchParams(window.location.search).get("utm_medium")),!o&&(t.debug("Attempting to retrieve medium from referrer"),document.referrer.length>0)){var n=new URL(document.referrer).hostname;if(s.getDomain(n)!==i){t.debug("Referrer is from outside the current domain, so work out if it was from a search engine");for(var c=0;c<a.length;c++){var u=a[c];if(n.match(u)){t.debug("Referrer found to be a search engine, so assigning the medium 'organic'"),o="organic",t.debug("Breaking out early as there is no point in searching past the first match");break}}o||(t.debug("No search engines have matched, so defaulting to a standard 'referral' medium"),o="referral")}else t.debug("Referrer is part of the same site, so not changing the referrer in the session cookie")}o||(t.debug("Attempting to retrieve a previously tracked medium from session cookie"),o=e.get("zukoTrafficMedium")),o||(t.debug("There is no utm_medium param or referrer so the visitor arrived on the page by entering the address or from a bookmark, so assigning a the medium of 'none'"),o="none"),o&&(t.debug("Found a trafficMedium '"+o+"', so storing it in a session cookie for the tracking code to pick up"),e.set("zukoTrafficMedium",o,void 0,i))}catch(e){t.warn("Caught error so as to not throw an error in the client's browser console"),t.error(e)}},s.COMPLETION={type:"completion"},s.COMPLETION_EVENT={type:"completion"},s.FORM_VIEW_EVENT={type:"formView"},s.prototype.trackEvent=function(e){try{"string"==typeof e?this.client.saveEvent(new o({type:e},this.constructor.visitorId,this.slug,this.domain,this.attributes)):"focusout"===e.type?e.target.matches(e.target.localName+":-webkit-autofill")&&!this.attributes.autofillTriggered&&(this.setAttribute("autofillTriggered","true"),this.client.saveEvent(new o({type:"Autofill triggered"},this.constructor.visitorId,this.slug,this.domain,this.attributes))):this.client.saveEvent(new o(e,this.constructor.visitorId,this.slug,this.domain,this.attributes))}catch(e){this.logger.error("Unable to create ZukoEvent or send Event: "+e)}return this},s.prototype.setAttribute=function(e,t){try{!e||void 0===t||e.length<1?this.logger.error("Attribute key and value are required"):this.attributes[e]=t}catch(e){this.logger.error("Unable to set attribute: "+e)}return this},s.prototype.unsetAttribute=function(e){try{return this.setAttribute(e,null)}catch(e){this.logger.error("Unable to unset attribute: "+e)}return this},s}.apply(t,r),void 0===i||(e.exports=i)},428:(e,t,o)=>{var r,i;r=[o(692),o(170)],void 0===(i=function(e,t){"use strict";var o=function(e,r){if(!e)throw new Error("ZukoAjaxClient requires a URN to be instantiated.");var i=o.ssl?"https":"http";if(this.url=i+"://"+e+"/event",r)if(r.logger){if(!(r.logger instanceof t))throw new Error("Logger must be an instance of ZukoLogger");this.logger=r.logger}else this.logger=new t;else this.logger=new t};return o.ssl=!0,o.prototype.saveEvent=function(t){if(!(t instanceof e))throw new Error("saveEvent requires a ZukoEvent to be passed to it");var r=new XMLHttpRequest;this.logger.debug("Binding event 'onload' event listener"),r.onload=function(){if(202!==r.status)throw new Error("Failed to send event to server")},this.logger.debug("Opening 'GET' connection"),r.open("GET",this.url+"?"+o.encodeEvent(t),!0),this.logger.info("Sending event"),r.send()},o.encodeEvent=function(e,t){return t||(t=""),"field"===t&&(e=e.toJSON()),Object.keys(e).map((function(r){var i=e[r];return null!==i&&"object"==typeof i?t?o.encodeEvent(i,t+"["+r+"]"):o.encodeEvent(i,r):t?"attributes"===t&&null===i?["unsetAttributes[]",r].map(encodeURIComponent).join("="):[t+"["+r+"]",i].map(encodeURIComponent).join("="):[t+r,i].map(encodeURIComponent).join("=")})).filter((function(e){return!!e})).join("&")},o}.apply(t,r))||(e.exports=i)},562:(e,t,o)=>{var r;void 0===(r=function(){"use strict";return{set:function(e,t,o,r){var i=[e+"="+t,"domain="+r,"path=/"];if(o){o=o||365;var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var a=n.toUTCString();i.push("expires="+a)}return"https:"===document.location.protocol&&i.push("SameSite=None","Secure"),document.cookie=i.join("; "),t},get:function(e){for(var t=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var i=o[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},erase:function(e,t){this.set(e,"",-1,t)}}}.call(t,o,t,e))||(e.exports=r)},692:(e,t,o)=>{var r,i;r=[o(738)],void 0===(i=function(e){"use strict";var t=function(o,r,i,n,a){if(!r||"string"!=typeof r)throw new Error("visitorId is required");if(this.visitorId=r,!i||"string"!=typeof i)throw new Error("formSlug is required");if(this.formSlug=i,!n||"string"!=typeof n)throw new Error("domain is required");if(this.domain=n,!(a&&a instanceof Object)||Array.isArray(a))throw new Error("attributes is required");if(this.attributes=a,!o||"object"!=typeof o)throw new Error("an event is required");if(this.timeStamp=t.convertTimeStampToEpoch(o.timeStamp||(new Date).getTime()),!o.type||"string"!=typeof o.type)throw new Error("an event type is required");this.type=o.type,o.target&&(this.field=new e(o.target))};return t.convertTimeStampToEpoch=function(e){return"undefined"!==window.performance&&"undefined"!==window.performance.timing&&e<performance.timing.navigationStart?e+performance.timing.navigationStart:e},t}.apply(t,r))||(e.exports=i)},738:(e,t,o)=>{var r;void 0===(r=function(){"use strict";var e=["BUTTON","INPUT","SELECT","TEXTAREA"];function t(e){if("function"==typeof e.closest&&e.closest("button")&&"BUTTON"!==e.tagName&&(e=e.closest("button")),!(e instanceof HTMLElement))throw new Error("ZukoField requires a valid HTML Element");this.field={tagName:e.tagName},e.dataset.zukoTagName&&(this.field.tagName=e.dataset.zukoTagName.toUpperCase()),e.attributes.hasOwnProperty("type")&&(this.field.type=e.attributes.getNamedItem("type").value),e.dataset.zukoType&&(this.field.type=e.dataset.zukoType),e.attributes.hasOwnProperty("id")&&(this.field.id=e.attributes.getNamedItem("id").value),e.dataset.zukoId&&(this.field.id=e.dataset.zukoId),e.attributes.hasOwnProperty("name")&&(this.field.name=e.attributes.getNamedItem("name").value),e.dataset.zukoName&&(this.field.name=e.dataset.zukoName)}return t.prototype.toJSON=function(){return this.field},t.prototype.shouldTrack=function(){return e.indexOf(this.field.tagName)>-1},t}.call(t,o,t,e))||(e.exports=r)},23:(e,t,o)=>{var r;void 0===(r=function(){"use strict";var e="zukoFieldLabeller",t="https://field-labelling-tool.zuko.io";function o(o,r){if(!o)throw new Error("Form UUID is required");if(!r)throw new Error("Logger is required");this.logger=r,this.frame||document.querySelector("iframe#zukoFieldLabeller")?this.logger.debug("Returning early, as there is already a labelling tool running on the page."):(this.frame=document.createElement("iframe"),Object.assign(this.frame,{id:e,src:t+"?form_uuid="+o}),Object.assign(this.frame.style,{height:"0px",border:"none"}),document.body.appendChild(this.frame),this.logger.debug("Added the iframe to the document body"),window.addEventListener("message",function(o){this.logger.debug("Received a message "+JSON.stringify({message:o})),o.origin===t?"SetFrameStyle"===(o.data.purpose.match(new RegExp(e+"(\\w+)"))||[])[1]&&(this.logger.debug("Received command to set the frame styles"),Object.assign(this.frame.style,o.data.styles),this.logger.debug("Set the frame styles")):this.logger.debug("Returning early as the message is not for the correct origin")}.bind(this)))}return o.prototype.trackField=function(o){return this.logger.debug("trackField called; dispatching a message to the labeller"),this.frame.contentWindow.postMessage({purpose:e+"FieldIdentification",field:o},t),this.logger.debug("dispatched message to the labeller"),this},o.windowNameFormat=/^zukoFieldLabeller_(.*)_([0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12})$/,o}.call(t,o,t,e))||(e.exports=r)},170:(e,t,o)=>{var r;void 0===(r=function(){"use strict";function e(t){this.level=0===t?0:t||e.defaultLevel}return e.DEBUG=0,e.INFO=1,e.WARN=2,e.ERROR=3,e.SILENT=4,e.handler=console,e.defaultLevel=e.SILENT,e.prototype.debug=function(t){this.level<=e.DEBUG&&this.constructor.handler.debug(t)},e.prototype.info=function(t){this.level<=e.INFO&&this.constructor.handler.info(t)},e.prototype.warn=function(t){this.level<=e.WARN&&this.constructor.handler.warn(t)},e.prototype.error=function(t){this.level<=e.ERROR&&this.constructor.handler.error(t)},e}.call(t,o,t,e))||(e.exports=r)}},t={},o=function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}(704);Zuko=o})();
//# sourceMappingURL=client.min.js.map