/*!
* jQuery Cookie Plugin v1.4.1
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2013 Klaus Hartl
* Released under the MIT license
*/(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?module.exports=t():'function'==typeof define&&define.amd?define(t):e.Popper=t()})(this,function(){'use strict';function e(e){return e&&'[object Function]'==={}.toString.call(e)}function t(e,t){if(1!==e.nodeType)return[];var o=getComputedStyle(e,null);return t?o[t]:o}function o(e){return 'HTML'===e.nodeName?e:e.parentNode||e.host}function n(e){if(!e)return document.body;switch(e.nodeName){case 'HTML':case 'BODY':return e.ownerDocument.body;case '#document':return e.body;}var i=t(e),r=i.overflow,p=i.overflowX,s=i.overflowY;return /(auto|scroll)/.test(r+s+p)?e:n(o(e))}function r(e){var o=e&&e.offsetParent,i=o&&o.nodeName;return i&&'BODY'!==i&&'HTML'!==i?-1!==['TD','TABLE'].indexOf(o.nodeName)&&'static'===t(o,'position')?r(o):o:e?e.ownerDocument.documentElement:document.documentElement}function p(e){var t=e.nodeName;return 'BODY'!==t&&('HTML'===t||r(e.firstElementChild)===e)}function s(e){return null===e.parentNode?e:s(e.parentNode)}function d(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=o?e:t,n=o?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(n,0);var l=a.commonAncestorContainer;if(e!==l&&t!==l||i.contains(n))return p(l)?l:r(l);var f=s(e);return f.host?d(f.host,t):d(e,s(t).host)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'top',o='top'===t?'scrollTop':'scrollLeft',i=e.nodeName;if('BODY'===i||'HTML'===i){var n=e.ownerDocument.documentElement,r=e.ownerDocument.scrollingElement||n;return r[o]}return e[o]}function l(e,t){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=a(t,'top'),n=a(t,'left'),r=o?-1:1;return e.top+=i*r,e.bottom+=i*r,e.left+=n*r,e.right+=n*r,e}function f(e,t){var o='x'===t?'Left':'Top',i='Left'==o?'Right':'Bottom';return parseFloat(e['border'+o+'Width'],10)+parseFloat(e['border'+i+'Width'],10)}function m(e,t,o,i){return J(t['offset'+e],t['scroll'+e],o['client'+e],o['offset'+e],o['scroll'+e],ie()?o['offset'+e]+i['margin'+('Height'===e?'Top':'Left')]+i['margin'+('Height'===e?'Bottom':'Right')]:0)}function h(){var e=document.body,t=document.documentElement,o=ie()&&getComputedStyle(t);return{height:m('Height',e,t,o),width:m('Width',e,t,o)}}function c(e){return se({},e,{right:e.left+e.width,bottom:e.top+e.height})}function g(e){var o={};if(ie())try{o=e.getBoundingClientRect();var i=a(e,'top'),n=a(e,'left');o.top+=i,o.left+=n,o.bottom+=i,o.right+=n}catch(e){}else o=e.getBoundingClientRect();var r={left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top},p='HTML'===e.nodeName?h():{},s=p.width||e.clientWidth||r.right-r.left,d=p.height||e.clientHeight||r.bottom-r.top,l=e.offsetWidth-s,m=e.offsetHeight-d;if(l||m){var g=t(e);l-=f(g,'x'),m-=f(g,'y'),r.width-=l,r.height-=m}return c(r)}function u(e,o){var i=ie(),r='HTML'===o.nodeName,p=g(e),s=g(o),d=n(e),a=t(o),f=parseFloat(a.borderTopWidth,10),m=parseFloat(a.borderLeftWidth,10),h=c({top:p.top-s.top-f,left:p.left-s.left-m,width:p.width,height:p.height});if(h.marginTop=0,h.marginLeft=0,!i&&r){var u=parseFloat(a.marginTop,10),b=parseFloat(a.marginLeft,10);h.top-=f-u,h.bottom-=f-u,h.left-=m-b,h.right-=m-b,h.marginTop=u,h.marginLeft=b}return(i?o.contains(d):o===d&&'BODY'!==d.nodeName)&&(h=l(h,o)),h}function b(e){var t=e.ownerDocument.documentElement,o=u(e,t),i=J(t.clientWidth,window.innerWidth||0),n=J(t.clientHeight,window.innerHeight||0),r=a(t),p=a(t,'left'),s={top:r-o.top+o.marginTop,left:p-o.left+o.marginLeft,width:i,height:n};return c(s)}function w(e){var i=e.nodeName;return 'BODY'===i||'HTML'===i?!1:'fixed'===t(e,'position')||w(o(e))}function y(e,t,i,r){var p={top:0,left:0},s=d(e,t);if('viewport'===r)p=b(s);else{var a;'scrollParent'===r?(a=n(o(t)),'BODY'===a.nodeName&&(a=e.ownerDocument.documentElement)):'window'===r?a=e.ownerDocument.documentElement:a=r;var l=u(a,s);if('HTML'===a.nodeName&&!w(s)){var f=h(),m=f.height,c=f.width;p.top+=l.top-l.marginTop,p.bottom=m+l.top,p.left+=l.left-l.marginLeft,p.right=c+l.left}else p=l}return p.left+=i,p.top+=i,p.right-=i,p.bottom-=i,p}function E(e){var t=e.width,o=e.height;return t*o}function v(e,t,o,i,n){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf('auto'))return e;var p=y(o,i,r,n),s={top:{width:p.width,height:t.top-p.top},right:{width:p.right-t.right,height:p.height},bottom:{width:p.width,height:p.bottom-t.bottom},left:{width:t.left-p.left,height:p.height}},d=Object.keys(s).map(function(e){return se({key:e},s[e],{area:E(s[e])})}).sort(function(e,t){return t.area-e.area}),a=d.filter(function(e){var t=e.width,i=e.height;return t>=o.clientWidth&&i>=o.clientHeight}),l=0<a.length?a[0].key:d[0].key,f=e.split('-')[1];return l+(f?'-'+f:'')}function O(e,t,o){var i=d(t,o);return u(o,i)}function L(e){var t=getComputedStyle(e),o=parseFloat(t.marginTop)+parseFloat(t.marginBottom),i=parseFloat(t.marginLeft)+parseFloat(t.marginRight),n={width:e.offsetWidth+i,height:e.offsetHeight+o};return n}function x(e){var t={left:'right',right:'left',bottom:'top',top:'bottom'};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function S(e,t,o){o=o.split('-')[0];var i=L(e),n={width:i.width,height:i.height},r=-1!==['right','left'].indexOf(o),p=r?'top':'left',s=r?'left':'top',d=r?'height':'width',a=r?'width':'height';return n[p]=t[p]+t[d]/2-i[d]/2,n[s]=o===s?t[s]-i[a]:t[x(s)],n}function T(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function D(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var i=T(e,function(e){return e[t]===o});return e.indexOf(i)}function C(t,o,i){var n=void 0===i?t:t.slice(0,D(t,'name',i));return n.forEach(function(t){t['function']&&console.warn('`modifier.function` is deprecated, use `modifier.fn`!');var i=t['function']||t.fn;t.enabled&&e(i)&&(o.offsets.popper=c(o.offsets.popper),o.offsets.reference=c(o.offsets.reference),o=i(o,t))}),o}function N(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=O(this.state,this.popper,this.reference),e.placement=v(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.offsets.popper=S(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position='absolute',e=C(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function k(e,t){return e.some(function(e){var o=e.name,i=e.enabled;return i&&o===t})}function W(e){for(var t=[!1,'ms','Webkit','Moz','O'],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length-1;n++){var i=t[n],r=i?''+i+o:e;if('undefined'!=typeof document.body.style[r])return r}return null}function P(){return this.state.isDestroyed=!0,k(this.modifiers,'applyStyle')&&(this.popper.removeAttribute('x-placement'),this.popper.style.left='',this.popper.style.position='',this.popper.style.top='',this.popper.style[W('transform')]=''),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function B(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,o,i){var r='BODY'===e.nodeName,p=r?e.ownerDocument.defaultView:e;p.addEventListener(t,o,{passive:!0}),r||H(n(p.parentNode),t,o,i),i.push(p)}function A(e,t,o,i){o.updateBound=i,B(e).addEventListener('resize',o.updateBound,{passive:!0});var r=n(e);return H(r,'scroll',o.updateBound,o.scrollParents),o.scrollElement=r,o.eventsEnabled=!0,o}function I(){this.state.eventsEnabled||(this.state=A(this.reference,this.options,this.state,this.scheduleUpdate))}function M(e,t){return B(e).removeEventListener('resize',t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener('scroll',t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function R(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=M(this.reference,this.state))}function U(e){return ''!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function Y(e,t){Object.keys(t).forEach(function(o){var i='';-1!==['width','height','top','right','bottom','left'].indexOf(o)&&U(t[o])&&(i='px'),e.style[o]=t[o]+i})}function j(e,t){Object.keys(t).forEach(function(o){var i=t[o];!1===i?e.removeAttribute(o):e.setAttribute(o,t[o])})}function F(e,t,o){var i=T(e,function(e){var o=e.name;return o===t}),n=!!i&&e.some(function(e){return e.name===o&&e.enabled&&e.order<i.order});if(!n){var r='`'+t+'`';console.warn('`'+o+'`'+' modifier is required by '+r+' modifier in order to work, be sure to include it before '+r+'!')}return n}function K(e){return 'end'===e?'start':'start'===e?'end':e}function q(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=ae.indexOf(e),i=ae.slice(o+1).concat(ae.slice(0,o));return t?i.reverse():i}function V(e,t,o,i){var n=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+n[1],p=n[2];if(!r)return e;if(0===p.indexOf('%')){var s;switch(p){case '%p':s=o;break;case '%':case '%r':default:s=i;}var d=c(s);return d[t]/100*r}if('vh'===p||'vw'===p){var a;return a='vh'===p?J(document.documentElement.clientHeight,window.innerHeight||0):J(document.documentElement.clientWidth,window.innerWidth||0),a/100*r}return r}function z(e,t,o,i){var n=[0,0],r=-1!==['right','left'].indexOf(i),p=e.split(/(\+|\-)/).map(function(e){return e.trim()}),s=p.indexOf(T(p,function(e){return-1!==e.search(/,|\s/)}));p[s]&&-1===p[s].indexOf(',')&&console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');var d=/\s*,\s*|\s+/,a=-1===s?[p]:[p.slice(0,s).concat([p[s].split(d)[0]]),[p[s].split(d)[1]].concat(p.slice(s+1))];return a=a.map(function(e,i){var n=(1===i?!r:r)?'height':'width',p=!1;return e.reduce(function(e,t){return ''===e[e.length-1]&&-1!==['+','-'].indexOf(t)?(e[e.length-1]=t,p=!0,e):p?(e[e.length-1]+=t,p=!1,e):e.concat(t)},[]).map(function(e){return V(e,n,t,o)})}),a.forEach(function(e,t){e.forEach(function(o,i){U(o)&&(n[t]+=o*('-'===e[i-1]?-1:1))})}),n}function G(e,t){var o,i=t.offset,n=e.placement,r=e.offsets,p=r.popper,s=r.reference,d=n.split('-')[0];return o=U(+i)?[+i,0]:z(i,p,s,d),'left'===d?(p.top+=o[0],p.left-=o[1]):'right'===d?(p.top+=o[0],p.left+=o[1]):'top'===d?(p.left+=o[0],p.top-=o[1]):'bottom'===d&&(p.left+=o[0],p.top+=o[1]),e.popper=p,e}for(var _=Math.min,X=Math.floor,J=Math.max,Q='undefined'!=typeof window&&'undefined'!=typeof document,Z=['Edge','Trident','Firefox'],$=0,ee=0;ee<Z.length;ee+=1)if(Q&&0<=navigator.userAgent.indexOf(Z[ee])){$=1;break}var i,te=Q&&window.Promise,oe=te?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},$))}},ie=function(){return void 0==i&&(i=-1!==navigator.appVersion.indexOf('MSIE 10')),i},ne=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},re=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),pe=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},se=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var i in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de=['auto-start','auto','auto-end','top-start','top','top-end','right-start','right','right-end','bottom-end','bottom','bottom-start','left-end','left','left-start'],ae=de.slice(3),le={FLIP:'flip',CLOCKWISE:'clockwise',COUNTERCLOCKWISE:'counterclockwise'},fe=function(){function t(o,i){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};ne(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=oe(this.update.bind(this)),this.options=se({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=o&&o.jquery?o[0]:o,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(se({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){n.options.modifiers[e]=se({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return se({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var p=this.options.eventsEnabled;p&&this.enableEventListeners(),this.state.eventsEnabled=p}return re(t,[{key:'update',value:function(){return N.call(this)}},{key:'destroy',value:function(){return P.call(this)}},{key:'enableEventListeners',value:function(){return I.call(this)}},{key:'disableEventListeners',value:function(){return R.call(this)}}]),t}();return fe.Utils=('undefined'==typeof window?global:window).PopperUtils,fe.placements=de,fe.Defaults={placement:'bottom',eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split('-')[0],i=t.split('-')[1];if(i){var n=e.offsets,r=n.reference,p=n.popper,s=-1!==['bottom','top'].indexOf(o),d=s?'left':'top',a=s?'width':'height',l={start:pe({},d,r[d]),end:pe({},d,r[d]+r[a]-p[a])};e.offsets.popper=se({},p,l[i])}return e}},offset:{order:200,enabled:!0,fn:G,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||r(e.instance.popper);e.instance.reference===o&&(o=r(o));var i=y(e.instance.popper,e.instance.reference,t.padding,o);t.boundaries=i;var n=t.priority,p=e.offsets.popper,s={primary:function(e){var o=p[e];return p[e]<i[e]&&!t.escapeWithReference&&(o=J(p[e],i[e])),pe({},e,o)},secondary:function(e){var o='right'===e?'left':'top',n=p[o];return p[e]>i[e]&&!t.escapeWithReference&&(n=_(p[o],i[e]-('right'===e?p.width:p.height))),pe({},o,n)}};return n.forEach(function(e){var t=-1===['left','top'].indexOf(e)?'secondary':'primary';p=se({},p,s[t](e))}),e.offsets.popper=p,e},priority:['left','right','top','bottom'],padding:5,boundariesElement:'scrollParent'},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,i=t.reference,n=e.placement.split('-')[0],r=X,p=-1!==['top','bottom'].indexOf(n),s=p?'right':'bottom',d=p?'left':'top',a=p?'width':'height';return o[s]<r(i[d])&&(e.offsets.popper[d]=r(i[d])-o[a]),o[d]>r(i[s])&&(e.offsets.popper[d]=r(i[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,o){var i;if(!F(e.instance.modifiers,'arrow','keepTogether'))return e;var n=o.element;if('string'==typeof n){if(n=e.instance.popper.querySelector(n),!n)return e;}else if(!e.instance.popper.contains(n))return console.warn('WARNING: `arrow.element` must be child of its popper element!'),e;var r=e.placement.split('-')[0],p=e.offsets,s=p.popper,d=p.reference,a=-1!==['left','right'].indexOf(r),l=a?'height':'width',f=a?'Top':'Left',m=f.toLowerCase(),h=a?'left':'top',g=a?'bottom':'right',u=L(n)[l];d[g]-u<s[m]&&(e.offsets.popper[m]-=s[m]-(d[g]-u)),d[m]+u>s[g]&&(e.offsets.popper[m]+=d[m]+u-s[g]),e.offsets.popper=c(e.offsets.popper);var b=d[m]+d[l]/2-u/2,w=t(e.instance.popper),y=parseFloat(w['margin'+f],10),E=parseFloat(w['border'+f+'Width'],10),v=b-e.offsets.popper[m]-y-E;return v=J(_(s[l]-u,v),0),e.arrowElement=n,e.offsets.arrow=(i={},pe(i,m,Math.round(v)),pe(i,h,''),i),e},element:'[x-arrow]'},flip:{order:600,enabled:!0,fn:function(e,t){if(k(e.instance.modifiers,'inner'))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var o=y(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement),i=e.placement.split('-')[0],n=x(i),r=e.placement.split('-')[1]||'',p=[];switch(t.behavior){case le.FLIP:p=[i,n];break;case le.CLOCKWISE:p=q(i);break;case le.COUNTERCLOCKWISE:p=q(i,!0);break;default:p=t.behavior;}return p.forEach(function(s,d){if(i!==s||p.length===d+1)return e;i=e.placement.split('-')[0],n=x(i);var a=e.offsets.popper,l=e.offsets.reference,f=X,m='left'===i&&f(a.right)>f(l.left)||'right'===i&&f(a.left)<f(l.right)||'top'===i&&f(a.bottom)>f(l.top)||'bottom'===i&&f(a.top)<f(l.bottom),h=f(a.left)<f(o.left),c=f(a.right)>f(o.right),g=f(a.top)<f(o.top),u=f(a.bottom)>f(o.bottom),b='left'===i&&h||'right'===i&&c||'top'===i&&g||'bottom'===i&&u,w=-1!==['top','bottom'].indexOf(i),y=!!t.flipVariations&&(w&&'start'===r&&h||w&&'end'===r&&c||!w&&'start'===r&&g||!w&&'end'===r&&u);(m||b||y)&&(e.flipped=!0,(m||b)&&(i=p[d+1]),y&&(r=K(r)),e.placement=i+(r?'-'+r:''),e.offsets.popper=se({},e.offsets.popper,S(e.instance.popper,e.offsets.reference,e.placement)),e=C(e.instance.modifiers,e,'flip'))}),e},behavior:'flip',padding:5,boundariesElement:'viewport'},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split('-')[0],i=e.offsets,n=i.popper,r=i.reference,p=-1!==['left','right'].indexOf(o),s=-1===['top','left'].indexOf(o);return n[p?'left':'top']=r[o]-(s?n[p?'width':'height']:0),e.placement=x(t),e.offsets.popper=c(n),e}},hide:{order:800,enabled:!0,fn:function(e){if(!F(e.instance.modifiers,'hide','preventOverflow'))return e;var t=e.offsets.reference,o=T(e.instance.modifiers,function(e){return 'preventOverflow'===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes['x-out-of-boundaries']=''}else{if(!1===e.hide)return e;e.hide=!1,e.attributes['x-out-of-boundaries']=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o=t.x,i=t.y,n=e.offsets.popper,p=T(e.instance.modifiers,function(e){return 'applyStyle'===e.name}).gpuAcceleration;void 0!==p&&console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');var s,d,a=void 0===p?t.gpuAcceleration:p,l=r(e.instance.popper),f=g(l),m={position:n.position},h={left:X(n.left),top:X(n.top),bottom:X(n.bottom),right:X(n.right)},c='bottom'===o?'top':'bottom',u='right'===i?'left':'right',b=W('transform');if(d='bottom'==c?-f.height+h.bottom:h.top,s='right'==u?-f.width+h.right:h.left,a&&b)m[b]='translate3d('+s+'px, '+d+'px, 0)',m[c]=0,m[u]=0,m.willChange='transform';else{var w='bottom'==c?-1:1,y='right'==u?-1:1;m[c]=d*w,m[u]=s*y,m.willChange=c+', '+u}var E={"x-placement":e.placement};return e.attributes=se({},E,e.attributes),e.styles=se({},m,e.styles),e.arrowStyles=se({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:'bottom',y:'right'},applyStyle:{order:900,enabled:!0,fn:function(e){return Y(e.instance.popper,e.styles),j(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&Y(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,i,n){var r=O(n,t,e),p=v(o.placement,r,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute('x-placement',p),Y(t,{position:'absolute'}),o},gpuAcceleration:void 0}}},fe});var TRANSITION_END='transitionend';var MAX_UID=1000000;var MILLISECONDS_MULTIPLIER=1000;function toType(obj){return{}.toString.call(obj).match(/\s([a-z]+)/i)[1].toLowerCase();}
function getSpecialTransitionEndEvent(){return{bindType:TRANSITION_END,delegateType:TRANSITION_END,handle:function handle(event){if($(event.target).is(this)){return event.handleObj.handler.apply(this,arguments);}
return undefined;}};}
function transitionEndEmulator(duration){var _this=this;var called=false;$(this).one(UtilSimplex.TRANSITION_END,function(){called=true;});setTimeout(function(){if(!called){UtilSimplex.triggerTransitionEnd(_this);}},duration);return this;}
function setTransitionEndSupport(){$.fn.emulateTransitionEnd=transitionEndEmulator;$.event.special[UtilSimplex.TRANSITION_END]=getSpecialTransitionEndEvent();}
var UtilSimplex={TRANSITION_END:'bsTransitionEnd',getUID:function getUID(prefix){do{prefix+=~~(Math.random()*MAX_UID);}while(document.getElementById(prefix));return prefix;},getSelectorFromElement:function getSelectorFromElement(element){var selector=element.getAttribute('data-target');if(!selector||selector==='#'){var hrefAttr=element.getAttribute('href');selector=hrefAttr&&hrefAttr!=='#'?hrefAttr.trim():'';}
try{return document.querySelector(selector)?selector:null;}catch(err){return null;}},getTransitionDurationFromElement:function getTransitionDurationFromElement(element){if(!element){return 0;}
var transitionDuration=$(element).css('transition-duration');var transitionDelay=$(element).css('transition-delay');var floatTransitionDuration=parseFloat(transitionDuration);var floatTransitionDelay=parseFloat(transitionDelay);if(!floatTransitionDuration&&!floatTransitionDelay){return 0;}
transitionDuration=transitionDuration.split(',')[0];transitionDelay=transitionDelay.split(',')[0];return(parseFloat(transitionDuration)+parseFloat(transitionDelay))*MILLISECONDS_MULTIPLIER;},reflow:function reflow(element){return element.offsetHeight;},triggerTransitionEnd:function triggerTransitionEnd(element){$(element).trigger(TRANSITION_END);},supportsTransitionEnd:function supportsTransitionEnd(){return Boolean(TRANSITION_END);},isElement:function isElement(obj){return(obj[0]||obj).nodeType;},typeCheckConfig:function typeCheckConfig(componentName,config,configTypes){for(var property in configTypes){if(Object.prototype.hasOwnProperty.call(configTypes,property)){var expectedTypes=configTypes[property];var value=config[property];var valueType=value&&UtilSimplex.isElement(value)?'element':toType(value);if(!new RegExp(expectedTypes).test(valueType)){throw new Error(componentName.toUpperCase()+": "+("Option \""+property+"\" provided type \""+valueType+"\" ")+("but expected type \""+expectedTypes+"\"."));}}}},findShadowRoot:function findShadowRoot(element){if(!document.documentElement.attachShadow){return null;}
if(typeof element.getRootNode==='function'){var root=element.getRootNode();return root instanceof ShadowRoot?root:null;}
if(element instanceof ShadowRoot){return element;}
if(!element.parentNode){return null;}
return UtilSimplex.findShadowRoot(element.parentNode);}};(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('jquery'),require('./util.js')):typeof define==='function'&&define.amd?define(['jquery','./util.js'],factory):(global=global||self,global.Toast=factory(global.jQuery,global.UtilSimplex));}(this,function($,UtilSimplex){'use strict';$=$&&$.hasOwnProperty('default')?$['default']:$;UtilSimplex=UtilSimplex&&UtilSimplex.hasOwnProperty('default')?UtilSimplex['default']:UtilSimplex;function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}
return obj;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}
ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}
return target;}
var NAME='toast';var VERSION='4.3.1';var DATA_KEY='bs.toast';var EVENT_KEY="."+DATA_KEY;var JQUERY_NO_CONFLICT=$.fn[NAME];var Event={CLICK_DISMISS:"click.dismiss"+EVENT_KEY,HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY};var ClassName={FADE:'fade',HIDE:'hide',SHOW:'show',SHOWING:'showing'};var DefaultType={animation:'boolean',autohide:'boolean',delay:'number'};var Default={animation:true,autohide:true,delay:500};var Selector={DATA_DISMISS:'[data-dismiss="toast"]'};var Toast=function(){function Toast(element,config){this._element=element;this._config=this._getConfig(config);this._timeout=null;this._setListeners();}
var _proto=Toast.prototype;_proto.show=function show(){var _this=this;$(this._element).trigger(Event.SHOW);if(this._config.animation){this._element.classList.add(ClassName.FADE);}
var complete=function complete(){_this._element.classList.remove(ClassName.SHOWING);_this._element.classList.add(ClassName.SHOW);$(_this._element).trigger(Event.SHOWN);if(_this._config.autohide){_this.hide();}};this._element.classList.remove(ClassName.HIDE);this._element.classList.add(ClassName.SHOWING);if(this._config.animation){var transitionDuration=UtilSimplex.getTransitionDurationFromElement(this._element);$(this._element).one(UtilSimplex.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration);}else{complete();}};_proto.hide=function hide(withoutTimeout){var _this2=this;if(!this._element.classList.contains(ClassName.SHOW)){return;}
$(this._element).trigger(Event.HIDE);if(withoutTimeout){this._close();}else{this._timeout=setTimeout(function(){_this2._close();},this._config.delay);}};_proto.dispose=function dispose(){clearTimeout(this._timeout);this._timeout=null;if(this._element.classList.contains(ClassName.SHOW)){this._element.classList.remove(ClassName.SHOW);}
$(this._element).off(Event.CLICK_DISMISS);$.removeData(this._element,DATA_KEY);this._element=null;this._config=null;};_proto._getConfig=function _getConfig(config){config=_objectSpread({},Default,$(this._element).data(),typeof config==='object'&&config?config:{});UtilSimplex.typeCheckConfig(NAME,config,this.constructor.DefaultType);return config;};_proto._setListeners=function _setListeners(){var _this3=this;$(this._element).on(Event.CLICK_DISMISS,Selector.DATA_DISMISS,function(){return _this3.hide(true);});};_proto._close=function _close(){var _this4=this;var complete=function complete(){_this4._element.classList.add(ClassName.HIDE);$(_this4._element).trigger(Event.HIDDEN);};this._element.classList.remove(ClassName.SHOW);if(this._config.animation){var transitionDuration=UtilSimplex.getTransitionDurationFromElement(this._element);$(this._element).one(UtilSimplex.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration);}else{complete();}};Toast._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var $element=$(this);var data=$element.data(DATA_KEY);var _config=typeof config==='object'&&config;if(!data){data=new Toast(this,_config);$element.data(DATA_KEY,data);}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"");}
data[config](this);}});};_createClass(Toast,null,[{key:"VERSION",get:function get(){return VERSION;}},{key:"DefaultType",get:function get(){return DefaultType;}},{key:"Default",get:function get(){return Default;}}]);return Toast;}();$.fn[NAME]=Toast._jQueryInterface;$.fn[NAME].Constructor=Toast;$.fn[NAME].noConflict=function(){$.fn[NAME]=JQUERY_NO_CONFLICT;return Toast._jQueryInterface;};return Toast;}));/*!
* Bootstrap util.js v4.3.1 (https://getbootstrap.com/)
* Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('jquery')):typeof define==='function'&&define.amd?define(['jquery'],factory):(global=global||self,global.Util=factory(global.jQuery));}(this,function($){'use strict';$=$&&$.hasOwnProperty('default')?$['default']:$;var TRANSITION_END='transitionend';var MAX_UID=1000000;var MILLISECONDS_MULTIPLIER=1000;function toType(obj){return{}.toString.call(obj).match(/\s([a-z]+)/i)[1].toLowerCase();}
function getSpecialTransitionEndEvent(){return{bindType:TRANSITION_END,delegateType:TRANSITION_END,handle:function handle(event){if($(event.target).is(this)){return event.handleObj.handler.apply(this,arguments);}
return undefined;}};}
function transitionEndEmulator(duration){var _this=this;var called=false;$(this).one(Util.TRANSITION_END,function(){called=true;});setTimeout(function(){if(!called){Util.triggerTransitionEnd(_this);}},duration);return this;}
function setTransitionEndSupport(){$.fn.emulateTransitionEnd=transitionEndEmulator;$.event.special[Util.TRANSITION_END]=getSpecialTransitionEndEvent();}
var Util={TRANSITION_END:'bsTransitionEnd',getUID:function getUID(prefix){do{prefix+=~~(Math.random()*MAX_UID);}while(document.getElementById(prefix));return prefix;},getSelectorFromElement:function getSelectorFromElement(element){var selector=element.getAttribute('data-target');if(!selector||selector==='#'){var hrefAttr=element.getAttribute('href');selector=hrefAttr&&hrefAttr!=='#'?hrefAttr.trim():'';}
try{return document.querySelector(selector)?selector:null;}catch(err){return null;}},getTransitionDurationFromElement:function getTransitionDurationFromElement(element){if(!element){return 0;}
var transitionDuration=$(element).css('transition-duration');var transitionDelay=$(element).css('transition-delay');var floatTransitionDuration=parseFloat(transitionDuration);var floatTransitionDelay=parseFloat(transitionDelay);if(!floatTransitionDuration&&!floatTransitionDelay){return 0;}
transitionDuration=transitionDuration.split(',')[0];transitionDelay=transitionDelay.split(',')[0];return(parseFloat(transitionDuration)+parseFloat(transitionDelay))*MILLISECONDS_MULTIPLIER;},reflow:function reflow(element){return element.offsetHeight;},triggerTransitionEnd:function triggerTransitionEnd(element){$(element).trigger(TRANSITION_END);},supportsTransitionEnd:function supportsTransitionEnd(){return Boolean(TRANSITION_END);},isElement:function isElement(obj){return(obj[0]||obj).nodeType;},typeCheckConfig:function typeCheckConfig(componentName,config,configTypes){for(var property in configTypes){if(Object.prototype.hasOwnProperty.call(configTypes,property)){var expectedTypes=configTypes[property];var value=config[property];var valueType=value&&Util.isElement(value)?'element':toType(value);if(!new RegExp(expectedTypes).test(valueType)){throw new Error(componentName.toUpperCase()+": "+("Option \""+property+"\" provided type \""+valueType+"\" ")+("but expected type \""+expectedTypes+"\"."));}}}},findShadowRoot:function findShadowRoot(element){if(!document.documentElement.attachShadow){return null;}
if(typeof element.getRootNode==='function'){var root=element.getRootNode();return root instanceof ShadowRoot?root:null;}
if(element instanceof ShadowRoot){return element;}
if(!element.parentNode){return null;}
return Util.findShadowRoot(element.parentNode);}};setTransitionEndSupport();return Util;}));/*!
* Bootstrap tooltip.js v4.3.1 (https://getbootstrap.com/)
* Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
*/(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory(require('jquery'),require('popper.js'),require('./util.js')):typeof define==='function'&&define.amd?define(['jquery','popper.js','./util.js'],factory):(global=global||self,global.Tooltip=factory(global.jQuery,global.Popper,global.Util));}(this,function($,Popper,Util){'use strict';$=$&&$.hasOwnProperty('default')?$['default']:$;Popper=Popper&&Popper.hasOwnProperty('default')?Popper['default']:Popper;Util=Util&&Util.hasOwnProperty('default')?Util['default']:Util;function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}
return obj;}
function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}
ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}
return target;}
var uriAttrs=['background','cite','href','itemtype','longdesc','poster','src','xlink:href'];var ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i;var DefaultWhitelist={'*':['class','dir','id','lang','role',ARIA_ATTRIBUTE_PATTERN],a:['target','href','title','rel'],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:['src','alt','title','width','height'],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};var SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;var DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function allowedAttribute(attr,allowedAttributeList){var attrName=attr.nodeName.toLowerCase();if(allowedAttributeList.indexOf(attrName)!==-1){if(uriAttrs.indexOf(attrName)!==-1){return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN)||attr.nodeValue.match(DATA_URL_PATTERN));}
return true;}
var regExp=allowedAttributeList.filter(function(attrRegex){return attrRegex instanceof RegExp;});for(var i=0,l=regExp.length;i<l;i++){if(attrName.match(regExp[i])){return true;}}
return false;}
function sanitizeHtml(unsafeHtml,whiteList,sanitizeFn){if(unsafeHtml.length===0){return unsafeHtml;}
if(sanitizeFn&&typeof sanitizeFn==='function'){return sanitizeFn(unsafeHtml);}
var domParser=new window.DOMParser();var createdDocument=domParser.parseFromString(unsafeHtml,'text/html');var whitelistKeys=Object.keys(whiteList);var elements=[].slice.call(createdDocument.body.querySelectorAll('*'));var _loop=function _loop(i,len){var el=elements[i];var elName=el.nodeName.toLowerCase();if(whitelistKeys.indexOf(el.nodeName.toLowerCase())===-1){el.parentNode.removeChild(el);return "continue";}
var attributeList=[].slice.call(el.attributes);var whitelistedAttributes=[].concat(whiteList['*']||[],whiteList[elName]||[]);attributeList.forEach(function(attr){if(!allowedAttribute(attr,whitelistedAttributes)){el.removeAttribute(attr.nodeName);}});};for(var i=0,len=elements.length;i<len;i++){var _ret=_loop(i,len);if(_ret==="continue")continue;}
return createdDocument.body.innerHTML;}
var NAME='tooltip';var VERSION='4.3.1';var DATA_KEY='bs.tooltip';var EVENT_KEY="."+DATA_KEY;var JQUERY_NO_CONFLICT=$.fn[NAME];var CLASS_PREFIX='bs-tooltip';var BSCLS_PREFIX_REGEX=new RegExp("(^|\\s)"+CLASS_PREFIX+"\\S+",'g');var DISALLOWED_ATTRIBUTES=['sanitize','whiteList','sanitizeFn'];var DefaultType={animation:'boolean',template:'string',title:'(string|element|function)',trigger:'string',delay:'(number|object)',html:'boolean',selector:'(string|boolean)',placement:'(string|function)',offset:'(number|string|function)',container:'(string|element|boolean)',fallbackPlacement:'(string|array)',boundary:'(string|element)',sanitize:'boolean',sanitizeFn:'(null|function)',whiteList:'object'};var AttachmentMap={AUTO:'auto',TOP:'top',RIGHT:'right',BOTTOM:'bottom',LEFT:'left'};var Default={animation:true,template:'<div class="tooltip" role="tooltip">'+'<div class="arrow"></div>'+'<div class="tooltip-inner"></div></div>',trigger:'hover focus',title:'',delay:0,html:false,selector:false,placement:'top',offset:0,container:false,fallbackPlacement:'flip',boundary:'scrollParent',sanitize:true,sanitizeFn:null,whiteList:DefaultWhitelist};var HoverState={SHOW:'show',OUT:'out'};var Event={HIDE:"hide"+EVENT_KEY,HIDDEN:"hidden"+EVENT_KEY,SHOW:"show"+EVENT_KEY,SHOWN:"shown"+EVENT_KEY,INSERTED:"inserted"+EVENT_KEY,CLICK:"click"+EVENT_KEY,FOCUSIN:"focusin"+EVENT_KEY,FOCUSOUT:"focusout"+EVENT_KEY,MOUSEENTER:"mouseenter"+EVENT_KEY,MOUSELEAVE:"mouseleave"+EVENT_KEY};var ClassName={FADE:'fade',SHOW:'show'};var Selector={TOOLTIP:'.tooltip',TOOLTIP_INNER:'.tooltip-inner',ARROW:'.arrow'};var Trigger={HOVER:'hover',FOCUS:'focus',CLICK:'click',MANUAL:'manual'};var Tooltip=function(){function Tooltip(element,config){if(typeof Popper==='undefined'){throw new TypeError('Bootstrap\'s tooltips require Popper.js (https://popper.js.org/)');}
this._isEnabled=true;this._timeout=0;this._hoverState='';this._activeTrigger={};this._popper=null;this.element=element;this.config=this._getConfig(config);this.tip=null;this._setListeners();}
var _proto=Tooltip.prototype;_proto.enable=function enable(){this._isEnabled=true;};_proto.disable=function disable(){this._isEnabled=false;};_proto.toggleEnabled=function toggleEnabled(){this._isEnabled=!this._isEnabled;};_proto.toggle=function toggle(event){if(!this._isEnabled){return;}
if(event){var dataKey=this.constructor.DATA_KEY;var context=$(event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());$(event.currentTarget).data(dataKey,context);}
context._activeTrigger.click=!context._activeTrigger.click;if(context._isWithActiveTrigger()){context._enter(null,context);}else{context._leave(null,context);}}else{if($(this.getTipElement()).hasClass(ClassName.SHOW)){this._leave(null,this);return;}
this._enter(null,this);}};_proto.dispose=function dispose(){clearTimeout(this._timeout);$.removeData(this.element,this.constructor.DATA_KEY);$(this.element).off(this.constructor.EVENT_KEY);$(this.element).closest('.modal').off('hide.bs.modal');if(this.tip){$(this.tip).remove();}
this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper!==null){this._popper.destroy();}
this._popper=null;this.element=null;this.config=null;this.tip=null;};_proto.show=function show(){var _this=this;if($(this.element).css('display')==='none'){throw new Error('Please use show on visible elements');}
var showEvent=$.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){$(this.element).trigger(showEvent);var shadowRoot=Util.findShadowRoot(this.element);var isInTheDom=$.contains(shadowRoot!==null?shadowRoot:this.element.ownerDocument.documentElement,this.element);if(showEvent.isDefaultPrevented()||!isInTheDom){return;}
var tip=this.getTipElement();var tipId=Util.getUID(this.constructor.NAME);tip.setAttribute('id',tipId);this.element.setAttribute('aria-describedby',tipId);this.setContent();if(this.config.animation){$(tip).addClass(ClassName.FADE);}
var placement=typeof this.config.placement==='function'?this.config.placement.call(this,tip,this.element):this.config.placement;var attachment=this._getAttachment(placement);this.addAttachmentClass(attachment);var container=this._getContainer();$(tip).data(this.constructor.DATA_KEY,this);if(!$.contains(this.element.ownerDocument.documentElement,this.tip)){$(tip).appendTo(container);}
$(this.element).trigger(this.constructor.Event.INSERTED);this._popper=new Popper(this.element,tip,{placement:attachment,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:Selector.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function onCreate(data){if(data.originalPlacement!==data.placement){_this._handlePopperPlacementChange(data);}},onUpdate:function onUpdate(data){return _this._handlePopperPlacementChange(data);}});$(tip).addClass(ClassName.SHOW);if('ontouchstart'in document.documentElement){$(document.body).children().on('mouseover',null,$.noop);}
var complete=function complete(){if(_this.config.animation){_this._fixTransition();}
var prevHoverState=_this._hoverState;_this._hoverState=null;$(_this.element).trigger(_this.constructor.Event.SHOWN);if(prevHoverState===HoverState.OUT){_this._leave(null,_this);}};if($(this.tip).hasClass(ClassName.FADE)){var transitionDuration=Util.getTransitionDurationFromElement(this.tip);$(this.tip).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration);}else{complete();}}};_proto.hide=function hide(callback){var _this2=this;var tip=this.getTipElement();var hideEvent=$.Event(this.constructor.Event.HIDE);var complete=function complete(){if(_this2._hoverState!==HoverState.SHOW&&tip.parentNode){tip.parentNode.removeChild(tip);}
_this2._cleanTipClass();_this2.element.removeAttribute('aria-describedby');$(_this2.element).trigger(_this2.constructor.Event.HIDDEN);if(_this2._popper!==null){_this2._popper.destroy();}
if(callback){callback();}};$(this.element).trigger(hideEvent);if(hideEvent.isDefaultPrevented()){return;}
$(tip).removeClass(ClassName.SHOW);if('ontouchstart'in document.documentElement){$(document.body).children().off('mouseover',null,$.noop);}
this._activeTrigger[Trigger.CLICK]=false;this._activeTrigger[Trigger.FOCUS]=false;this._activeTrigger[Trigger.HOVER]=false;if($(this.tip).hasClass(ClassName.FADE)){var transitionDuration=Util.getTransitionDurationFromElement(tip);$(tip).one(Util.TRANSITION_END,complete).emulateTransitionEnd(transitionDuration);}else{complete();}
this._hoverState='';};_proto.update=function update(){if(this._popper!==null){this._popper.scheduleUpdate();}};_proto.isWithContent=function isWithContent(){return Boolean(this.getTitle());};_proto.addAttachmentClass=function addAttachmentClass(attachment){$(this.getTipElement()).addClass(CLASS_PREFIX+"-"+attachment);};_proto.getTipElement=function getTipElement(){this.tip=this.tip||$(this.config.template)[0];return this.tip;};_proto.setContent=function setContent(){var tip=this.getTipElement();this.setElementContent($(tip.querySelectorAll(Selector.TOOLTIP_INNER)),this.getTitle());$(tip).removeClass(ClassName.FADE+" "+ClassName.SHOW);};_proto.setElementContent=function setElementContent($element,content){if(typeof content==='object'&&(content.nodeType||content.jquery)){if(this.config.html){if(!$(content).parent().is($element)){$element.empty().append(content);}}else{$element.text($(content).text());}
return;}
if(this.config.html){if(this.config.sanitize){content=sanitizeHtml(content,this.config.whiteList,this.config.sanitizeFn);}
$element.html(content);}else{$element.text(content);}};_proto.getTitle=function getTitle(){var title=this.element.getAttribute('data-original-title');if(!title){title=typeof this.config.title==='function'?this.config.title.call(this.element):this.config.title;}
return title;};_proto._getOffset=function _getOffset(){var _this3=this;var offset={};if(typeof this.config.offset==='function'){offset.fn=function(data){data.offsets=_objectSpread({},data.offsets,_this3.config.offset(data.offsets,_this3.element)||{});return data;};}else{offset.offset=this.config.offset;}
return offset;};_proto._getContainer=function _getContainer(){if(this.config.container===false){return document.body;}
if(Util.isElement(this.config.container)){return $(this.config.container);}
return $(document).find(this.config.container);};_proto._getAttachment=function _getAttachment(placement){return AttachmentMap[placement.toUpperCase()];};_proto._setListeners=function _setListeners(){var _this4=this;var triggers=this.config.trigger.split(' ');triggers.forEach(function(trigger){if(trigger==='click'){$(_this4.element).on(_this4.constructor.Event.CLICK,_this4.config.selector,function(event){return _this4.toggle(event);});}else if(trigger!==Trigger.MANUAL){var eventIn=trigger===Trigger.HOVER?_this4.constructor.Event.MOUSEENTER:_this4.constructor.Event.FOCUSIN;var eventOut=trigger===Trigger.HOVER?_this4.constructor.Event.MOUSELEAVE:_this4.constructor.Event.FOCUSOUT;$(_this4.element).on(eventIn,_this4.config.selector,function(event){return _this4._enter(event);}).on(eventOut,_this4.config.selector,function(event){return _this4._leave(event);});}});$(this.element).closest('.modal').on('hide.bs.modal',function(){if(_this4.element){_this4.hide();}});if(this.config.selector){this.config=_objectSpread({},this.config,{trigger:'manual',selector:''});}else{this._fixTitle();}};_proto._fixTitle=function _fixTitle(){var titleType=typeof this.element.getAttribute('data-original-title');if(this.element.getAttribute('title')||titleType!=='string'){this.element.setAttribute('data-original-title',this.element.getAttribute('title')||'');this.element.setAttribute('title','');}};_proto._enter=function _enter(event,context){var dataKey=this.constructor.DATA_KEY;context=context||$(event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());$(event.currentTarget).data(dataKey,context);}
if(event){context._activeTrigger[event.type==='focusin'?Trigger.FOCUS:Trigger.HOVER]=true;}
if($(context.getTipElement()).hasClass(ClassName.SHOW)||context._hoverState===HoverState.SHOW){context._hoverState=HoverState.SHOW;return;}
clearTimeout(context._timeout);context._hoverState=HoverState.SHOW;if(!context.config.delay||!context.config.delay.show){context.show();return;}
context._timeout=setTimeout(function(){if(context._hoverState===HoverState.SHOW){context.show();}},context.config.delay.show);};_proto._leave=function _leave(event,context){var dataKey=this.constructor.DATA_KEY;context=context||$(event.currentTarget).data(dataKey);if(!context){context=new this.constructor(event.currentTarget,this._getDelegateConfig());$(event.currentTarget).data(dataKey,context);}
if(event){context._activeTrigger[event.type==='focusout'?Trigger.FOCUS:Trigger.HOVER]=false;}
if(context._isWithActiveTrigger()){return;}
clearTimeout(context._timeout);context._hoverState=HoverState.OUT;if(!context.config.delay||!context.config.delay.hide){context.hide();return;}
context._timeout=setTimeout(function(){if(context._hoverState===HoverState.OUT){context.hide();}},context.config.delay.hide);};_proto._isWithActiveTrigger=function _isWithActiveTrigger(){for(var trigger in this._activeTrigger){if(this._activeTrigger[trigger]){return true;}}
return false;};_proto._getConfig=function _getConfig(config){var dataAttributes=$(this.element).data();Object.keys(dataAttributes).forEach(function(dataAttr){if(DISALLOWED_ATTRIBUTES.indexOf(dataAttr)!==-1){delete dataAttributes[dataAttr];}});config=_objectSpread({},this.constructor.Default,dataAttributes,typeof config==='object'&&config?config:{});if(typeof config.delay==='number'){config.delay={show:config.delay,hide:config.delay};}
if(typeof config.title==='number'){config.title=config.title.toString();}
if(typeof config.content==='number'){config.content=config.content.toString();}
Util.typeCheckConfig(NAME,config,this.constructor.DefaultType);if(config.sanitize){config.template=sanitizeHtml(config.template,config.whiteList,config.sanitizeFn);}
return config;};_proto._getDelegateConfig=function _getDelegateConfig(){var config={};if(this.config){for(var key in this.config){if(this.constructor.Default[key]!==this.config[key]){config[key]=this.config[key];}}}
return config;};_proto._cleanTipClass=function _cleanTipClass(){var $tip=$(this.getTipElement());var tabClass=$tip.attr('class').match(BSCLS_PREFIX_REGEX);if(tabClass!==null&&tabClass.length){$tip.removeClass(tabClass.join(''));}};_proto._handlePopperPlacementChange=function _handlePopperPlacementChange(popperData){var popperInstance=popperData.instance;this.tip=popperInstance.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(popperData.placement));};_proto._fixTransition=function _fixTransition(){var tip=this.getTipElement();var initConfigAnimation=this.config.animation;if(tip.getAttribute('x-placement')!==null){return;}
$(tip).removeClass(ClassName.FADE);this.config.animation=false;this.hide();this.show();this.config.animation=initConfigAnimation;};Tooltip._jQueryInterface=function _jQueryInterface(config){return this.each(function(){var data=$(this).data(DATA_KEY);var _config=typeof config==='object'&&config;if(!data&&/dispose|hide/.test(config)){return;}
if(!data){data=new Tooltip(this,_config);$(this).data(DATA_KEY,data);}
if(typeof config==='string'){if(typeof data[config]==='undefined'){throw new TypeError("No method named \""+config+"\"");}
data[config]();}});};_createClass(Tooltip,null,[{key:"VERSION",get:function get(){return VERSION;}},{key:"Default",get:function get(){return Default;}},{key:"NAME",get:function get(){return NAME;}},{key:"DATA_KEY",get:function get(){return DATA_KEY;}},{key:"Event",get:function get(){return Event;}},{key:"EVENT_KEY",get:function get(){return EVENT_KEY;}},{key:"DefaultType",get:function get(){return DefaultType;}}]);return Tooltip;}();$.fn[NAME]=Tooltip._jQueryInterface;$.fn[NAME].Constructor=Tooltip;$.fn[NAME].noConflict=function(){$.fn[NAME]=JQUERY_NO_CONFLICT;return Tooltip._jQueryInterface;};return Tooltip;}));!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return fd.apply(null,arguments)}function b(a){fd=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ja(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a),c=gd.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),hd.length>0)for(c in hd)d=hd[c],e=b[d],m(e)||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),id===!1&&(id=!0,a.updateOffset(this),id=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function u(b,c){var d=!0;return g(function(){return null!=a.deprecationHandler&&a.deprecationHandler(null,b),d&&(t(b+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),d=!1),c.apply(this,arguments)},c)}function v(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),jd[b]||(t(c),jd[b]=!0)}function w(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function x(a){return "[object Object]"===Object.prototype.toString.call(a)}function y(a){var b,c;for(c in a)b=a[c],w(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function z(a,b){var c,d=g({},a);for(c in b)f(b,c)&&(x(a[c])&&x(b[c])?(d[c]={},g(d[c],a[c]),g(d[c],b[c])):null!=b[c]?d[c]=b[c]:delete d[c]);return d}function A(a){null!=a&&this.set(a)}function B(a){return a?a.toLowerCase().replace("_","-"):a}function C(a){for(var b,c,d,e,f=0;f<a.length;){for(e=B(a[f]).split("-"),b=e.length,c=B(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=D(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function D(a){var b=null;if(!nd[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=ld._abbr,require("./locale/"+a),E(b)}catch(c){}return nd[a]}function E(a,b){var c;return a&&(c=m(b)?H(a):F(a,b),c&&(ld=c)),ld._abbr}function F(a,b){return null!==b?(b.abbr=a,null!=nd[a]?(v("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),b=z(nd[a]._config,b)):null!=b.parentLocale&&(null!=nd[b.parentLocale]?b=z(nd[b.parentLocale]._config,b):v("parentLocaleUndefined","specified parentLocale is not defined yet")),nd[a]=new A(b),E(a),nd[a]):(delete nd[a],null)}function G(a,b){if(null!=b){var c;null!=nd[a]&&(b=z(nd[a]._config,b)),c=new A(b),c.parentLocale=nd[a],nd[a]=c,E(a)}else null!=nd[a]&&(null!=nd[a].parentLocale?nd[a]=nd[a].parentLocale:null!=nd[a]&&delete nd[a]);return nd[a]}function H(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ld;if(!c(a)){if(b=D(a))return b;a=[a]}return C(a)}function I(){return kd(nd)}function J(a,b){var c=a.toLowerCase();od[c]=od[c+"s"]=od[b]=a}function K(a){return "string"==typeof a?od[a]||od[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)f(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(b,c){return function(d){return null!=d?(O(this,b,d),a.updateOffset(this,c),this):N(this,b)}}function N(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function O(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function P(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=K(a),w(this[a]))return this[a](b);return this}function Q(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function R(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(sd[a]=e),b&&(sd[b[0]]=function(){return Q(e.apply(this,arguments),b[1],b[2])}),c&&(sd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function S(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function T(a){var b,c,d=a.match(pd);for(b=0,c=d.length;c>b;b++)sd[d[b]]?d[b]=sd[d[b]]:d[b]=S(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function U(a,b){return a.isValid()?(b=V(b,a.localeData()),rd[b]=rd[b]||T(b),rd[b](a)):a.localeData().invalidDate()}function V(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(qd.lastIndex=0;d>=0&&qd.test(a);)a=a.replace(qd,c),qd.lastIndex=0,d-=1;return a}function W(a,b,c){Kd[a]=w(b)?b:function(a,d){return a&&c?c:b}}function X(a,b){return f(Kd,a)?Kd[a](b._strict,b._locale):new RegExp(Y(a))}function Y(a){return Z(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function Z(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)Ld[a[c]]=d}function _(a,b){$(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function aa(a,b,c){null!=b&&f(Ld,a)&&Ld[a](b,c._a,c,a)}function ba(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ca(a,b){return c(this._months)?this._months[a.month()]:this._months[Vd.test(b)?"format":"standalone"][a.month()]}function da(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Vd.test(b)?"format":"standalone"][a.month()]}function ea(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=h([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=md.call(this._shortMonthsParse,g),-1!==e?e:null):(e=md.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=md.call(this._shortMonthsParse,g),-1!==e?e:(e=md.call(this._longMonthsParse,g),-1!==e?e:null)):(e=md.call(this._longMonthsParse,g),-1!==e?e:(e=md.call(this._shortMonthsParse,g),-1!==e?e:null))}function fa(a,b,c){var d,e,f;if(this._monthsParseExact)return ea.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ga(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=r(b);else if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),ba(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ha(b){return null!=b?(ga(this,b),a.updateOffset(this,!0),this):N(this,"Month")}function ia(){return ba(this.year(),this.month())}function ja(a){return this._monthsParseExact?(f(this,"_monthsRegex")||la.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ka(a){return this._monthsParseExact?(f(this,"_monthsRegex")||la.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function la(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=Z(d[b]),e[b]=Z(e[b]),f[b]=Z(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function ma(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[Nd]<0||c[Nd]>11?Nd:c[Od]<1||c[Od]>ba(c[Md],c[Nd])?Od:c[Pd]<0||c[Pd]>24||24===c[Pd]&&(0!==c[Qd]||0!==c[Rd]||0!==c[Sd])?Pd:c[Qd]<0||c[Qd]>59?Qd:c[Rd]<0||c[Rd]>59?Rd:c[Sd]<0||c[Sd]>999?Sd:-1,j(a)._overflowDayOfYear&&(Md>b||b>Od)&&(b=Od),j(a)._overflowWeeks&&-1===b&&(b=Td),j(a)._overflowWeekday&&-1===b&&(b=Ud),j(a).overflow=b),a}function na(a){var b,c,d,e,f,g,h=a._i,i=$d.exec(h)||_d.exec(h);if(i){for(j(a).iso=!0,b=0,c=be.length;c>b;b++)if(be[b][1].exec(i[1])){e=be[b][0],d=be[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=ce.length;c>b;b++)if(ce[b][1].exec(i[3])){f=(i[2]||" ")+ce[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!ae.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),Ca(a)}else a._isValid=!1}function oa(b){var c=de.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(na(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function pa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function qa(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ra(a){return sa(a)?366:365}function sa(a){return a%4===0&&a%100!==0||a%400===0}function ta(){return sa(this.year())}function ua(a,b,c){var d=7+b-c,e=(7+qa(a,0,d).getUTCDay()-b)%7;return-e+d-1}function va(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ua(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=ra(f)+j):j>ra(a)?(f=a+1,g=j-ra(a)):(f=a,g=j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+xa(e,b,c)):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(ra(a)-d+e)/7}function ya(a,b,c){return null!=a?a:null!=b?b:c}function za(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function Aa(a){var b,c,d,e,f=[];if(!a._d){for(d=za(a),a._w&&null==a._a[Od]&&null==a._a[Nd]&&Ba(a),a._dayOfYear&&(e=ya(a._a[Md],d[Md]),a._dayOfYear>ra(e)&&(j(a)._overflowDayOfYear=!0),c=qa(e,0,a._dayOfYear),a._a[Nd]=c.getUTCMonth(),a._a[Od]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Pd]&&0===a._a[Qd]&&0===a._a[Rd]&&0===a._a[Sd]&&(a._nextDay=!0,a._a[Pd]=0),a._d=(a._useUTC?qa:pa).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Pd]=24)}}function Ba(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ya(b.GG,a._a[Md],wa(Ka(),1,4).year),d=ya(b.W,1),e=ya(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ya(b.gg,a._a[Md],wa(Ka(),f,g).year),d=ya(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>xa(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[Md]=h.year,a._dayOfYear=h.dayOfYear)}function Ca(b){if(b._f===a.ISO_8601)return void na(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=V(b._f,b._locale).match(pd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(X(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),sd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),aa(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[Pd]<=12&&b._a[Pd]>0&&(j(b).bigHour=void 0),j(b).parsedDateParts=b._a.slice(0),j(b).meridiem=b._meridiem,b._a[Pd]=Da(b._locale,b._a[Pd],b._meridiem),Aa(b),ma(b)}function Da(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function Ea(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],Ca(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function Fa(a){if(!a._d){var b=L(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),Aa(a)}}function Ga(a){var b=new o(ma(Ha(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ha(a){var b=a._i,e=a._f;return a._locale=a._locale||H(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(ma(b)):(c(e)?Ea(a):e?Ca(a):d(b)?a._d=b:Ia(a),k(a)||(a._d=null),a))}function Ia(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(f.valueOf()):"string"==typeof f?oa(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),Aa(b)):"object"==typeof f?Fa(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ja(a,b,c,d,e){var f={};return "boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Ga(f)}function Ka(a,b,c,d){return Ja(a,b,c,d,!1)}function La(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ka();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ma(){var a=[].slice.call(arguments,0);return La("isBefore",a)}function Na(){var a=[].slice.call(arguments,0);return La("isAfter",a)}function Oa(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=H(),this._bubble()}function Pa(a){return a instanceof Oa}function Qa(a,b){R(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+Q(~~(a/60),2)+b+Q(~~a%60,2)})}function Ra(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(ie)||["-",0,0],f=+(60*e[1])+r(e[2]);return "+"===e[0]?f:-f}function Sa(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?b.valueOf():Ka(b).valueOf())-e.valueOf(),e._d.setTime(e._d.valueOf()+f),a.updateOffset(e,!1),e):Ka(b).local()}function Ta(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Ua(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=Ra(Hd,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ta(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?jb(this,db(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ta(this):null!=b?this:NaN}function Va(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Wa(a){return this.utcOffset(0,a)}function Xa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ta(this),"m")),this}function Ya(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ra(Gd,this._i)),this}function Za(a){return this.isValid()?(a=a?Ka(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function $a(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _a(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),a=Ha(a),a._a){var b=a._isUTC?h(a._a):Ka(a._a);this._isDSTShifted=this.isValid()&&s(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function ab(){return this.isValid()?!this._isUTC:!1}function bb(){return this.isValid()?this._isUTC:!1}function cb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function db(a,b){var c,d,e,g=a,h=null;return Pa(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=je.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[Od])*c,h:r(h[Pd])*c,m:r(h[Qd])*c,s:r(h[Rd])*c,ms:r(h[Sd])*c}):(h=ke.exec(a))?(c="-"===h[1]?-1:1,g={y:eb(h[2],c),M:eb(h[3],c),w:eb(h[4],c),d:eb(h[5],c),h:eb(h[6],c),m:eb(h[7],c),s:eb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=gb(Ka(g.from),Ka(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Oa(g),Pa(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function eb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function fb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function gb(a,b){var c;return a.isValid()&&b.isValid()?(b=Sa(b,a),a.isBefore(b)?c=fb(a,b):(c=fb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function hb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function ib(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(v(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=db(c,d),jb(this,e,a),this}}function jb(b,c,d,e){var f=c._milliseconds,g=hb(c._days),h=hb(c._months);b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&O(b,"Date",N(b,"Date")+g*d),h&&ga(b,N(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function kb(a,b){var c=a||Ka(),d=Sa(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(w(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ka(c)))}function lb(){return new o(this)}function mb(a,b){var c=p(a)?a:Ka(a);return this.isValid()&&c.isValid()?(b=K(m(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function nb(a,b){var c=p(a)?a:Ka(a);return this.isValid()&&c.isValid()?(b=K(m(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function ob(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function pb(a,b){var c,d=p(a)?a:Ka(a);return this.isValid()&&d.isValid()?(b=K(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function qb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function rb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function sb(a,b,c){var d,e,f,g;return this.isValid()?(d=Sa(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),"year"===b||"month"===b||"quarter"===b?(g=tb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN):NaN}function tb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function ub(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function vb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?w(Date.prototype.toISOString)?this.toDate().toISOString():U(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function wb(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=U(this,b);return this.localeData().postformat(c)}function xb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ka(a).isValid())?db({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function yb(a){return this.from(Ka(),a)}function zb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ka(a).isValid())?db({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function Ab(a){return this.to(Ka(),a)}function Bb(a){var b;return void 0===a?this._locale._abbr:(b=H(a),null!=b&&(this._locale=b),this)}function Cb(){return this._locale}function Db(a){switch(a=K(a)){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return "week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function Eb(a){return a=K(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function Fb(){return this._d.valueOf()-6e4*(this._offset||0)}function Gb(){return Math.floor(this.valueOf()/1e3)}function Hb(){return this._offset?new Date(this.valueOf()):this._d}function Ib(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Jb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Kb(){return this.isValid()?this.toISOString():null}function Lb(){return k(this)}function Mb(){return g({},j(this))}function Nb(){return j(this).overflow}function Ob(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Pb(a,b){R(0,[a,a.length],0,b)}function Qb(a){return Ub.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Rb(a){return Ub.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Sb(){return xa(this.year(),1,4)}function Tb(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)}function Ub(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:(f=xa(a,d,e),b>f&&(b=f),Vb.call(this,a,b,c,d,e))}function Vb(a,b,c,d,e){var f=va(a,b,c,d,e),g=qa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Wb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Xb(a){return wa(a,this._week.dow,this._week.doy).week}function Yb(){return this._week.dow}function Zb(){return this._week.doy}function $b(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function _b(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function ac(a,b){return "string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function bc(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function cc(a){return this._weekdaysShort[a.day()]}function dc(a){return this._weekdaysMin[a.day()]}function ec(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=h([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=md.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=md.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=md.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=md.call(this._weekdaysParse,g),-1!==e?e:(e=md.call(this._shortWeekdaysParse,g),-1!==e?e:(e=md.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=md.call(this._shortWeekdaysParse,g),-1!==e?e:(e=md.call(this._weekdaysParse,g),-1!==e?e:(e=md.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=md.call(this._minWeekdaysParse,g),-1!==e?e:(e=md.call(this._weekdaysParse,g),-1!==e?e:(e=md.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function fc(a,b,c){var d,e,f;if(this._weekdaysParseExact)return ec.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=h([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function gc(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ac(a,this.localeData()),this.add(a-b,"d")):b}function hc(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function ic(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function jc(a){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||mc.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex}function kc(a){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||mc.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function lc(a){return this._weekdaysParseExact?(f(this,"_weekdaysRegex")||mc.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function mc(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],i=[],j=[],k=[];for(b=0;7>b;b++)c=h([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),i.push(e),j.push(f),k.push(d),k.push(e),k.push(f);for(g.sort(a),i.sort(a),j.sort(a),k.sort(a),b=0;7>b;b++)i[b]=Z(i[b]),j[b]=Z(j[b]),k[b]=Z(k[b]);this._weekdaysRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function nc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function oc(){return this.hours()%12||12}function pc(){return this.hours()||24}function qc(a,b){R(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function rc(a,b){return b._meridiemParse}function sc(a){return "p"===(a+"").toLowerCase().charAt(0)}function tc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function uc(a,b){b[Sd]=r(1e3*("0."+a))}function vc(){return this._isUTC?"UTC":""}function wc(){return this._isUTC?"Coordinated Universal Time":""}function xc(a){return Ka(1e3*a)}function yc(){return Ka.apply(null,arguments).parseZone()}function zc(a,b,c){var d=this._calendar[a];return w(d)?d.call(b,c):d}function Ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function Bc(){return this._invalidDate}function Cc(a){return this._ordinal.replace("%d",a)}function Dc(a){return a}function Ec(a,b,c,d){var e=this._relativeTime[c];return w(e)?e(a,b,c,d):e.replace(/%d/i,a)}function Fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return w(c)?c(b):c.replace(/%s/i,b)}function Gc(a,b,c,d){var e=H(),f=h().set(d,b);return e[c](f,a)}function Hc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Gc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Gc(a,d,c,"month");return e}function Ic(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=H(),f=a?e._week.dow:0;if(null!=c)return Gc(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Gc(b,(g+f)%7,d,"day");return h}function Jc(a,b){return Hc(a,b,"months")}function Kc(a,b){return Hc(a,b,"monthsShort")}function Lc(a,b,c){return Ic(a,b,c,"weekdays")}function Mc(a,b,c){return Ic(a,b,c,"weekdaysShort")}function Nc(a,b,c){return Ic(a,b,c,"weekdaysMin")}function Oc(){var a=this._data;return this._milliseconds=Le(this._milliseconds),this._days=Le(this._days),this._months=Le(this._months),a.milliseconds=Le(a.milliseconds),a.seconds=Le(a.seconds),a.minutes=Le(a.minutes),a.hours=Le(a.hours),a.months=Le(a.months),a.years=Le(a.years),this}function Pc(a,b,c,d){var e=db(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Qc(a,b){return Pc(this,a,b,1)}function Rc(a,b){return Pc(this,a,b,-1)}function Sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Sc(Vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,g+=q(c/24),e=q(Uc(g)),h+=e,g-=Sc(Vc(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Uc(a){return 4800*a/146097}function Vc(a){return 146097*a/4800}function Wc(a){var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Vc(this._months)),a){case "week":return b/7+d/6048e5;case "day":return b+d/864e5;case "hour":return 24*b+d/36e5;case "minute":return 1440*b+d/6e4;case "second":return 86400*b+d/1e3;case "millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function Yc(a){return function(){return this.as(a)}}function Zc(a){return a=K(a),this[a+"s"]()}function $c(a){return function(){return this._data[a]}}function _c(){return q(this.days()/7)}function ad(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function bd(a,b,c){var d=db(a).abs(),e=_e(d.as("s")),f=_e(d.as("m")),g=_e(d.as("h")),h=_e(d.as("d")),i=_e(d.as("M")),j=_e(d.as("y")),k=e<af.s&&["s",e]||1>=f&&["m"]||f<af.m&&["mm",f]||1>=g&&["h"]||g<af.h&&["hh",g]||1>=h&&["d"]||h<af.d&&["dd",h]||1>=i&&["M"]||i<af.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,ad.apply(null,k)}function cd(a,b){return void 0===af[a]?!1:void 0===b?af[a]:(af[a]=b,!0)}function dd(a){var b=this.localeData(),c=bd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function ed(){var a,b,c,d=bf(this._milliseconds)/1e3,e=bf(this._days),f=bf(this._months);a=q(d/60),b=q(a/60),d%=60,a%=60,c=q(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var fd,gd;gd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var hd=a.momentProperties=[],id=!1,jd={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var kd;kd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)f(a,b)&&c.push(b);return c};var ld,md,nd={},od={},pd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,qd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,rd={},sd={},td=/\d/,ud=/\d\d/,vd=/\d{3}/,wd=/\d{4}/,xd=/[+-]?\d{6}/,yd=/\d\d?/,zd=/\d\d\d\d?/,Ad=/\d\d\d\d\d\d?/,Bd=/\d{1,3}/,Cd=/\d{1,4}/,Dd=/[+-]?\d{1,6}/,Ed=/\d+/,Fd=/[+-]?\d+/,Gd=/Z|[+-]\d\d:?\d\d/gi,Hd=/Z|[+-]\d\d(?::?\d\d)?/gi,Id=/[+-]?\d+(\.\d{1,3})?/,Jd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kd={},Ld={},Md=0,Nd=1,Od=2,Pd=3,Qd=4,Rd=5,Sd=6,Td=7,Ud=8;md=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),R("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),W("M",yd),W("MM",yd,ud),W("MMM",function(a,b){return b.monthsShortRegex(a)}),W("MMMM",function(a,b){return b.monthsRegex(a)}),$(["M","MM"],function(a,b){b[Nd]=r(a)-1}),$(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Nd]=e:j(c).invalidMonth=a});var Vd=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Wd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Xd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Yd=Jd,Zd=Jd,$d=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,_d=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ae=/Z|[+-]\d\d(?::?\d\d)?/,be=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ce=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],de=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),R("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),J("year","y"),W("Y",Fd),W("YY",yd,ud),W("YYYY",Cd,wd),W("YYYYY",Dd,xd),W("YYYYYY",Dd,xd),$(["YYYYY","YYYYYY"],Md),$("YYYY",function(b,c){c[Md]=2===b.length?a.parseTwoDigitYear(b):r(b)}),$("YY",function(b,c){c[Md]=a.parseTwoDigitYear(b)}),$("Y",function(a,b){b[Md]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var ee=M("FullYear",!0);a.ISO_8601=function(){};var fe=u("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ka.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:l()}),ge=u("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ka.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:l()}),he=function(){return Date.now?Date.now():+new Date};Qa("Z",":"),Qa("ZZ",""),W("Z",Hd),W("ZZ",Hd),$(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ra(Hd,a)});var ie=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var je=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,ke=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;db.fn=Oa.prototype;var le=ib(1,"add"),me=ib(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ne=u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Pb("gggg","weekYear"),Pb("ggggg","weekYear"),Pb("GGGG","isoWeekYear"),Pb("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),W("G",Fd),W("g",Fd),W("GG",yd,ud),W("gg",yd,ud),W("GGGG",Cd,wd),W("gggg",Cd,wd),W("GGGGG",Dd,xd),W("ggggg",Dd,xd),_(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),_(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),R("Q",0,"Qo","quarter"),J("quarter","Q"),W("Q",td),$("Q",function(a,b){b[Nd]=3*(r(a)-1)}),R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),W("w",yd),W("ww",yd,ud),W("W",yd),W("WW",yd,ud),_(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var oe={dow:0,doy:6};R("D",["DD",2],"Do","date"),J("date","D"),W("D",yd),W("DD",yd,ud),W("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),$(["D","DD"],Od),$("Do",function(a,b){b[Od]=r(a.match(yd)[0],10)});var pe=M("Date",!0);R("d",0,"do","day"),R("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),R("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),R("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),W("d",yd),W("e",yd),W("E",yd),W("dd",function(a,b){return b.weekdaysMinRegex(a)}),W("ddd",function(a,b){return b.weekdaysShortRegex(a)}),W("dddd",function(a,b){return b.weekdaysRegex(a)}),_(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),_(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var qe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),re="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),se="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),te=Jd,ue=Jd,ve=Jd;R("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),W("DDD",Bd),W("DDDD",vd),$(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),R("H",["HH",2],0,"hour"),R("h",["hh",2],0,oc),R("k",["kk",2],0,pc),R("hmm",0,0,function(){return ""+oc.apply(this)+Q(this.minutes(),2)}),R("hmmss",0,0,function(){return ""+oc.apply(this)+Q(this.minutes(),2)+Q(this.seconds(),2)}),R("Hmm",0,0,function(){return ""+this.hours()+Q(this.minutes(),2)}),R("Hmmss",0,0,function(){return ""+this.hours()+Q(this.minutes(),2)+Q(this.seconds(),2)}),qc("a",!0),qc("A",!1),J("hour","h"),W("a",rc),W("A",rc),W("H",yd),W("h",yd),W("HH",yd,ud),W("hh",yd,ud),W("hmm",zd),W("hmmss",Ad),W("Hmm",zd),W("Hmmss",Ad),$(["H","HH"],Pd),$(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),$(["h","hh"],function(a,b,c){b[Pd]=r(a),j(c).bigHour=!0}),$("hmm",function(a,b,c){var d=a.length-2;b[Pd]=r(a.substr(0,d)),b[Qd]=r(a.substr(d)),j(c).bigHour=!0}),$("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Pd]=r(a.substr(0,d)),b[Qd]=r(a.substr(d,2)),b[Rd]=r(a.substr(e)),j(c).bigHour=!0}),$("Hmm",function(a,b,c){var d=a.length-2;b[Pd]=r(a.substr(0,d)),b[Qd]=r(a.substr(d))}),$("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Pd]=r(a.substr(0,d)),b[Qd]=r(a.substr(d,2)),b[Rd]=r(a.substr(e))});var we=/[ap]\.?m?\.?/i,xe=M("Hours",!0);R("m",["mm",2],0,"minute"),J("minute","m"),W("m",yd),W("mm",yd,ud),$(["m","mm"],Qd);var ye=M("Minutes",!1);R("s",["ss",2],0,"second"),J("second","s"),W("s",yd),W("ss",yd,ud),$(["s","ss"],Rd);var ze=M("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return 10*this.millisecond()}),R(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),R(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),R(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),R(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),R(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),W("S",Bd,td),W("SS",Bd,ud),W("SSS",Bd,vd);var Ae;for(Ae="SSSS";Ae.length<=9;Ae+="S")W(Ae,Ed);for(Ae="S";Ae.length<=9;Ae+="S")$(Ae,uc);var Be=M("Milliseconds",!1);R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var Ce=o.prototype;Ce.add=le,Ce.calendar=kb,Ce.clone=lb,Ce.diff=sb,Ce.endOf=Eb,Ce.format=wb,Ce.from=xb,Ce.fromNow=yb,Ce.to=zb,Ce.toNow=Ab,Ce.get=P,Ce.invalidAt=Nb,Ce.isAfter=mb,Ce.isBefore=nb,Ce.isBetween=ob,Ce.isSame=pb,Ce.isSameOrAfter=qb,Ce.isSameOrBefore=rb,Ce.isValid=Lb,Ce.lang=ne,Ce.locale=Bb,Ce.localeData=Cb,Ce.max=ge,Ce.min=fe,Ce.parsingFlags=Mb,Ce.set=P,Ce.startOf=Db,Ce.subtract=me,Ce.toArray=Ib,Ce.toObject=Jb,Ce.toDate=Hb,Ce.toISOString=vb,Ce.toJSON=Kb,Ce.toString=ub,Ce.unix=Gb,Ce.valueOf=Fb,Ce.creationData=Ob,Ce.year=ee,Ce.isLeapYear=ta,Ce.weekYear=Qb,Ce.isoWeekYear=Rb,Ce.quarter=Ce.quarters=Wb,Ce.month=ha,Ce.daysInMonth=ia,Ce.week=Ce.weeks=$b,Ce.isoWeek=Ce.isoWeeks=_b,Ce.weeksInYear=Tb,Ce.isoWeeksInYear=Sb,Ce.date=pe,Ce.day=Ce.days=gc,Ce.weekday=hc,Ce.isoWeekday=ic,Ce.dayOfYear=nc,Ce.hour=Ce.hours=xe,Ce.minute=Ce.minutes=ye,Ce.second=Ce.seconds=ze,Ce.millisecond=Ce.milliseconds=Be,Ce.utcOffset=Ua,Ce.utc=Wa,Ce.local=Xa,Ce.parseZone=Ya,Ce.hasAlignedHourOffset=Za,Ce.isDST=$a,Ce.isDSTShifted=_a,Ce.isLocal=ab,Ce.isUtcOffset=bb,Ce.isUtc=cb,Ce.isUTC=cb,Ce.zoneAbbr=vc,Ce.zoneName=wc,Ce.dates=u("dates accessor is deprecated. Use date instead.",pe),Ce.months=u("months accessor is deprecated. Use month instead",ha),Ce.years=u("years accessor is deprecated. Use year instead",ee),Ce.zone=u("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Va);var De=Ce,Ee={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Fe={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ge="Invalid date",He="%d",Ie=/\d{1,2}/,Je={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ke=A.prototype;Ke._calendar=Ee,Ke.calendar=zc,Ke._longDateFormat=Fe,Ke.longDateFormat=Ac,Ke._invalidDate=Ge,Ke.invalidDate=Bc,Ke._ordinal=He,Ke.ordinal=Cc,Ke._ordinalParse=Ie,Ke.preparse=Dc,Ke.postformat=Dc,Ke._relativeTime=Je,Ke.relativeTime=Ec,Ke.pastFuture=Fc,Ke.set=y,Ke.months=ca,Ke._months=Wd,Ke.monthsShort=da,Ke._monthsShort=Xd,Ke.monthsParse=fa,Ke._monthsRegex=Zd,Ke.monthsRegex=ka,Ke._monthsShortRegex=Yd,Ke.monthsShortRegex=ja,Ke.week=Xb,Ke._week=oe,Ke.firstDayOfYear=Zb,Ke.firstDayOfWeek=Yb,Ke.weekdays=bc,Ke._weekdays=qe,Ke.weekdaysMin=dc,Ke._weekdaysMin=se,Ke.weekdaysShort=cc,Ke._weekdaysShort=re,Ke.weekdaysParse=fc,Ke._weekdaysRegex=te,Ke.weekdaysRegex=jc,Ke._weekdaysShortRegex=ue,Ke.weekdaysShortRegex=kc,Ke._weekdaysMinRegex=ve,Ke.weekdaysMinRegex=lc,Ke.isPM=sc,Ke._meridiemParse=we,Ke.meridiem=tc,E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=u("moment.lang is deprecated. Use moment.locale instead.",E),a.langData=u("moment.langData is deprecated. Use moment.localeData instead.",H);var Le=Math.abs,Me=Yc("ms"),Ne=Yc("s"),Oe=Yc("m"),Pe=Yc("h"),Qe=Yc("d"),Re=Yc("w"),Se=Yc("M"),Te=Yc("y"),Ue=$c("milliseconds"),Ve=$c("seconds"),We=$c("minutes"),Xe=$c("hours"),Ye=$c("days"),Ze=$c("months"),$e=$c("years"),_e=Math.round,af={s:45,m:45,h:22,d:26,M:11},bf=Math.abs,cf=Oa.prototype;cf.abs=Oc,cf.add=Qc,cf.subtract=Rc,cf.as=Wc,cf.asMilliseconds=Me,cf.asSeconds=Ne,cf.asMinutes=Oe,cf.asHours=Pe,cf.asDays=Qe,cf.asWeeks=Re,cf.asMonths=Se,cf.asYears=Te,cf.valueOf=Xc,cf._bubble=Tc,cf.get=Zc,cf.milliseconds=Ue,cf.seconds=Ve,cf.minutes=We,cf.hours=Xe,cf.days=Ye,cf.weeks=_c,cf.months=Ze,cf.years=$e,cf.humanize=dd,cf.toISOString=ed,cf.toString=ed,cf.toJSON=ed,cf.locale=Bb,cf.localeData=Cb,cf.toIsoString=u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ed),cf.lang=ne,R("X",0,0,"unix"),R("x",0,0,"valueOf"),W("x",Fd),W("X",Id),$("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),$("x",function(a,b,c){c._d=new Date(r(a))}),a.version="2.13.0",b(Ka),a.fn=De,a.min=Ma,a.max=Na,a.now=he,a.utc=h,a.unix=xc,a.months=Jc,a.isDate=d,a.locale=E,a.invalid=l,a.duration=db,a.isMoment=p,a.weekdays=Lc,a.parseZone=yc,a.localeData=H,a.isDuration=Pa,a.monthsShort=Kc,a.weekdaysMin=Nc,a.defineLocale=F,a.updateLocale=G,a.locales=I,a.weekdaysShort=Mc,a.normalizeUnits=K,a.relativeTimeThreshold=cd,a.prototype=De;var df=a;return df});(function(root,factory){if(typeof define==='function'&&define.amd){define(['moment','jquery'],function(moment,jquery){return(root.daterangepicker=factory(moment,jquery));});}else if(typeof module==='object'&&module.exports){var jQuery=(typeof window!='undefined')?window.jQuery:undefined;if(!jQuery){jQuery=require('jquery');if(!jQuery.fn)jQuery.fn={};}
module.exports=factory(require('moment'),jQuery);}else{root.daterangepicker=factory(root.moment,root.jQuery);}}(this,function(moment,$){var DateRangePicker=function(element,options,cb){this.parentEl='body';this.element=$(element);this.startDate=moment().startOf('day');this.endDate=moment().endOf('day');this.minDate=false;this.maxDate=false;this.dateLimit=false;this.autoApply=true;this.showDropdowns=false;this.showWeekNumbers=false;this.showISOWeekNumbers=false;this.showCustomRangeLabel=false;this.timePicker=false;this.timePicker24Hour=false;this.timePickerIncrement=1;this.timePickerSeconds=false;this.linkedCalendars=true;this.autoUpdateInput=true;this.alwaysShowCalendars=false;this.datesLabelCount=1;this.isMobile=false;this.changeMonthWithAnim=false;this.DatesFromSearchRequest=false;this.CloseCalendarOnCheckOutMobile=false;this.ranges={};this.opens='right';if(this.element.hasClass('pull-right'))
this.opens='left';this.drops='down';if(this.element.hasClass('dropup'))
this.drops='up';this.buttonClasses='btn';this.locale={direction:'ltr',format:moment.localeData().longDateFormat('L'),separator:' - ',applyLabel:'Apply',cancelLabel:'Cancel',weekLabel:'W',customRangeLabel:'Custom Range',hotelSelectError:'Please select a hotel',paxsError:"The room combination you choose is not possible",daysOfWeek:moment.weekdaysMin(),daysOfWeekfull:moment.weekdays(),monthNames:moment.monthsShort(),firstDay:moment.localeData().firstDayOfWeek(),selectCheckInDate:"Select Check-in Date",selectCheckOutDate:"Select Check-out Date",checkInLabel:"Check-in",checkOutLabel:"Check-out",nights:"nights|night",searchDatesHeader:"Dates",selectGuestStep:"Guests",reset:"reset",datesLabelFormat:"DD MM YYYY"};this.callback=function(){};this.isShowing=false;this.FirstCalendarMonth={};this.LastCalendarMonth={};this.MonthToShow=2;this.AddMonthToShow=2;this.CalendarsMonthArr=[];this.resID="";this.resName="";if(typeof options!=='object'||options===null)
options={};options=$.extend(this.element.data(),options);if(typeof options.template!=='string'&&!(options.template instanceof $))
options.template='<div class="calendar-error">Error in calendar Template</div>';this.parentEl=(options.parentEl&&$(options.parentEl).length)?$(options.parentEl):$(this.parentEl);this.container=$(options.template).appendTo(this.parentEl);if(typeof options.locale==='object'){if(typeof options.locale.direction==='string')
this.locale.direction=options.locale.direction;if(typeof options.locale.format==='string')
this.locale.format=options.locale.format;if(typeof options.locale.separator==='string')
this.locale.separator=options.locale.separator;if(typeof options.locale.daysOfWeek==='object')
this.locale.daysOfWeek=options.locale.daysOfWeek.slice();if(typeof options.locale.daysOfWeekfull==='object')
this.locale.daysOfWeekfull=options.locale.daysOfWeekfull.slice();if(typeof options.locale.monthNames==='object')
this.locale.monthNames=options.locale.monthNames.slice();if(typeof options.locale.firstDay==='number')
this.locale.firstDay=options.locale.firstDay;if(typeof options.locale.applyLabel==='string')
this.locale.applyLabel=options.locale.applyLabel;if(typeof options.locale.cancelLabel==='string')
this.locale.cancelLabel=options.locale.cancelLabel;if(typeof options.locale.weekLabel==='string')
this.locale.weekLabel=options.locale.weekLabel;if(typeof options.locale.customRangeLabel==='string'){var elem=document.createElement('textarea');elem.innerHTML=options.locale.customRangeLabel;var rangeHtml=elem.value;this.locale.customRangeLabel=rangeHtml;}
if(typeof options.locale.checkInLabel==='string')
this.locale.checkInLabel=options.locale.checkInLabel;if(typeof options.locale.checkOutLabel==='string')
this.locale.checkOutLabel=options.locale.checkOutLabel;if(typeof options.locale.nights==='string')
this.locale.nights=options.locale.nights;if(typeof options.locale.reset==='string')
this.locale.reset=options.locale.reset;if(typeof options.locale.searchDatesHeader==='string')
this.locale.searchDatesHeader=options.locale.searchDatesHeader;if(typeof options.locale.selectGuetsStep==='string')
this.locale.selectGuetsStep=options.locale.selectGuetsStep;if(typeof options.locale.hotelSelectError==='string')
this.locale.hotelSelectError=options.locale.hotelSelectError;if(typeof options.locale.paxsError==='string')
this.locale.paxsError=options.locale.paxsError;if(typeof options.locale.selectCheckInDate==='string')
this.locale.selectCheckInDate=options.locale.selectCheckInDate;if(typeof options.locale.selectCheckOutDate==='string')
this.locale.selectCheckOutDate=options.locale.selectCheckOutDate;if(typeof options.locale.datesLabelFormat==='string')
this.locale.datesLabelFormat=options.locale.datesLabelFormat;if(typeof options.locale.PrevMonth==='string')
this.locale.PrevMonth=options.locale.PrevMonth;if(typeof options.locale.NextMonth==='string')
this.locale.NextMonth=options.locale.NextMonth;}
this.container.addClass(this.locale.direction);if(typeof options.startDate==='string')
this.startDate=moment(options.startDate,this.locale.format);if(typeof options.endDate==='string')
this.endDate=moment(options.endDate,this.locale.format);if(typeof options.minDate==='string')
this.minDate=moment(options.minDate,this.locale.format);if(typeof options.maxDate==='string')
this.maxDate=moment(options.maxDate,this.locale.format);if(typeof options.startDate==='object')
this.startDate=moment(options.startDate);if(typeof options.endDate==='object')
this.endDate=moment(options.endDate);if(typeof options.minDate==='object')
this.minDate=moment(options.minDate);if(typeof options.maxDate==='object')
this.maxDate=moment(options.maxDate);if(typeof options.MonthToShow==='number')
this.MonthToShow=options.MonthToShow;if(typeof options.AddMonthToShow==='number')
this.AddMonthToShow=options.AddMonthToShow;if(typeof options.resID==='string')
this.resID=options.resID;if(typeof options.resName==='string')
this.resName=options.resName;if(this.minDate&&this.startDate.isBefore(this.minDate))
this.startDate=this.minDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))
this.endDate=this.maxDate.clone();if(typeof options.dateLimit==='object')
this.dateLimit=options.dateLimit;if(typeof options.opens==='string')
this.opens=options.opens;if(typeof options.drops==='string')
this.drops=options.drops;if(typeof options.showWeekNumbers==='boolean')
this.showWeekNumbers=options.showWeekNumbers;if(typeof options.showISOWeekNumbers==='boolean')
this.showISOWeekNumbers=options.showISOWeekNumbers;if(typeof options.buttonClasses==='string')
this.buttonClasses=options.buttonClasses;if(typeof options.buttonClasses==='object')
this.buttonClasses=options.buttonClasses.join(' ');if(typeof options.showDropdowns==='boolean')
this.showDropdowns=options.showDropdowns;if(typeof options.showCustomRangeLabel==='boolean')
this.showCustomRangeLabel=options.showCustomRangeLabel;if(typeof options.timePicker==='boolean')
this.timePicker=options.timePicker;if(typeof options.timePickerSeconds==='boolean')
this.timePickerSeconds=options.timePickerSeconds;if(typeof options.timePickerIncrement==='number')
this.timePickerIncrement=options.timePickerIncrement;if(typeof options.timePicker24Hour==='boolean')
this.timePicker24Hour=options.timePicker24Hour;if(typeof options.autoApply==='boolean')
this.autoApply=options.autoApply;if(typeof options.CloseCalendarOnCheckOutMobile==='boolean')
this.CloseCalendarOnCheckOutMobile=options.CloseCalendarOnCheckOutMobile;if(typeof options.autoUpdateInput==='boolean')
this.autoUpdateInput=options.autoUpdateInput;if(typeof options.linkedCalendars==='boolean')
this.linkedCalendars=options.linkedCalendars;if(typeof options.isInvalidDate==='function')
this.isInvalidDate=options.isInvalidDate;if(typeof options.getDayTitle==='function')
this.getDayTitle=options.getDayTitle;if(typeof options.getDayPrice==='function')
this.getDayPrice=options.getDayPrice;if(typeof options.isCustomDate==='function')
this.isCustomDate=options.isCustomDate;if(typeof options.alwaysShowCalendars==='boolean')
this.alwaysShowCalendars=options.alwaysShowCalendars;if(typeof options.datesLabelCount==='boolean')
this.datesLabelCount=options.datesLabelCount;if(typeof options.isMobile==='boolean')
this.isMobile=options.isMobile;if(typeof options.changeMonthWithAnim==='boolean')
this.ichangeMonthWithAnimsMobile=options.changeMonthWithAnim;if(typeof options.DatesFromSearchRequest==='boolean')
this.DatesFromSearchRequest=options.DatesFromSearchRequest;if(this.locale.firstDay!=0){var iterator=this.locale.firstDay;while(iterator>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());this.locale.daysOfWeekfull.push(this.locale.daysOfWeekfull.shift());iterator--;}}
var start,end,range;if(typeof options.startDate==='undefined'&&typeof options.endDate==='undefined'){if($(this.element).is('input[type=text]')){var val=$(this.element).val(),split=val.split(this.locale.separator);start=end=null;if(split.length==2){start=moment(split[0],this.locale.format);end=moment(split[1],this.locale.format);}
if(start!==null&&end!==null){this.setStartDate(start);this.setEndDate(end);}}}
if(typeof options.ranges==='object'){for(range in options.ranges){if(typeof options.ranges[range][0]==='string')
start=moment(options.ranges[range][0],this.locale.format);else
start=moment(options.ranges[range][0]);if(typeof options.ranges[range][1]==='string')
end=moment(options.ranges[range][1],this.locale.format);else
end=moment(options.ranges[range][1]);var elem=document.createElement('textarea');elem.innerHTML=range;var rangeHtml=elem.value;this.ranges[rangeHtml]=[start,end];}
var list='<ul>';for(range in this.ranges){list+='<li data-range-key="'+range+'">'+range+'</li>';}
if(this.showCustomRangeLabel){list+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+'</li>';}
list+='</ul>';this.container.find('.ranges').prepend(list);}
if(typeof cb==='function'){this.callback=cb;}
if(!this.timePicker){this.startDate=this.startDate.startOf('day');this.endDate=this.endDate.endOf('day');this.container.find('.calendar-time').hide();}
if(this.timePicker&&this.autoApply)
this.autoApply=false;if((typeof options.ranges==='undefined')||this.alwaysShowCalendars){this.container.addClass('show-calendar');}
this.container.addClass('opens'+this.opens);this.container.find(".top-calendar-holder").find('.reset-button').append(this.locale.reset);this.container.find(".dates-step").find('.step-label').html(this.locale.searchDatesHeader);this.container.find(".rooms-paxs-step").find('.step-label').html(this.locale.selectGuetsStep);if(this.resName&&this.resName!=""){this.container.find(".current-selected").html(this.resName);}
this.container.find('.apply-btn').addClass(this.buttonClasses).html(this.locale.applyLabel);this.container.find('.cancel-btn').html(this.locale.reset);this.container.find('.rooms-paxs-cancel-btn').html(this.locale.cancelLabel);this.container.find('.calender-content').on('click.daterangepicker','.prev',$.proxy(this.clickPrev,this)).on('click.daterangepicker','.next',$.proxy(this.clickNext,this)).on('mousedown.daterangepicker keydown.daterangepicker','.dc.available',$.proxy(this.clickDate,this)).on('mousedown.daterangepicker','span.date-span',$.proxy(this.clickDate,this)).on('mouseenter.daterangepicker','.dc.available',$.proxy(this.hoverDate,this)).on('mouseleave.daterangepicker','.dc.available',$.proxy(this.updateFormInputs,this)).on('change.daterangepicker','select.yearselect',$.proxy(this.monthOrYearChanged,this)).on('change.daterangepicker','select.monthselect',$.proxy(this.monthOrYearChanged,this)).on('change.daterangepicker','select.hourselect,select.minuteselect,select.secondselect,select.ampmselect',$.proxy(this.timeChanged,this)).on('click.daterangepicker','.daterangepicker_input input',$.proxy(this.showCalendars,this)).on('focus.daterangepicker','.daterangepicker_input input',$.proxy(this.formInputsFocused,this)).on('blur.daterangepicker','.daterangepicker_input input',$.proxy(this.formInputsBlurred,this)).on('change.daterangepicker','.daterangepicker_input input',$.proxy(this.formInputsChanged,this)).on('click.daterangepicker','.load-calendars',$.proxy(this.loadMoreCalendars,this));this.container.find(".calendars-holder").on('click.daterangepicker','span.cancel-btn',$.proxy(this.clickReset,this))
this.container.find(".calendars-holder").on('click.daterangepicker','span.rooms-paxs-cancel-btn',$.proxy(this.clickCancel,this))
this.container.find(".calendars-holder").on('click.daterangepicker','.close-desktop-calendar',$.proxy(this.clickCancel,this))
this.container.find(".bottom-calendar-holder").on('click.daterangepicker','button.apply-btn',$.proxy(this.clickApply,this))
this.container.find(".top-calendar-holder").on('click.daterangepicker','span.reset-button',$.proxy(this.clickReset,this))
this.container.find(".top-calendar-holder").on('click.daterangepicker','div.start-date-label',$.proxy(this.changeSelectionStartDate,this))
this.container.find(".top-calendar-holder").on('click.daterangepicker','div.end-date-label',$.proxy(this.changeSelectionEndDate,this))
this.container.find(".side-content").on('click.daterangepicker','.promo-label',$.proxy(this.togglePromo,this));this.container.find(".side-content").on('click.daterangepicker','.done-edit-button',$.proxy(this.clickApply,this));this.container.find(".side-content").on('mouseenter.daterangepicker','.done-edit-button',$.proxy(this.hoverSearch,this));this.container.find('.ranges').on('click.daterangepicker','li',$.proxy(this.clickRange,this)).on('mouseenter.daterangepicker','li',$.proxy(this.hoverRange,this)).on('mouseleave.daterangepicker','li',$.proxy(this.updateFormInputs,this));if(this.element.is('input')||this.element.is('button')){this.element.on({'click.daterangepicker':$.proxy(this.show,this),'focus.daterangepicker':$.proxy(this.show,this),'keyup.daterangepicker':$.proxy(this.elementChanged,this),'keydown.daterangepicker':$.proxy(this.keydown,this)});}else{this.element.on('click.daterangepicker',$.proxy(this.toggle,this));}
this.element.parent().parent().find(".rooms-paxs-summery-holder").on('click.daterangepicker keydown.daterangepicker ','div.rooms-paxs-summery',$.proxy(this.show,this));this.element.parent().on("click.daterangepicker",'div.dates-dispaly',$.proxy(this.show,this));if(this.element.is('input')&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));$('.check-in-date',this.element.parent()).html(this.startDate.format(this.locale.format));$('.check-out-date',this.element.parent()).html(this.endDate.format(this.locale.format));this.element.trigger('change');}else if(this.element.is('input')&&this.autoUpdateInput){this.element.val(this.startDate.format(this.locale.format));this.element.trigger('change');}};DateRangePicker.prototype={constructor:DateRangePicker,setStartDate:function(startDate){if(typeof startDate==='string')
this.startDate=moment(startDate,this.locale.format);if(typeof startDate==='object')
this.startDate=moment(startDate);if(!this.timePicker)
this.startDate=this.startDate.startOf('day');if(this.timePicker&&this.timePickerIncrement)
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.minDate&&this.startDate.isBefore(this.minDate)){this.startDate=this.minDate.clone();if(this.timePicker&&this.timePickerIncrement)
this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);}
if(this.maxDate&&this.startDate.isAfter(this.maxDate)){this.startDate=this.maxDate.clone();if(this.timePicker&&this.timePickerIncrement)
this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);}
if(!this.isShowing)
this.updateElement();this.updateMonthsInView();},setEndDate:function(endDate){if(typeof endDate==='string')
this.endDate=moment(endDate,this.locale.format);if(typeof endDate==='object')
this.endDate=moment(endDate);if(!this.timePicker)
this.endDate=this.endDate.endOf('day');if(this.timePicker&&this.timePickerIncrement)
this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);if(this.endDate.isBefore(this.startDate))
this.endDate=this.startDate.clone();if(this.maxDate&&this.endDate.isAfter(this.maxDate))
this.endDate=this.maxDate.clone();if(this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate))
this.endDate=this.startDate.clone().add(this.dateLimit);this.previousRightTime=this.endDate.clone();if(!this.isShowing)
this.updateElement();this.updateElementDatesLabel(0);this.updateMonthsInView();if(this.isShowing){this.clickApply();}},isInvalidDate:function(){return{isClose:false,errorMsg:""};},getDayTitle:function(){return null;},getDayPrice:function(){return null;},isCustomDate:function(){return false;},updateView:function(){if(this.timePicker){this.renderTimePicker('left');this.renderTimePicker('right');if(!this.endDate){this.container.find('.right .calendar-time select').attr('disabled','disabled').addClass('disabled');}else{this.container.find('.right .calendar-time select').removeAttr('disabled').removeClass('disabled');}}
if(this.endDate){this.container.find('input[name="daterangepicker_end"]').removeClass('active');this.container.find('input[name="daterangepicker_start"]').addClass('active');}else{this.container.find('input[name="daterangepicker_end"]').addClass('active');this.container.find('input[name="daterangepicker_start"]').removeClass('active');}
this.updateMonthsInView();if(this.changeMonthWithAnim){var current=this;this.container.find('.calendar-tables-holder').addClass('anim-h');setTimeout(function(){current.container.find('.calendar-tables-holder').removeClass("anim-h");current.updateCalendars();},800);this.changeMonthWithAnim=false;}
else{this.updateCalendars();}
this.updateFormInputs();if(this.isMobile&&this.isShowing){var $startDateMonth=this.container.find('.start-date:not(.off-other-month)').parent().parent().parent().parent();if($startDateMonth){console.log($startDateMonth.offset().top)
$(window).scrollTop($startDateMonth.offset().top-160);}}},updateMonthsInView:function(){if(this.endDate){var lastCalendarMonth,firstMonthCalendar;if(this.CalendarsMonthArr&&this.CalendarsMonthArr.length>0){lastCalendarMonth=this.CalendarsMonthArr[this.CalendarsMonthArr.length-1].date;firstMonthCalendar=this.CalendarsMonthArr[0].date;}
if(this.FirstCalendarMonth.month&&lastCalendarMonth&&firstMonthCalendar&&(this.startDate.format('YYYY-MM')==this.FirstCalendarMonth.month.format('YYYY-MM')||this.startDate.format('YYYY-MM')==lastCalendarMonth.format('YYYY-MM'))&&(this.endDate.format('YYYY-MM')==this.FirstCalendarMonth.month.format('YYYY-MM')||this.endDate.format('YYYY-MM')==lastCalendarMonth.format('YYYY-MM'))||this.isMobile&&((this.FirstCalendarMonth.month&&lastCalendarMonth&&firstMonthCalendar&&firstMonthCalendar.format('YYYY-MM')==this.FirstCalendarMonth.month.format('YYYY-MM')))){return;}
this.FirstCalendarMonth.month=this.startDate.clone().date(2);if(!this.linkedCalendars&&(this.endDate.month()!=this.startDate.month()||this.endDate.year()!=this.startDate.year())){this.LastCalendarMonth.month=this.endDate.clone().date(2);}else{this.LastCalendarMonth.month=this.startDate.clone().date(2).add(1,'month');}}
else{if(!this.isMobile){if(this.FirstCalendarMonth.month.format('YYYY-MM')!=this.startDate.format('YYYY-MM')&&this.LastCalendarMonth.month.format('YYYY-MM')==this.startDate.format('YYYY-MM')&&(this.startDate.date()>this.startDate.daysInMonth()-10)){if(this.maxDate.format('YYYY-MM')>this.LastCalendarMonth.month.format('YYYY-MM'))
this.changeMonthWithAnim=true;this.FirstCalendarMonth.month=this.startDate.clone().date(2);}}
else
this.MonthToShow++;this.LastCalendarMonth.month=this.startDate.clone().date(2).add(1,'month');}},loadMoreCalendars:function(){var pos=$(window).scrollTop();this.MonthToShow+=this.AddMonthToShow;this.updateView();$(window).scrollTop(pos);},getMonthDiff:function(date){var months=Number(date.format("MM"));var years=Number(date.format("YYYY"));return months+(years*12);},updateCalendars:function(){this.element.trigger('rendercalendar.daterangepicker',this);this.container.find('.calendar-tables-holder').html("");this.CalendarsMonthArr=[];if(this.isMobile){if(this.startDate!=null&&this.endDate!=null&&this.DatesFromSearchRequest){this.DatesFromSearchRequest=false;var startMonths=this.getMonthDiff(new moment());var endMonths=this.getMonthDiff(this.startDate);var monthDifference=endMonths-startMonths;if(monthDifference>=1){this.MonthToShow=monthDifference+1;this.FirstCalendarMonth.month=moment();}}}
for(var i=0;i<this.MonthToShow;i++){var calendarObj={'date':this.FirstCalendarMonth.month.clone().add(i,"month")}
this.CalendarsMonthArr.push(calendarObj);this.renderCalendar(i);}
this.LastCalendarMonth.month=this.CalendarsMonthArr[this.CalendarsMonthArr.length-1].date;console.log(this.CalendarsMonthArr);this.container.find('.ranges li').removeClass('active');if(this.endDate==null){var $startDate=this.container.find('.start-date:not(.off-other-month) .date-span');$startDate.parent().parent().addClass('disable-click');var minDays=$startDate.data("min");if(minDays){var dayindex=parseInt($startDate.parent().parent().data("index"));var datanum=parseInt($startDate.parent().parent().data("num"));var dcContainer=$('.calendar[data-num='+datanum+']',this.container);var lastOffMonthDay=null;for(var i=1;i<minDays;i++,dayindex++){if($($('.dc',dcContainer)[dayindex+1]).hasClass('off-other-month')){$($('.dc:not(.off-other-month)[data-date='+$($('.dc',dcContainer)[dayindex+1]).data("date")+']')).removeClass("available").addClass("disable off in-range");lastOffMonthDay=$($('.dc:not(.off-other-month)[data-date='+$($('.dc',dcContainer)[dayindex+1]).data("date")+']')).data("index");}
else{if(lastOffMonthDay){dayindex=lastOffMonthDay;lastOffMonthDay=null
datanum++;dcContainer=$('.calendar[data-num='+datanum+']',this.container);}
$($('.dc',dcContainer)[dayindex+1]).removeClass("available").addClass("disable off in-range");}}}
this.container.find('.calender-content').removeClass("dates-selected");this.updateSummery(1);return;}
else{this.container.find('.calender-content').addClass("dates-selected");}
this.calculateChosenLabel();this.updateSummery(0);},renderCalendar:function(calendarNum){var calendar=this.CalendarsMonthArr[calendarNum];var month=calendar.date.month();var year=calendar.date.year();var hour=calendar.date.hour();var minute=calendar.date.minute();var second=calendar.date.second();var daysInMonth=moment([year,month]).daysInMonth();var firstDay=moment([year,month,1]);var lastDay=moment([year,month,daysInMonth]);var lastMonth=moment(firstDay).subtract(1,'month').month();var lastYear=moment(firstDay).subtract(1,'month').year();var daysInLastMonth=moment([lastYear,lastMonth]).daysInMonth();var dayOfWeek=firstDay.day();var calendar=[];calendar.firstDay=firstDay;calendar.lastDay=lastDay;for(var i=0;i<6;i++){calendar[i]=[];}
var startDay=daysInLastMonth-dayOfWeek+this.locale.firstDay+1;if(startDay>daysInLastMonth)
startDay-=7;if(dayOfWeek==this.locale.firstDay)
startDay=daysInLastMonth-6;var curDate=moment([lastYear,lastMonth,startDay,12,minute,second]);var col,row;for(var i=0,col=0,row=0;i<42;i++,col++,curDate=moment(curDate).add(24,'hour')){if(i>0&&col%7===0){col=0;row++;}
calendar[row][col]=curDate.clone().hour(hour).minute(minute).second(second);curDate.hour(12);if(this.minDate&&calendar[row][col].format('YYYY-MM-DD')==this.minDate.format('YYYY-MM-DD')&&calendar[row][col].isBefore(this.minDate)&&calendarNum==0){calendar[row][col]=this.minDate.clone();}
if(this.maxDate&&calendar[row][col].format('YYYY-MM-DD')==this.maxDate.format('YYYY-MM-DD')&&calendar[row][col].isAfter(this.maxDate)&&calendarNum==this.MonthToShow){calendar[row][col]=this.maxDate.clone();}}
var CalendarItem=this.CalendarsMonthArr[calendarNum];CalendarItem.calendar=calendar;this.CalendarsMonthArr[calendarNum]=CalendarItem;var minDate=calendarNum==0?this.minDate:this.startDate;var maxDate=this.maxDate;var selected=calendarNum==0?this.startDate:this.endDate;var arrow=this.locale.direction=='ltr'?{left:'chevron-left',right:'chevron-right'}:{left:'chevron-right',right:'chevron-left'};var html='<div class="top-calendar">';if(calendarNum==0){html='<div class="top-calendar cal0">';}
var dateHtml=this.locale.monthNames[calendar[1][1].month()]+calendar[1][1].format(" YYYY");if(this.showDropdowns){var currentMonth=calendar[1][1].month();var currentYear=calendar[1][1].year();var maxYear=(maxDate&&maxDate.year())||(currentYear+5);var minYear=(minDate&&minDate.year())||(currentYear-50);var inMinYear=currentYear==minYear;var inMaxYear=currentYear==maxYear;var monthHtml='<select class="monthselect">';for(var m=0;m<12;m++){if((!inMinYear||m>=minDate.month())&&(!inMaxYear||m<=maxDate.month())){monthHtml+="<option value='"+m+"'"+
(m===currentMonth?" selected='selected'":"")+
">"+this.locale.monthNames[m]+"</option>";}else{monthHtml+="<option value='"+m+"'"+
(m===currentMonth?" selected='selected'":"")+
" disabled='disabled'>"+this.locale.monthNames[m]+"</option>";}}
monthHtml+="</select>";var yearHtml='<select class="yearselect">';for(var y=minYear;y<=maxYear;y++){yearHtml+='<option value="'+y+'"'+
(y===currentYear?' selected="selected"':'')+
'>'+y+'</option>';}
yearHtml+='</select>';dateHtml=monthHtml+yearHtml;}
html+='<div  class="month" data-month="'+calendar[1][1].month()+'">'+dateHtml+'</div>';html+='</div>';var prevenable,nextenable;if((!this.linkedCalendars||calendarNum===0)){prevenable=(!minDate||minDate.isBefore(calendar.firstDay));html+='<div class="calendar-arrow"><button ar tabindex=0 aria-label="'+this.locale["PrevMonth"]+'"  class="prev arrow '+(prevenable?"available":"disable")+'"></button></div>';}
if((!this.linkedCalendars||this.MonthToShow-1===calendarNum)){nextenable=(!maxDate||maxDate.isAfter(calendar.lastDay));html+='<div class="calendar-arrow"><button tabindex=0 aria-label="'+this.locale["NextMonth"]+'" class="next arrow '+(nextenable?"available":"disable")+'"></button></div>';}
html+='<div class="div-table">';html+='<div class="div-head">';html+='<div class="div-row">';if(this.showWeekNumbers||this.showISOWeekNumbers)
html+='<div class="week dh">'+this.locale.weekLabel+'</div>';if(this.isMobile){$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+='<div class="dh">'+dayOfWeek+'</div>';if($(".days-holder .dh").length<7){$(".dh").appendTo(".days-holder");}});}else{$.each(this.locale.daysOfWeek,function(index,dayOfWeek){html+='<div class="dh">'+dayOfWeek+'</div>';});}
html+='</div>';html+='</div>';html+='<div class="div-body">';if(this.endDate==null&&this.dateLimit){var maxLimit=this.startDate.clone().add(this.dateLimit).endOf('day');if(!maxDate||maxLimit.isBefore(maxDate)){maxDate=maxLimit;}}
var dayindex=0;for(var row=0;row<6;row++){html+='<div class="div-row">';if(this.showWeekNumbers)
html+='<div class="week dc">'+calendar[row][0].week()+'</div>';else if(this.showISOWeekNumbers)
html+='<div class="week dc">'+calendar[row][0].isoWeek()+'</div>';for(var col=0;col<7;col++){var classes=[];var extratHtml="";var tooltipTitle="";if(calendar[row][col].isSame(new Date(),"day"))
classes.push('today');if(calendar[row][col].isoWeekday()>5)
classes.push('weekend');if(calendar[row][col].month()!=calendar[1][1].month())
classes.push('off-other-month','disabled');if(this.minDate&&calendar[row][col].isBefore(this.minDate,'day'))
classes.push('off','disabled');if(maxDate&&calendar[row][col].isAfter(maxDate,'day'))
classes.push('off','disabled');var InvalidObject=this.isInvalidDate(calendar[row][col]);if(InvalidObject.isClose){classes.push('off','disabled');extratHtml+='<span class="sold-out">'+InvalidObject.errorMsg+'</span>';}
if(this.startDate!=null&&calendar[row][col].format('YYYY-MM-DD')==this.startDate.format('YYYY-MM-DD')){classes.push('active','start-date');tooltipTitle+=this.locale.checkInLabel;}
if(this.endDate!=null&&calendar[row][col].format('YYYY-MM-DD')==this.endDate.format('YYYY-MM-DD')){classes.push('active','end-date');tooltipTitle+=this.locale.checkOutLabel}
if(this.startDate!=null&&this.endDate!=null&&calendar[row][col]>this.startDate&&calendar[row][col]<this.endDate)
classes.push('in-range');var isCustom=this.isCustomDate(calendar[row][col]);if(isCustom!==false){if(typeof isCustom==='string')
classes.push(isCustom);else
Array.prototype.push.apply(classes,isCustom);}
var cname='',disabled=false;for(var i=0;i<classes.length;i++){cname+=classes[i]+' ';if(classes[i]=='disabled')
disabled=true;}
if(!disabled){cname+='available';if(this.startDate!==null&&calendar[row][col].format('YYYY-MM-DD')!==this.startDate.format('YYYY-MM-DD')&&this.endDate==null){tooltipTitle+=this.locale.selectCheckOutDate}
else if((this.startDate!==null&&calendar[row][col].format('YYYY-MM-DD')!==this.startDate.format('YYYY-MM-DD'))&&(this.endDate!==null&&calendar[row][col].format('YYYY-MM-DD')!==this.endDate.format('YYYY-MM-DD'))){tooltipTitle+=this.locale.selectCheckInDate}}
var dayTitle="";if(calendar[row][col].month()===calendar[1][1].month()&&(this.minDate&&calendar[row][col].isSameOrAfter(this.minDate,'day'))){dayTitle=this.getDayTitle(calendar[row][col]);}
var tdHtml='<span class="main-date-span">'+'<span class="date-span"'+
(dayTitle&&dayTitle.minDays?'data-min="'+dayTitle.minDays+'"':"")
+(dayTitle&&dayTitle.minTitle?'data-mintitle="'+dayTitle.minTitle+'"':"")
+(dayTitle&&dayTitle.holidayTitle?'data-holiday="'+dayTitle.holidayTitle+'"':"")
+(dayTitle&&dayTitle.title!=""?dayTitle.title:"")+'">'+calendar[row][col].date()+'</span>';extratHtml+=this.getDayPrice(calendar[row][col],true);if(extratHtml)
tdHtml+=extratHtml;var tooltiphtml="title='"+tooltipTitle+"'";html+='<div tabindex="0" data-num="'+calendarNum+'" class="dc '+cname.replace(/^\s+|\s+$/g,'')+'" data-index="'+dayindex+'" data-date="'+calendar[row][col].format('YYYY-MM-DD')+'"  data-cell="'+'r'+row+'c'+col+'" '+tooltiphtml+'>'+tdHtml+'</div>';dayindex++;}
html+='</div>';}
html+='</div>';html+='</div>';html+='<div class="bottom-calendar"></div>';var calendarHtml=$("<div/>",{'class':'calendar','data-num':calendarNum}).append($("<div/>").addClass("calendar-table").html(html));this.container.find('.calendar-tables-holder').append(calendarHtml)
if(!this.isMobile){this.container.find('.available').tooltip('dispose');$('.tooltip').tooltip('dispose');this.container.find('.available').tooltip();}},renderTimePicker:function(side){if(side=='right'&&!this.endDate)return;var html,selected,minDate,maxDate=this.maxDate;if(this.dateLimit&&(!this.maxDate||this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)))
maxDate=this.startDate.clone().add(this.dateLimit);if(side=='left'){selected=this.startDate.clone();minDate=this.minDate;}else if(side=='right'){selected=this.endDate.clone();minDate=this.startDate;var timeSelector=this.container.find('.calendar.right .calendar-time div');if(timeSelector.html()!=''){selected.hour(timeSelector.find('.hourselect option:selected').val()||selected.hour());selected.minute(timeSelector.find('.minuteselect option:selected').val()||selected.minute());selected.second(timeSelector.find('.secondselect option:selected').val()||selected.second());if(!this.timePicker24Hour){var ampm=timeSelector.find('.ampmselect option:selected').val();if(ampm==='PM'&&selected.hour()<12)
selected.hour(selected.hour()+12);if(ampm==='AM'&&selected.hour()===12)
selected.hour(0);}}
if(selected.isBefore(this.startDate))
selected=this.startDate.clone();if(maxDate&&selected.isAfter(maxDate))
selected=maxDate.clone();}
html='<select class="hourselect">';var start=this.timePicker24Hour?0:1;var end=this.timePicker24Hour?23:12;for(var i=start;i<=end;i++){var i_in_24=i;if(!this.timePicker24Hour)
i_in_24=selected.hour()>=12?(i==12?12:i+12):(i==12?0:i);var time=selected.clone().hour(i_in_24);var disabled=false;if(minDate&&time.minute(59).isBefore(minDate))
disabled=true;if(maxDate&&time.minute(0).isAfter(maxDate))
disabled=true;if(i_in_24==selected.hour()&&!disabled){html+='<option value="'+i+'" selected="selected">'+i+'</option>';}else if(disabled){html+='<option value="'+i+'" disabled="disabled" class="disabled">'+i+'</option>';}else{html+='<option value="'+i+'">'+i+'</option>';}}
html+='</select> ';html+=': <select class="minuteselect">';for(var i=0;i<60;i+=this.timePickerIncrement){var padded=i<10?'0'+i:i;var time=selected.clone().minute(i);var disabled=false;if(minDate&&time.second(59).isBefore(minDate))
disabled=true;if(maxDate&&time.second(0).isAfter(maxDate))
disabled=true;if(selected.minute()==i&&!disabled){html+='<option value="'+i+'" selected="selected">'+padded+'</option>';}else if(disabled){html+='<option value="'+i+'" disabled="disabled" class="disabled">'+padded+'</option>';}else{html+='<option value="'+i+'">'+padded+'</option>';}}
html+='</select> ';if(this.timePickerSeconds){html+=': <select class="secondselect">';for(var i=0;i<60;i++){var padded=i<10?'0'+i:i;var time=selected.clone().second(i);var disabled=false;if(minDate&&time.isBefore(minDate))
disabled=true;if(maxDate&&time.isAfter(maxDate))
disabled=true;if(selected.second()==i&&!disabled){html+='<option value="'+i+'" selected="selected">'+padded+'</option>';}else if(disabled){html+='<option value="'+i+'" disabled="disabled" class="disabled">'+padded+'</option>';}else{html+='<option value="'+i+'">'+padded+'</option>';}}
html+='</select> ';}
if(!this.timePicker24Hour){html+='<select class="ampmselect">';var am_html='';var pm_html='';if(minDate&&selected.clone().hour(12).minute(0).second(0).isBefore(minDate))
am_html=' disabled="disabled" class="disabled"';if(maxDate&&selected.clone().hour(0).minute(0).second(0).isAfter(maxDate))
pm_html=' disabled="disabled" class="disabled"';if(selected.hour()>=12){html+='<option value="AM"'+am_html+'>AM</option><option value="PM" selected="selected"'+pm_html+'>PM</option>';}else{html+='<option value="AM" selected="selected"'+am_html+'>AM</option><option value="PM"'+pm_html+'>PM</option>';}
html+='</select>';}
this.container.find('.calendar.'+side+' .calendar-time div').html(html);},updateFormInputs:function(){if(this.container.find('input[name=daterangepicker_start]').is(":focus")||this.container.find('input[name=daterangepicker_end]').is(":focus"))
return;if(this.startDate)
this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.locale.format));if(this.endDate)
this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.locale.format));if((this.endDate&&this.startDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate)))){this.container.find('button.apply-btn').removeClass('hidden');}else{this.container.find('button.apply-btn').addClass('hidden');}},move:function(){var parentOffset={top:0,left:0},containerTop;var parentRightEdge=$(window).width();if(!this.parentEl.is('body')){parentOffset={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};parentRightEdge=this.parentEl[0].clientWidth+this.parentEl.offset().left;}
var isOpenUp=this.drops=='up'||this.container.offset().top+this.container.outerHeight()>$(window).height()||this.container.hasClass("dropup");if(isOpenUp)
containerTop=this.element.offset().top-this.container.outerHeight()-parentOffset.top;else
containerTop=this.element.offset().top+this.element.outerHeight()-parentOffset.top;this.container[isOpenUp?'addClass':'removeClass']('dropup');if(this.opens=='left'){this.container.css({top:containerTop,right:parentRightEdge-this.element.offset().left-this.element.outerWidth(),left:'auto'});if(this.container.offset().left<0){this.container.css({right:'auto',left:9});}}else if(this.opens=='center'){this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left+this.element.outerWidth()/2
-this.container.outerWidth()/2,right:'auto'});if(this.container.offset().left<0){this.container.css({right:'auto',left:9});}}else{this.container.css({top:containerTop,left:this.element.offset().left-parentOffset.left,right:'auto'});if(this.container.offset().left+this.container.outerWidth()>$(window).width()){this.container.css({left:'auto',right:0});}}},roomPaxClick:function(){var datepicker=this.container;if(!this.isMobile){var a=$('#booking-engine-holder').offset().top;var b=$(datepicker[0]).height();var c=$(window).height();var d=$(window).scrollTop();datepicker[0].style.setProperty("opacity","0","important");var offset=$('.rooms-paxs-summery-holder',this.element.parent().parent()).offset();var height=$('.rooms-paxs-summery-holder',this.element.parent().parent()).height();var width=$('.rooms-paxs-summery-holder',this.element.parent().parent()).width();var left=offset.left-width+"px";datepicker[0].style.setProperty("position","absolute","important");datepicker[0].style.setProperty("left",left,"important");datepicker[0].style.setProperty("opacity","1","important");if((c+d)>(a+b)){var top=offset.top-height+"px";datepicker[0].style.setProperty("top",top,"important");}
else{var space=window.innerHeight-a-$('#booking-engine-holder').height();var bottom=space+height+"px";datepicker[0].style.setProperty("bottom",bottom,"important");}}},show:function(e){console.log(e);if(e.keyCode!==13&&e.type==="keydown"){return;}
if(this.isShowing)return;if(!this.resID||this.resID==""||this.resID=="-1"||this.resID=="0"){alert(this.locale.hotelSelectError);this.element.blur();return;}
this._outsideClickProxy=$.proxy(function(e){this.outsideClick(e);},this);$(document).on('mousedown.daterangepicker',this._outsideClickProxy).on('touchend.daterangepicker',this._outsideClickProxy).on('click.daterangepicker','[data-toggle=dropdown]',this._outsideClickProxy).on('focusin.daterangepicker',this._outsideClickProxy);$(window).on('resize.daterangepicker',$.proxy(function(e){this.move(e);},this));this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.previousRightTime=this.endDate.clone();$(".done-edit-button").addClass("hidden");if(e.target.className=="rooms-paxs-summery"){$(".done-edit-button").removeClass("hidden");}
if(e.target.className=="check-out-date"){this.updateElementDatesLabel(1);}
if(e.target.className=="check-in-date"){this.updateElementDatesLabel(0);}
this.updateView();this.container.show().addClass("dropup");this.move();this.element.trigger('show.daterangepicker',this);this.isShowing=true;if($(e.target).attr("id")==this.element.attr("id")||$(e.target).parent().attr("class")==this.element.parent().attr("class")||$(e.target).parent().parent().attr("class")==this.element.parent().attr("class"))
this.container.addClass("calendars-click");else{if($(e.target).hasClass("rooms-paxs-summery")){this.container.addClass("room-paxs-click");this.roomPaxClick();}}
this.container.attr({tabIndex:'-1',role:'dialog',ariaLabelledby:"myLargeModalLabel",ariahidden:"true",ariaexpanded:"false"});this.container.length&&this.container[0].focus({preventScroll:true});var scrollValue;if(this.isMobile){scrollValue=this.container.find('.month[data-month="'+this.startDate.month()+'"]').offset().top-this.container.find('.top-calendar-holder').height();$(window).scrollTop(scrollValue);}
if(typeof window.showCalendar!="undefined"){window.showCalendar(e,this,scrollValue);}
$("body").addClass("engine-open");if(this.isMobile){var self=this;var elementScrolled=self.container.find(".calendar-tables-holder");var maxLoads=0;var loadWithScroll=false;elementScrolled.on('scroll.calendar',function(){var si=0,viewportHeight=elementScrolled.height();elementScrolled.find(' > .calendar').each(function(){si+=$(this).height();});if(parseInt(elementScrolled.scrollTop().toFixed())+parseInt(viewportHeight.toFixed())>=si&&self.container.find(".load-calendars").is(":visible")&&!elementScrolled.hasClass('loading')){elementScrolled.addClass('loading');self.container.find('#more-month-area').show();self.container.find(".load-calendars").trigger("click");self.container.find('#more-month-area').hide();elementScrolled.removeClass('loading');}});}},hide:function(e){if(!this.isShowing)return;if(!this.endDate){this.startDate=this.oldStartDate.clone();this.endDate=this.oldEndDate.clone();}
if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))
this.callback(this.startDate,this.endDate,this.chosenLabel);this.updateElement();$(document).off('.daterangepicker');$(window).off('.daterangepicker');this.container.hide().removeClass("dropup");this.element.trigger('hide.daterangepicker',this);this.isShowing=false;this.container.removeClass("room-paxs-click calendars-click");if(typeof window.hideCalendar!="undefined"){window.hideCalendar(e,this);}
$("body").removeClass("engine-open");$('.tooltip',this.container).remove();if(window.innerWidth<993){setTimeout(()=>{if($(".deal-engine").length>0){$(".deal-engine")[0].scrollIntoView(true);}else{this.element.parent().parent()[0].scrollIntoView(true);}},10);}
$(".rooms-paxs-summery").focus();},toggle:function(e){if(this.isShowing){this.hide();}else{this.show();}},outsideClick:function(e){var target=$(e.target);if(e.type=="focusin"||target.closest(this.element).length||target.closest(this.container).length||target.closest('.calendar-table').length||target.hasClass("confirm")||target.hasClass("swal2-confirm")||target.hasClass("dont-close-datepicker"))return;this.clickCancel(e);this.element.trigger('outsideClick.daterangepicker',this);},showCalendars:function(){$('.min-nights-toast').toast('dispose');this.container.addClass('show-calendar');this.move();this.element.trigger('showCalendar.daterangepicker',this);},hideCalendars:function(){this.container.removeClass('show-calendar');this.element.trigger('hideCalendar.daterangepicker',this);},hoverRange:function(e){if(this.container.find('input[name=daterangepicker_start]').is(":focus")||this.container.find('input[name=daterangepicker_end]').is(":focus"))
return;var label=e.target.getAttribute('data-range-key');if(label==this.locale.customRangeLabel){this.updateView();}else{var dates=this.ranges[label];this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.locale.format));this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.locale.format));}},clickRange:function(e){var label=e.target.getAttribute('data-range-key');this.chosenLabel=label;if(label==this.locale.customRangeLabel){this.showCalendars();}else{var dates=this.ranges[label];this.startDate=dates[0];this.endDate=dates[1];this.updateCalendars();if(this.autoApply){this.hideCalendars();this.clickApply();}}},clickPrev:function(e){if($(e.target).hasClass("available")||$(e.currentTarget).hasClass("available")){var cal=$(e.target).parents('.calendar');if(cal.data("num")===0){this.FirstCalendarMonth.month.subtract(1,'month');if(this.linkedCalendars)
this.LastCalendarMonth.month.subtract(1,'month');}else{this.LastCalendarMonth.month.subtract(1,'month');}
this.updateCalendars();}},clickNext:function(e){if($(e.target).hasClass("available")||$(e.currentTarget).hasClass("available")){var cal=$(e.target).parents('.calendar');if(cal.data("num")===0){this.FirstCalendarMonth.month.add(1,'month');}else{this.LastCalendarMonth.month.add(1,'month');if(this.linkedCalendars)
this.FirstCalendarMonth.month.add(1,'month');}
this.updateCalendars();}},hoverDate:function(e){var title,row,col,cal,date;if($(e.target).hasClass('date-span')){var currentTd=$(e.target).parent();if(!currentTd.hasClass('available')||currentTd.hasClass('disable-click'))return;title=currentTd.attr('data-cell');row=title.substr(1,1);col=title.substr(3,1);cal=currentTd.parents('.calendar');date=this.CalendarsMonthArr[cal.data("num")].calendar[row][col]}
else{if(!$(e.target).hasClass('available')||$(e.target).hasClass('disable-click'))return;title=$(e.target).attr('data-cell');row=title.substr(1,1);col=title.substr(3,1);cal=$(e.target).parents('.calendar');date=this.CalendarsMonthArr[cal.data("num")].calendar[row][col]}
if(this.endDate&&!this.container.find('input[name=daterangepicker_start]').is(":focus")){this.container.find('input[name=daterangepicker_start]').val(date.format(this.locale.format));}else if(!this.endDate&&!this.container.find('input[name=daterangepicker_end]').is(":focus")){this.container.find('input[name=daterangepicker_end]').val(date.format(this.locale.format));}
var startDate=this.startDate
var endDate=this.endDate;var CalendarMonthArr=this.CalendarsMonthArr;if(!this.endDate){this.container.find('.calendar .div-body .dc').each(function(index,el){if($(el).hasClass('week'))return;var title=$(el).attr('data-cell');var row=title.substr(1,1);var col=title.substr(3,1);var cal=$(el).parents('.calendar');var dt=CalendarMonthArr[cal.data("num")].calendar[row][col];if((dt.isAfter(startDate)&&dt.isBefore(date))||dt.isSame(date,'day')){if(dt.isAfter(startDate)&&dt.isSame(date,'day'))
{$(el).addClass('in-range-end');}
else{$(el).removeClass('in-range-end');}}else if(!$(el).hasClass("disable off")){$(el).removeClass('in-range');}});}},clickDate:function(e){var title,row,col,cal,date;console.log($(e.target).attr("class"));if(e.keyCode!==13&&e.type==="keydown"){return;}
if($(e.target).hasClass('date-span')){var currentTd=$(e.target).parent();if(!currentTd.hasClass('available')||currentTd.hasClass('disable-click'))return;title=currentTd.attr('data-cell');row=title.substr(1,1);col=title.substr(3,1);cal=currentTd.parents('.calendar');date=this.CalendarsMonthArr[cal.data("num")].calendar[row][col];}
else{if(!$(e.target).hasClass('available')||$(e.target).hasClass('disable-click'))return;title=$(e.target).attr('data-cell');row=title.substr(1,1);col=title.substr(3,1);cal=$(e.target).parents('.calendar');date=this.CalendarsMonthArr[cal.data("num")].calendar[row][col];}
if(this.endDate||date.isBefore(this.startDate,'day')){this.endDate=null;this.setStartDate(date.clone());}else{this.setEndDate(date.clone());if(this.autoApply){this.calculateChosenLabel();this.clickApply();}}
this.showToast(e,this.endDate===null);this.updateView();e.stopPropagation();},showToast:function(e,checkInDate){var toastObjMinDays={delay:5000,autohide:false};var toastObjHoliday={delay:3000,};if($(e.target).hasClass("holiday-day")){$('.holiday-toast .toast-body').html($('[data-holiday]',e.target).data("holiday"));$('.toast-body').attr('aria-label',$('[data-holiday]',e.target).data("holiday"));$('.holiday-toast').toast(toastObjHoliday);$('.holiday-toast').toast('show');$('.toast-body').attr({'role':'alert','aria-live':'assertive','aria-atomic':'true','data-autohide':'false'});}
if($('[data-min]',e.target).data("min")&&checkInDate){$('.min-nights-toast .toast-body').html($('[data-min]',e.target).data("mintitle"));$('.toast-body').attr('aria-label',$('[data-min]',e.target).data("mintitle"));$('.min-nights-toast').toast(toastObjMinDays);$('.min-nights-toast').toast('show');$('.toast-body').attr({'role':'alert','aria-live':'assertive','aria-atomic':'true','data-autohide':'false'});}},calculateChosenLabel:function(){var customRange=true;var i=0;for(var range in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[range][0])&&this.endDate.isSame(this.ranges[range][1])){customRange=false;this.chosenLabel=this.container.find('.ranges li:eq('+i+')').addClass('active').html();break;}}else{if(this.startDate.format('YYYY-MM-DD')==this.ranges[range][0].format('YYYY-MM-DD')&&this.endDate.format('YYYY-MM-DD')==this.ranges[range][1].format('YYYY-MM-DD')){customRange=false;this.chosenLabel=this.container.find('.ranges li:eq('+i+')').addClass('active').html();break;}}
i++;}
if(customRange){if(this.showCustomRangeLabel){this.chosenLabel=this.container.find('.ranges li:last').addClass('active').html();}else{this.chosenLabel=null;}
this.showCalendars();}},updateSummery:function(isStartOnly){if(this.isMobile){var dateTemplatepart1='<span class="summery-title">{label-date}</span>';var dateTemplatepart2='<span class="summery-month">{month}</span>'+
'<span class="summery-month-day">{month-day}</span>'+
'<span class="summery-year">{year}</span>'+
'<span class="summery-week-day">{week-day}'+" ,"+'</span>';var startweekLabel=this.locale.daysOfWeekfull[this.startDate.weekday()];var endweekLabel="";var endmonthLabel="";if(!isStartOnly){endweekLabel=this.locale.daysOfWeekfull[this.endDate.weekday()];endmonthLabel=this.locale.monthNames[this.endDate.month()];this.container.find('.summery-date.check-out .part1').html(dateTemplatepart1.replace("{label-date}",this.locale.checkOutLabel));}
var startmonthLabel=this.locale.monthNames[this.startDate.month()];this.container.find('.summery-date.check-in .part1').html(dateTemplatepart1.replace("{label-date}",this.locale.checkInLabel));this.container.find('.summery-date.check-in .part2').html(dateTemplatepart2.replace("{week-day}",startweekLabel).replace("{month}",startmonthLabel).replace("{year}",this.startDate.format("YYYY")).replace("{month-day}",this.startDate.format("DD")));if(!isStartOnly){this.container.find('.summery-date.check-out .part2').html(dateTemplatepart2.replace("{week-day}",endweekLabel).replace("{month}",endmonthLabel).replace("{year}",this.startDate.format("YYYY")).replace("{month-day}",this.endDate.format("DD")));this.container.find('.summery-date.check-out .part2').removeClass("invisible");}
else{this.container.find('.summery-date.check-out .part2').addClass("invisible");}
var NightsText=this.locale.nights.split('|');var TotalNightsText="";var TotalNightsSingleText="";if(NightsText.length>0){TotalNightsText=NightsText[0].replace("'","\"");TotalNightsSingleText=NightsText[1].replace("'","\"");}
var nights=Math.abs(this.startDate.diff(this.endDate,"days"));var text=nights>1?TotalNightsText.replace("{0}",nights)+" :":TotalNightsSingleText+" :";this.container.find('.summery-nights').html(text);}
else{if(!isStartOnly){$('.check-out-date',this.element.parent()).html(this.endDate.format(this.locale.format));$('.check-out-date',this.element.parent()).removeClass("invisible");}
else{$('.check-in-date',this.element.parent()).html(this.startDate.format(this.locale.format));$('.check-out-date',this.element.parent()).addClass("invisible");}}},clickApply:function(e){this.hide();this.element.trigger('apply.daterangepicker',this);},clickCancel:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.container.find(".start-date-label").find('.date-value').html(this.startDate.format(this.locale.datesLabelFormat));this.container.find(".end-date-label").find('.date-value').html(this.endDate.format(this.locale.datesLabelFormat));$('.check-out-date',this.element.parent()).html(this.startDate.format(this.locale.format)).removeClass("invisible");this.hide();this.element.trigger('cancel.daterangepicker',this);},clickReset:function(e){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.updateView();this.container.find(".start-date-label").find('.date-value').html(this.startDate.format(this.locale.datesLabelFormat));this.container.find(".end-date-label").find('.date-value').html(this.endDate.format(this.locale.datesLabelFormat));},togglePromo:function(e){$(e.target).next().slideToggle();},triggerSearch:function(e){$(".search-button",this.element.parent().parent()).trigger("mouseenter");$(".search-button",this.element.parent().parent()).trigger("click");},hoverSearch:function(e){$(".search-button",this.element.parent().parent()).trigger("mouseenter");$(".search-button",this.element.parent().parent()).trigger("hover");},monthOrYearChanged:function(e){var isLeft=$(e.target).closest('.calendar').hasClass('left'),leftOrRight=isLeft?'left':'right',cal=this.container.find('.calendar.'+leftOrRight);var month=parseInt(cal.find('.monthselect').val(),10);var year=cal.find('.yearselect').val();if(!isLeft){if(year<this.startDate.year()||(year==this.startDate.year()&&month<this.startDate.month())){month=this.startDate.month();year=this.startDate.year();}}
if(this.minDate){if(year<this.minDate.year()||(year==this.minDate.year()&&month<this.minDate.month())){month=this.minDate.month();year=this.minDate.year();}}
if(this.maxDate){if(year>this.maxDate.year()||(year==this.maxDate.year()&&month>this.maxDate.month())){month=this.maxDate.month();year=this.maxDate.year();}}
if(isLeft){this.leftCalendar.month.month(month).year(year);if(this.linkedCalendars)
this.rightCalendar.month=this.leftCalendar.month.clone().add(1,'month');}else{this.rightCalendar.month.month(month).year(year);if(this.linkedCalendars)
this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,'month');}
this.updateCalendars();},timeChanged:function(e){var cal=$(e.target).closest('.calendar'),isLeft=cal.hasClass('left');var hour=parseInt(cal.find('.hourselect').val(),10);var minute=parseInt(cal.find('.minuteselect').val(),10);var second=this.timePickerSeconds?parseInt(cal.find('.secondselect').val(),10):0;if(!this.timePicker24Hour){var ampm=cal.find('.ampmselect').val();if(ampm==='PM'&&hour<12)
hour+=12;if(ampm==='AM'&&hour===12)
hour=0;}
if(isLeft){var start=this.startDate.clone();start.hour(hour);start.minute(minute);start.second(second);this.setStartDate(start);if(this.endDate&&this.endDate.format('YYYY-MM-DD')==start.format('YYYY-MM-DD')&&this.endDate.isBefore(start)){this.setEndDate(start.clone());}}else if(this.endDate){var end=this.endDate.clone();end.hour(hour);end.minute(minute);end.second(second);this.setEndDate(end);}
this.updateCalendars();this.updateFormInputs();this.renderTimePicker('left');this.renderTimePicker('right');},formInputsChanged:function(e){var isRight=$(e.target).closest('.calendar').hasClass('right');var start=moment(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format);var end=moment(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);if(start.isValid()&&end.isValid()){if(isRight&&end.isBefore(start))
start=end.clone();this.setStartDate(start);this.setEndDate(end);if(isRight){this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format));}else{this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format));}}
this.updateView();},formInputsFocused:function(e){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass('active');$(e.target).addClass('active');var isRight=$(e.target).closest('.calendar').hasClass('right');if(isRight){this.endDate=null;this.setStartDate(this.startDate.clone());this.updateView();}},formInputsBlurred:function(e){if(!this.endDate){var val=this.container.find('input[name="daterangepicker_end"]').val();var end=moment(val,this.locale.format);if(end.isValid()){this.setEndDate(end);this.updateView();}}},elementChanged:function(){if(!this.element.is('input'))return;if(!this.element.val().length)return;if(this.element.val().length<this.locale.format.length)return;var dateString=this.element.val().split(this.locale.separator),start=null,end=null;if(dateString.length===2){start=moment(dateString[0],this.locale.format);end=moment(dateString[1],this.locale.format);}
if(start===null||end===null){start=moment(this.element.val(),this.locale.format);end=start;}
if(!start.isValid()||!end.isValid())return;this.setStartDate(start);this.setEndDate(end);this.updateView();},keydown:function(e){if((e.keyCode===9)||(e.keyCode===13)){this.hide();}},updateElement:function(){if(this.element.is('input')&&this.autoUpdateInput&&this.startDate&&this.endDate){var price="";this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));$('.check-in-date',this.element.parent()).html(this.startDate.format(this.locale.format));$('.check-out-date',this.element.parent()).html(this.endDate.format(this.locale.format));this.element.trigger('change');}},updateElementDatesLabel:function(isEndDateMode){this.startDate.locale(moment.locale());if(this.isMobile){if(this.datesLabelCount==1){this.container.find(".start-date-label").addClass("active").find('.date-value').html(this.locale.selectCheckInDate);this.container.find(".summery-date.check-in .part1").addClass("active").find('.date-value').html(this.locale.selectCheckInDate);this.container.find(".end-date-label").find('.date-value').html(this.locale.checkOutLabel);this.datesLabelCount++;}
else{if(this.endDate==null||isEndDateMode){this.container.find(".start-date-label").removeClass("active").addClass("selected").find('.date-value').html(this.startDate.format(this.locale.datesLabelFormat));this.container.find(".summery-date.check-in .part1").removeClass("active").addClass("selected").find('.date-value').html(this.locale.selectCheckInDate);this.container.find(".end-date-label").addClass("active").removeClass("selected").find('.date-value').html(this.locale.selectCheckOutDate);this.container.find(".summery-date.check-out .part1").addClass("active").removeClass("selected").find('.date-value').html(this.locale.selectCheckOutDate);this.changeSelectionEndDate();}
else if(this.container.find(".end-date-label").hasClass("active")){this.container.find(".end-date-label").removeClass("active").addClass("selected").find('.date-value').html(this.endDate.format(this.locale.datesLabelFormat));this.container.find(".summery-date.check-out .part1").removeClass("active").addClass("selected").find('.date-value').html(this.endDate.format(this.locale.datesLabelFormat));this.container.find(".summery-date.check-in .part1").addClass("active").removeClass("selected").find('.date-value').html(this.locale.selectCheckOutDate);}}}
else{if(this.startDate!=null&&this.endDate!=null&&!isEndDateMode){this.container.find(".start-date-label").addClass("active").find('.date-value').html(this.startDate.format(this.locale.datesLabelFormat));this.container.find(".summery-date.check-in .part1").addClass("active").find('.date-value').html(this.locale.selectCheckInDate);this.container.find(".end-date-label").removeClass("active").find('.date-value').html(this.endDate.format(this.locale.datesLabelFormat));this.container.find(".summery-date.check-out .part1").removeClass("active").find('.date-value').html(this.endDate.format(this.locale.datesLabelFormat));}
else if(this.endDate==null||isEndDateMode){this.container.find(".start-date-label").removeClass("active").addClass("selected").find('.date-value').html(this.startDate.format(this.locale.datesLabelFormat));this.container.find(".summery-date.check-in .part1").removeClass("active").addClass("selected").find('.date-value').html(this.startDate.format(this.locale.datesLabelFormat));this.container.find(".end-date-label").addClass("active").removeClass("selected").find('.date-value').html("");this.container.find(".summery-date.check-out .part1").addClass("active").removeClass("selected").find('.date-value').html("");this.changeSelectionEndDate();}}},remove:function(){this.element.parent().parent().find(".rooms-paxs-summery-holder").off('click.daterangepicker keydown.daterangepicker','div.rooms-paxs-summery');this.element.parent().off("click.daterangepicker keydown.daterangepicker",'div.dates-dispaly');this.container.remove();this.element.off('.daterangepicker');this.element.removeData();},initRoomsAndPaxs:function(self,SearchRequest){$('.min-nights-toast').hide();var parsePaxString=function(paxStr){if(typeof paxStr==='string'){var paxArr=paxStr.split(':');return{Max:paxArr[0],Default:paxArr.length>1?paxArr[1]:paxArr[0]}}
return{};}
var getResortPax=function(resortID){if(resortID&&self.SearchEngineSettings.EngineSetting.DefaultPaxPerHotel&&self.SearchEngineSettings.EngineSetting.DefaultPaxPerHotel.length){return self.SearchEngineSettings.EngineSetting.DefaultPaxPerHotel.find(p=>p.ResortID===resortID);}
return null;}
var getDefaultPax=function(resortID){var resortPax=getResortPax(resortID);if(resortPax){return{Adults:parsePaxString(resortPax.AdultSelect).Default,Children:parsePaxString(resortPax.ChildrenSelect).Default,Infants:parsePaxString(resortPax.InfantsSelect).Default}}
return{Adults:parsePaxString(self.SearchEngineSettings.EngineSetting.AdultSelect).Default,Children:parsePaxString(self.SearchEngineSettings.EngineSetting.ChildrenSelect).Default,Infants:parsePaxString(self.SearchEngineSettings.EngineSetting.InfantsSelect).Default};}
var getMaxPax=function(resortID){if(self.SearchEngineSettings.EngineSetting.DisablePaxs===false){var resortPax=getResortPax(resortID);if(resortPax){return{Adults:parsePaxString(resortPax.AdultSelect).Max,Children:parsePaxString(resortPax.ChildrenSelect).Max,Infants:parsePaxString(resortPax.InfantsSelect).Max,AdultLabel:resortPax.AdultLabel,ChildrenLabel:resortPax.ChildrenLabel,InfantsLabel:resortPax.InfantsLabel}}
return{Adults:parsePaxString(self.SearchEngineSettings.EngineSetting.AdultSelect).Max,Children:parsePaxString(self.SearchEngineSettings.EngineSetting.ChildrenSelect).Max,Infants:parsePaxString(self.SearchEngineSettings.EngineSetting.InfantsSelect).Max};}
else{return{Adults:50,Children:50,Infants:50};}}
var getPaxLabels=function(resortPax){var getLabel=function(key,engineTranslations){var label=null;if(resortPax&&resortPax.Labels){label=resortPax.Labels[self.QueryParams.Lang]&&resortPax.Labels[self.QueryParams.Lang][key];if(!label){label=resortPax.Labels['all']&&resortPax.Labels['all'][key];}}
if(!label){label=engineTranslations[key];}
return label;}
return{Adults:getLabel('Adults',self.SearchEngineSettings.Translations),AdultToolTip:getLabel('AdultToolTip',self.SearchEngineSettings.Translations),Children:getLabel('Children',self.SearchEngineSettings.Translations),ChildrenToolTip:getLabel('ChildrenToolTip',self.SearchEngineSettings.Translations),Infants:getLabel('Infants',self.SearchEngineSettings.Translations),InfantsToolTip:getLabel('InfantsToolTip',self.SearchEngineSettings.Translations)};}
self.RoomPaxObject=new Object;var __resortID=typeof self.resID==='string'?self.resID.split('_')[0]:null;self.RoomPaxObject.Pax=getMaxPax(__resortID);self.RoomPaxObject.DefaultPax=getDefaultPax(__resortID);self.RoomPaxObject.Labels=getPaxLabels(getResortPax(__resortID));const hideChildren=parseInt(self.RoomPaxObject.Pax.Children)===0;const hideInfants=parseInt(self.RoomPaxObject.Pax.Infants)===0;var current=this;this.container.find('.add-room').click(function(){var roomsNumber=parseInt(current.container.find('.popup-room-pax-container').data("rooms"));roomsNumber++;current.container.find('.popup-room-pax-container').data("rooms",roomsNumber);if(self.SearchEngineSettings.EngineSetting.RoomSelectMax==roomsNumber)
$(".add-room-container").hide();current.addRoomAndPax(self,null);current.updateRoomSummery(self);current.collapsAllRoomsExceptCurrent(roomsNumber);current.updateRoomSummeryTitle(self,roomsNumber-1);});if(!SearchRequest){this.addRoomAndPax(self,null);if(self.SearchEngineSettings.EngineSetting.RoomSelectMax==1)
this.container.find('.add-room-container').hide();}
else{var roomsNumber=parseInt(this.container.find('.popup-room-pax-container').data("rooms"));for(var i=0;i<SearchRequest.rooms;i++,roomsNumber++){this.container.find('.popup-room-pax-container').data("rooms",roomsNumber);var pax={Adults:SearchRequest.Adults[i],Children:SearchRequest.Children[i],Infants:SearchRequest.Infants[i]};this.addRoomAndPax(self,pax);this.updateRoomSummeryTitle(self,roomsNumber);}
this.collapsAllRoomsExceptCurrent(1);if(self.SearchEngineSettings.EngineSetting.RoomSelectMax==SearchRequest.rooms)
this.container.find('.add-room-container').hide();}
this.updateRoomSummery(self);this.container.find('.popup-room-pax-container').on('click','.remove-room-panel',function(){current.container.find("#roomPax"+parseInt($(this).data("room")),self).remove();current.container.find('.add-room-container').show();var roomsNumber=parseInt(current.container.find('.popup-room-pax-container').data("rooms"));roomsNumber--;current.container.find('.popup-room-pax-container').data("rooms",roomsNumber);var num=1;current.container.find('.popup-room-pax-holder').each(function(){$(this).attr("id","roomPax"+num);$('.adults-row',$(this)).find(".count").attr("class",'').addClass("count ad"+num).data("num",num);if(!hideChildren)
$('.children-row',$(this)).find(".count").attr("class",'').addClass("count ch"+num).data("num",num);if(!hideInfants)
$('.infants-row',$(this)).find(".count").attr("class",'').addClass("count inf"+num).data("num",num);if(num>1&&$('.remove-room-panel',$(this)).length>0){$('.remove-room-panel',$(this)).data("room",num);}
$('.popup-room-pax-title',$(this)).data("roomnum",num).attr("id","roomPaxTitleRow"+num);$('.room-title',$('#roomPaxTitleRow'+num)).html(self.SearchEngineSettings.Translations["OneRoom"]+"<span class='room-number'>"+" # "+num+'</span>');$('.room-pax-holder-row',$(this)).attr("id","roomPaxHolderRow"+num);num++;});if(roomsNumber===1&&$(".popup-room-pax-container #roomPax1 button").hasClass("remove-room-panel")){$(".popup-room-pax-container #roomPax1 button").remove(".remove-room-panel");if($('.adults-row',current.container).find(".count").text()==='0'){$('.adults-row',current.container).find(".count").text(self.RoomPaxObject.DefaultPax.Adults);if(!hideChildren)
$('.children-row',current.container).find(".count").text(self.RoomPaxObject.DefaultPax.Children);if(!hideInfants)
$('.infants-row',current.container).find(".count").text(self.RoomPaxObject.DefaultPax.Infants);current.updatePaxSelection(self,"ad",parseInt(self.RoomPaxObject.DefaultPax.Adults),1);}}
current.updateRoomSummery(self);if(roomsNumber>1){$("#roomPax"+roomsNumber).hide();}
$("#roomPax"+roomsNumber).show();});this.container.find('.popup-room-pax-container').on('click','.action-button',function(){if($(this).hasClass("disable")){return false;}
var type=$(this).data("type");var value=0;if($(this).hasClass("minus")){value=parseInt($(this).siblings('.count').text());if(value>0){value--;}
while(!current.checkIfPaxTypeExsist(self,type,value)&&value>0){value--;}
current.updatePaxSelection(self,type,value,$(this).siblings('.count').data("num"))}
else{value=parseInt($(this).siblings('.count').text());if(value>=0){value++;}
while(!current.checkIfPaxTypeExsist(self,type,value)&&value>=0){value++;}
current.updatePaxSelection(self,type,value,$(this).siblings('.count').data("num"))}
current.updateRoomSummery(self);});},checkIfPaxTypeExsist:function(self,paxtype,value){if(self.datesData.paxCombintaion&&self.datesData.paxCombintaion.length>0){switch(paxtype){case "ad":for(var k=0;k<self.datesData.paxCombintaion.length;k++){if(self.datesData.paxCombintaion[k].Adults==value){return true;}}
return false;case "ch":for(var k=0;k<self.datesData.paxCombintaion.length;k++){if(self.datesData.paxCombintaion[k].Children==value){return true;}}
return false;case "inf":for(var k=0;k<self.datesData.paxCombintaion.length;k++){if(self.datesData.paxCombintaion[k].Infants==value){return true;}}
return false;}}
else{return true;}},addRoomAndPax:function(self,pax){var roomsNumber=parseInt(this.container.find('.popup-room-pax-container').data("rooms"));if(roomsNumber>self.SearchEngineSettings.EngineSetting.RoomSelectMax){return false;}
var Pax=null;if(typeof pax!="undefined"&&pax){Pax=pax;}
else{Pax=new Object;Pax.Adults=self.RoomPaxObject.DefaultPax.Adults;Pax.Children=self.RoomPaxObject.DefaultPax.Children;Pax.Infants=self.RoomPaxObject.DefaultPax.Infants;}
var newRow=$("<div/>",{"class":"popup-room-pax-holder","id":"roomPax"+roomsNumber});newRow.append($("<div/>",{"class":"popup-room-pax-title","id":"roomPaxTitleRow"+roomsNumber,"data-roomnum":roomsNumber,"html":"<span tabindex=0 class='room-title'>"+self.SearchEngineSettings.Translations["OneRoom"]+"<br>"+"<span class='room-number'>"+" # "+roomsNumber+"</span><span class='room-pax-summery'></span>"}));var paxRowHolder=$("<div/>",{"class":"room-pax-holder-row","id":"roomPaxHolderRow"+roomsNumber,});const hideChildren=parseInt(self.RoomPaxObject.Pax.Children)===0;const hideInfants=parseInt(self.RoomPaxObject.Pax.Infants)===0;var AdultsTitle=$("<div/>").addClass('room-pax-header').attr('tabindex','0').append(self.RoomPaxObject.Labels["Adults"]+'<span class="room-pax-tooltip">'+self.RoomPaxObject.Labels["AdultToolTip"]+'</span>');var AdultsAction=$("<div/>").addClass('room-pax-action').append('<button d data-min="0" data-type="ad" aria-label="'+self.SearchEngineSettings.Translations["removeAdults"]+'" class="action-button minus"></button><span tabindex=0 class="count ad'+roomsNumber+'" data-num="'+roomsNumber+'">'+Pax.Adults+'</span><button class="action-button plus" aria-label="'+self.SearchEngineSettings.Translations["addAdults"]+'" tabindex=0  data-max="'+self.RoomPaxObject.Pax.Adults+'" data-type="ad"></button>');paxRowHolder.append($("<div/>").addClass('popup-room-pax-row adults-row').append(AdultsTitle).append(AdultsAction));if(!hideChildren){var childrenTitle=$("<div/>").addClass('room-pax-header').attr('tabindex','0').append(self.RoomPaxObject.Labels["Children"]+'<span class="room-pax-tooltip">'+self.RoomPaxObject.Labels["ChildrenToolTip"]+'</span>');var childrenAction=$("<div/>").addClass('room-pax-action').append('<button tabindex=0 data-min="0" data-type="ch" aria-label="'+self.SearchEngineSettings.Translations["removeChildren"]+'" class="action-button minus"></button><span tabindex=0 class="count ch'+roomsNumber+'" data-num="'+roomsNumber+'">'+Pax.Children+'</span><button class="action-button plus" aria-label="'+self.SearchEngineSettings.Translations["addChildren"]+'" data-max="'+self.RoomPaxObject.Pax.Children+'" data-type="ch"></button>');paxRowHolder.append($("<div/>").addClass('popup-room-pax-row children-row').append(childrenTitle).append(childrenAction));}
if(!hideInfants){var InfantsTitle=$("<div/>").addClass('room-pax-header').attr('tabindex','0').append(self.RoomPaxObject.Labels["Infants"]+'<span class="room-pax-tooltip">'+self.RoomPaxObject.Labels["InfantsToolTip"]+'</span>');var InfantsAction=$("<div/>").addClass('room-pax-action').append('<button data-min="0" data-type="inf" aria-label="'+self.SearchEngineSettings.Translations["removeInfants"]+'" class="action-button minus"></button><span tabindex=0 class="count inf'+roomsNumber+'" data-num="'+roomsNumber+'">'+Pax.Infants+'</span><button aria-label="'+self.SearchEngineSettings.Translations["addInfants"]+'" class="action-button plus" data-max="'+self.RoomPaxObject.Pax.Infants+'" data-type="inf"></button>');paxRowHolder.append($("<div/>").addClass('popup-room-pax-row infants-row').append(InfantsTitle).append(InfantsAction));}
if(roomsNumber>1){if(!$(".popup-room-pax-container #roomPax1 button").hasClass("remove-room-panel")){$(".popup-room-pax-container #roomPax1").append($("<button/>").addClass('remove-room-panel').text(self.SearchEngineSettings.Translations["RemoveOneRoom"]).attr("data-room",1).attr("aria-label",self.SearchEngineSettings.Translations["RemoveOneRoomSP"]));}
paxRowHolder.append($("<button/>").addClass('remove-room-panel').text(self.SearchEngineSettings.Translations["RemoveOneRoom"]).attr("data-room",roomsNumber).attr("aria-label",self.SearchEngineSettings.Translations["RemoveOneRoomSP"]));}
newRow.append(paxRowHolder);this.container.find('.popup-room-pax-container').append(newRow);if(self.SearchEngineSettings.EngineSetting.EnableAutoPaxUpdate){this.updatePaxSelection(self,"ad",parseInt(Pax.Adults),roomsNumber);}},updatePaxSelection:function(self,paxtype,value,number){if(self.datesData.paxCombintaion&&self.datesData.paxCombintaion.length>0){switch(paxtype){case "ad":var maxAd=0;var minAd=10;var maxChWithInfVal=0;var minCh=10;var maxInfWithChVal=0;var minInf=10;var currentCh=parseInt(this.container.find('.ch'+number).text());var currentInf=parseInt(this.container.find('.inf'+number).text());for(var k=0;k<self.datesData.paxCombintaion.length;k++){if(self.datesData.paxCombintaion[k].Adults==value){if(self.datesData.paxCombintaion[k].Children>maxChWithInfVal&&self.datesData.paxCombintaion[k].Infants==currentInf)
maxChWithInfVal=self.datesData.paxCombintaion[k].Children;if(self.datesData.paxCombintaion[k].Children<minCh)
minCh=self.datesData.paxCombintaion[k].Children;if(self.datesData.paxCombintaion[k].Infants>maxInfWithChVal&&self.datesData.paxCombintaion[k].Children==currentCh)
maxInfWithChVal=self.datesData.paxCombintaion[k].Infants;if(self.datesData.paxCombintaion[k].Infants<minInf)
minInf=self.datesData.paxCombintaion[k].Infants;}
if(self.datesData.paxCombintaion[k].Adults>maxAd)
maxAd=self.datesData.paxCombintaion[k].Adults;if(self.datesData.paxCombintaion[k].Adults<minAd)
minAd=self.datesData.paxCombintaion[k].Adults;if(number==1&&minAd==0)
minAd=1;}
var chVal=parseInt(this.container.find('.ch'+number).text());if(minCh>chVal)
chVal=minCh;else if(chVal>maxChWithInfVal)
chVal=maxChWithInfVal;var infVal=parseInt(this.container.find('.inf'+number).text());if(minInf>infVal)
infVal=minInf;else if(infVal>maxInfWithChVal)
infVal=maxInfWithChVal;this.updatePaxValues("ad",number,minAd,maxAd,value);this.updatePaxValues("ch",number,minCh,maxChWithInfVal,chVal);this.updatePaxValues("inf",number,minInf,maxInfWithChVal,infVal);break;case "ch":var maxAd=0;var minAd=10;var maxInf=0;var minInf=10;var currentAd=parseInt(this.container.find('.ad'+number).text());for(var k=0;k<self.datesData.paxCombintaion.length;k++){if(self.datesData.paxCombintaion[k].Children==value){if(self.datesData.paxCombintaion[k].Adults>maxAd&&self.datesData.paxCombintaion[k].Adults>=currentAd)
maxAd=self.datesData.paxCombintaion[k].Adults;if(self.datesData.paxCombintaion[k].Adults<minAd)
minAd=self.datesData.paxCombintaion[k].Adults;if(self.datesData.paxCombintaion[k].Infants>maxInf&&self.datesData.paxCombintaion[k].Adults>=currentAd)
maxInf=self.datesData.paxCombintaion[k].Infants;if(self.datesData.paxCombintaion[k].Infants<minInf)
minInf=self.datesData.paxCombintaion[k].Infants;}}
if(number==1&&minAd==0)
minAd=1;this.updatePaxValues("ad",number,minAd,maxAd,parseInt(this.container.find('.ad'+number).text()));this.updatePaxValues("ch",number,this.container.find('.ch'+number).prev().data("min"),this.container.find('.ch'+number).next().data("max"),value);this.updatePaxValues("inf",number,minInf,maxInf,parseInt(this.container.find('.inf'+number).text()));break;case "inf":var maxAd=0;var minAd=10;var maxCh=0;var minCh=10;var currentAd=parseInt(this.container.find('.ad'+number).text());for(var k=0;k<self.datesData.paxCombintaion.length;k++){if(self.datesData.paxCombintaion[k].Infants==value){if(self.datesData.paxCombintaion[k].Adults>maxAd&&self.datesData.paxCombintaion[k].Adults>=currentAd)
maxAd=self.datesData.paxCombintaion[k].Adults;if(self.datesData.paxCombintaion[k].Adults<minAd)
minAd=self.datesData.paxCombintaion[k].Adults;if(self.datesData.paxCombintaion[k].Children>maxCh&&self.datesData.paxCombintaion[k].Adults>=currentAd)
maxCh=self.datesData.paxCombintaion[k].Children;if(self.datesData.paxCombintaion[k].Children<minCh)
minCh=self.datesData.paxCombintaion[k].Children;}}
if(number==1&&minAd==0)
minAd=1;this.updatePaxValues("ad",number,minAd,maxAd,parseInt(this.container.find('.ad'+number).text()));this.updatePaxValues("ch",number,minCh,maxCh,parseInt(this.container.find('.ch'+number).text()));this.updatePaxValues("inf",number,this.container.find('.inf'+number).prev().data("min"),this.container.find('.inf'+number).next().data("max"),value);break;}}
else{switch(paxtype){case "ad":this.updatePaxValues("ad",number,(number==1?1:0),self.RoomPaxObject.Pax.Adults,value);this.updatePaxValues("ch",number,0,self.RoomPaxObject.Pax.Children,parseInt(this.container.find('.ch'+number).text()));this.updatePaxValues("inf",number,0,self.RoomPaxObject.Pax.Infants,parseInt(this.container.find('.inf'+number).text()));break;case "ch":this.updatePaxValues("ch",number,0,self.RoomPaxObject.Pax.Children,value);break;case "inf":this.updatePaxValues("inf",number,0,self.RoomPaxObject.Pax.Infants,value);break;}}},updatePaxValues:function(id,number,minVal,maxVal,currentVal){var currentInput=this.container.find('.'+id+number);$(currentInput).prev().data("min",minVal);if(currentVal==minVal)
$(currentInput).prev().addClass("disable");else{if($(currentInput).prev().hasClass("disable"))
$(currentInput).prev().removeClass("disable");}
$(currentInput).next().data("max",maxVal);if(currentVal==maxVal)
$(currentInput).next().addClass("disable");else{if($(currentInput).next().hasClass("disable"))
$(currentInput).next().removeClass("disable");}
$(currentInput).text(currentVal);},updateRoomSummery:function(self){var roomsNumber=parseInt(this.container.find('.popup-room-pax-container').data("rooms"));var roomPanelText="";if(self.QueryParams.Lang=='heb'){roomPanelText=roomsNumber==1?self.SearchEngineSettings.Translations["OneRoom"]+" "+roomsNumber:roomsNumber+" "+self.SearchEngineSettings.Translations["Rooms"];}else{roomPanelText=roomsNumber==1?roomsNumber+" "+self.SearchEngineSettings.Translations["OneRoom"]:roomsNumber+" "+self.SearchEngineSettings.Translations["Rooms"];}
var roomPaxText;if(self.SearchEngineSettings.EngineSetting.UsePanelRoomSummeryAsGuests){var guestsSum=0;for(var i=1;i<=roomsNumber;i++){var roomRow=this.container.find("#roomPax"+i);guestsSum+=(parseInt($('.ad'+i,$(roomRow)).text()));if($('.ch'+i,$(roomRow)).length>0)
guestsSum+=parseInt($('.ch'+i,$(roomRow)).text());if($('.inf'+i,$(roomRow)).length>0)
guestsSum+=parseInt($('.inf'+i,$(roomRow)).text());}
roomPaxText=self.SearchEngineSettings.Translations["panelGuests"].replace("{0}","<span class='guests-number'>"+guestsSum+"</span>");}
else{var adultsSum=0;var childrenSum=0;var infantsSum=0;for(var i=1;i<=roomsNumber;i++){var roomRow=this.container.find("#roomPax"+i);adultsSum+=parseInt($('.ad'+i,roomRow).text());if($('.ch'+i,$(roomRow)).length>0)
childrenSum+=parseInt($('.ch'+i,$(roomRow)).text());if($('.inf'+i,$(roomRow)).length>0)
infantsSum+=parseInt($('.inf'+i,$(roomRow)).text());}
if(self.QueryParams.Lang=='heb'){roomPaxText=adultsSum==1?self.SearchEngineSettings.Translations["Adult"]+" "+adultsSum:adultsSum+" "+self.SearchEngineSettings.Translations["Adults"];}else{roomPaxText=adultsSum==1?adultsSum+" "+self.SearchEngineSettings.Translations["Adult"]:adultsSum+" "+self.SearchEngineSettings.Translations["Adults"];}
if(childrenSum>0){if(self.QueryParams.Lang=='heb'){if(childrenSum==1){roomPaxText+=", "+self.SearchEngineSettings.Translations["Child"]+" "+childrenSum;}else{roomPaxText+=", "+childrenSum+" "+self.SearchEngineSettings.Translations["Children"];}}else{if(childrenSum==1){roomPaxText+=", "+childrenSum+" "+self.SearchEngineSettings.Translations["Child"];}else{roomPaxText+=", "+childrenSum+" "+self.SearchEngineSettings.Translations["Children"];}}}
if(infantsSum>0){if(self.QueryParams.Lang=='heb'){if(infantsSum==1){roomPaxText+=", "+self.SearchEngineSettings.Translations["Infant"]+" "+infantsSum;}else{roomPaxText+=", "+infantsSum+" "+self.SearchEngineSettings.Translations["Infants"];}}else{if(infantsSum==1){roomPaxText+=", "+infantsSum+" "+self.SearchEngineSettings.Translations["Infant"];}else{roomPaxText+=", "+infantsSum+" "+self.SearchEngineSettings.Translations["Infants"];}}}}
$('.rooms-paxs-summery',self.$element).html(roomPaxText+"<br>"+roomPanelText)},getRoomsAndPaxs:function(){var roomsNumber=parseInt(this.container.find('.popup-room-pax-container').data("rooms"));var roomsArray=new Array();for(var i=1;i<=roomsNumber;i++){var adults=parseInt(this.container.find(".ad"+i).text());var children=this.container.find(".ch"+i).length>0?parseInt(this.container.find(".ch"+i).text()):0;var infants=this.container.find(".inf"+i).length>0?parseInt(this.container.find(".inf"+i).text()):0;if(isNaN(adults))
return null;var pax={Adults:adults,Children:children,Infants:infants}
var room={Number:i,Pax:pax};roomsArray.push(room);}
return roomsArray;},collapsAllRoomsExceptCurrent:function(roomnumber){$('.room-pax-holder-row').not('#roomPaxHolderRow'+roomnumber).hide();$('.popup-room-pax-title').not('#roomPaxTitleRow'+roomnumber).show();},updateRoomSummeryTitle:function(self,roomnumber){var roomPaxText;var adultsSum=0;var childrenSum=0;var infantsSum=0;var roomRow=this.container.find("#roomPax"+roomnumber);adultsSum+=parseInt($('.ad'+roomnumber,roomRow).text());if($('.ch'+roomnumber,$(roomRow)).length>0)
childrenSum+=parseInt($('.ch'+roomnumber,$(roomRow)).text());if($('.inf'+roomnumber,$(roomRow)).length>0)
infantsSum+=parseInt($('.inf'+roomnumber,$(roomRow)).text());if(self.QueryParams.Lang=='heb'){roomPaxText=adultsSum==1?self.SearchEngineSettings.Translations["Adult"]+" "+adultsSum:adultsSum+" "+self.SearchEngineSettings.Translations["Adults"];}else{roomPaxText=adultsSum==1?adultsSum+" "+self.SearchEngineSettings.Translations["Adult"]:adultsSum+" "+self.SearchEngineSettings.Translations["Adults"];}
if(childrenSum>0){if(self.QueryParams.Lang=='heb'){if(childrenSum==1){roomPaxText+=", "+self.SearchEngineSettings.Translations["Child"]+" "+childrenSum;}else{roomPaxText+=", "+childrenSum+" "+self.SearchEngineSettings.Translations["Children"];}}else{if(childrenSum==1){roomPaxText+=", "+childrenSum+" "+self.SearchEngineSettings.Translations["Child"];}else{roomPaxText+=", "+childrenSum+" "+self.SearchEngineSettings.Translations["Children"];}}}
if(infantsSum>0){if(self.QueryParams.Lang=='heb'){if(infantsSum==1){roomPaxText+=", "+self.SearchEngineSettings.Translations["Infant"]+" "+infantsSum;}else{roomPaxText+=", "+infantsSum+" "+self.SearchEngineSettings.Translations["Infants"];}}else{if(infantsSum==1){roomPaxText+=", "+infantsSum+" "+self.SearchEngineSettings.Translations["Infant"];}else{roomPaxText+=", "+infantsSum+" "+self.SearchEngineSettings.Translations["Infants"];}}}
$('.room-pax-summery',$('#roomPaxTitleRow'+roomnumber)).html(", "+roomPaxText);},changeSelectionStartDate:function(){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.container.find(".start-date-label").addClass("active").find('.date-value').html("");this.container.find(".summery-date.check-in .part1").addClass("active").find('.date-value').html("");this.container.find(".end-date-label").removeClass("active").find('.date-value').html("");this.container.find(".summery-date.check-out .part1").removeClass("active").find('.date-value').html("");this.updateView();this.container.find('.start-date').removeClass("start-date active");this.container.find('.end-date').removeClass("end-date active in-range");this.container.find('.in-range').removeClass('.in-range');},changeSelectionEndDate:function(){this.endDate=null;this.updateView();this.container.find(".start-date-label").removeClass("active");this.container.find(".summery-date.check-in .part1").removeClass("active");this.container.find(".end-date-label").addClass("active").find('.date-value').html("");this.container.find(".summery-date.check-out .part1").addClass("active").find('.date-value').html("");}};$.fn.daterangepicker=function(options,callback){this.each(function(){var el=$(this);if(el.data('daterangepicker'))
el.data('daterangepicker').remove();el.data('daterangepicker',new DateRangePicker(el,options,callback));});return this;};return DateRangePicker;}));+function($){'use strict';var hebrew=moment.defineLocale('he',{months:'ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר'.split('_'),monthsShort:'ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳'.split('_'),weekdays:'ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת'.split('_'),weekdaysShort:'א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳'.split('_'),weekdaysMin:'א_ב_ג_ד_ה_ו_ש'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D [ב]MMMM YYYY',LLL:'D [ב]MMMM YYYY HH:mm',LLLL:'dddd, D [ב]MMMM YYYY HH:mm',l:'D/M/YYYY',ll:'D MMM YYYY',lll:'D MMM YYYY HH:mm',llll:'ddd, D MMM YYYY HH:mm'},calendar:{sameDay:'[היום ב־]LT',nextDay:'[מחר ב־]LT',nextWeek:'dddd [בשעה] LT',lastDay:'[אתמול ב־]LT',lastWeek:'[ביום] dddd [האחרון בשעה] LT',sameElse:'L'},relativeTime:{future:'בעוד %s',past:'לפני %s',s:'מספר שניות',m:'דקה',mm:'%d דקות',h:'שעה',hh:function(number){if(number===2){return 'שעתיים';}
return number+' שעות';},d:'יום',dd:function(number){if(number===2){return 'יומיים';}
return number+' ימים';},M:'חודש',MM:function(number){if(number===2){return 'חודשיים';}
return number+' חודשים';},y:'שנה',yy:function(number){if(number===2){return 'שנתיים';}else if(number%10===0&&number!==10){return number+' שנה';}
return number+' שנים';}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(input){return /^(אחה"צ|אחרי הצהריים|בערב)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<5){return 'לפנות בוקר';}else if(hour<10){return 'בבוקר';}else if(hour<12){return isLower?'לפנה"צ':'לפני הצהריים';}else if(hour<18){return isLower?'אחה"צ':'אחרי הצהריים';}else{return 'בערב';}}});var french=moment.defineLocale('fr',{months:'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),monthsShort:'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),monthsParseExact:true,weekdays:'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),weekdaysShort:'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),weekdaysMin:'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Aujourd’hui à] LT',nextDay:'[Demain à] LT',nextWeek:'dddd [à] LT',lastDay:'[Hier à] LT',lastWeek:'dddd [dernier à] LT',sameElse:'L'},relativeTime:{future:'dans %s',past:'il y a %s',s:'quelques secondes',m:'une minute',mm:'%d minutes',h:'une heure',hh:'%d heures',d:'un jour',dd:'%d jours',M:'un mois',MM:'%d mois',y:'un an',yy:'%d ans'},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(number,period){switch(period){case 'D':return number+(number===1?'er':'');default:case 'M':case 'Q':case 'DDD':case 'd':return number+(number===1?'er':'e');case 'w':case 'W':return number+(number===1?'re':'e');}},week:{dow:1,doy:4}});var German=moment.defineLocale('de',{months:'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),monthsShort:'Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),monthsParseExact:true,weekdays:'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),weekdaysShort:'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),weekdaysMin:'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD.MM.YYYY',LL:'D. MMMM YYYY',LLL:'D. MMMM YYYY HH:mm',LLLL:'dddd, D. MMMM YYYY HH:mm'},calendar:{sameDay:'[heute um] LT [Uhr]',sameElse:'L',nextDay:'[morgen um] LT [Uhr]',nextWeek:'dddd [um] LT [Uhr]',lastDay:'[gestern um] LT [Uhr]',lastWeek:'[letzten] dddd [um] LT [Uhr]'},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:'%d.',week:{dow:1,doy:4}});var Russian=moment.defineLocale('ru',{months:{format:'января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря'.split('_'),standalone:'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_')},monthsShort:{format:'янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.'.split('_'),standalone:'янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.'.split('_')},weekdays:{standalone:'воскресенье_понедельник_вторник_среда_четверг_пятница_суббота'.split('_'),format:'воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу'.split('_'),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:'вс_пн_вт_ср_чт_пт_сб'.split('_'),weekdaysMin:'вс_пн_вт_ср_чт_пт_сб'.split('_'),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longMonthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],shortMonthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD.MM.YYYY',LL:'D MMMM YYYY г.',LLL:'D MMMM YYYY г., H:mm',LLLL:'dddd, D MMMM YYYY г., H:mm'},calendar:{sameDay:'[Сегодня, в] LT',nextDay:'[Завтра, в] LT',lastDay:'[Вчера, в] LT',nextWeek:function(now){if(now.week()!==this.week()){switch(this.day()){case 0:return '[В следующее] dddd, [в] LT';case 1:case 2:case 4:return '[В следующий] dddd, [в] LT';case 3:case 5:case 6:return '[В следующую] dddd, [в] LT';}}else{if(this.day()===2){return '[Во] dddd, [в] LT';}else{return '[В] dddd, [в] LT';}}},lastWeek:function(now){if(now.week()!==this.week()){switch(this.day()){case 0:return '[В прошлое] dddd, [в] LT';case 1:case 2:case 4:return '[В прошлый] dddd, [в] LT';case 3:case 5:case 6:return '[В прошлую] dddd, [в] LT';}}else{if(this.day()===2){return '[Во] dddd, [в] LT';}else{return '[В] dddd, [в] LT';}}},sameElse:'L'},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(input){return /^(дня|вечера)$/.test(input);},meridiem:function(hour,minute,isLower){if(hour<4){return 'ночи';}else if(hour<12){return 'утра';}else if(hour<17){return 'дня';}else{return 'вечера';}},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(number,period){switch(period){case 'M':case 'd':case 'DDD':return number+'-й';case 'D':return number+'-го';case 'w':case 'W':return number+'-я';default:return number;}},week:{dow:1,doy:4}});var Chinese=moment.defineLocale('zh-cn',{months:'一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),monthsShort:'1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),weekdays:'星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),weekdaysShort:'周日_周一_周二_周三_周四_周五_周六'.split('_'),weekdaysMin:'日_一_二_三_四_五_六'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'YYYY/MM/DD',LL:'YYYY年M月D日',LLL:'YYYY年M月D日Ah点mm分',LLLL:'YYYY年M月D日ddddAh点mm分',l:'YYYY/M/D',ll:'YYYY年M月D日',lll:'YYYY年M月D日 HH:mm',llll:'YYYY年M月D日dddd HH:mm'},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(hour,meridiem){if(hour===12){hour=0;}
if(meridiem==='凌晨'||meridiem==='早上'||meridiem==='上午'){return hour;}else if(meridiem==='下午'||meridiem==='晚上'){return hour+12;}else{return hour>=11?hour:hour+12;}},meridiem:function(hour,minute,isLower){var hm=hour*100+minute;if(hm<600){return '凌晨';}else if(hm<900){return '早上';}else if(hm<1130){return '上午';}else if(hm<1230){return '中午';}else if(hm<1800){return '下午';}else{return '晚上';}},calendar:{sameDay:'[今天]LT',nextDay:'[明天]LT',nextWeek:'[下]ddddLT',lastDay:'[昨天]LT',lastWeek:'[上]ddddLT',sameElse:'L'},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(number,period){switch(period){case 'd':case 'D':case 'DDD':return number+'日';case 'M':return number+'月';case 'w':case 'W':return number+'周';default:return number;}},relativeTime:{future:'%s内',past:'%s前',s:'几秒',ss:'%d 秒',m:'1 分钟',mm:'%d 分钟',h:'1 小时',hh:'%d 小时',d:'1 天',dd:'%d 天',M:'1 个月',MM:'%d 个月',y:'1 年',yy:'%d 年'},week:{dow:1,doy:4}});var Spanish=moment.defineLocale('es',{months:'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),monthsShort:function(m,format){if(!m){return 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_');}else if(/-MMM-/.test(format)){return monthsShort[m.month()];}else{return 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_')[m.month()];}},monthsRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsShortRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],longMonthsParse:[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],shortMonthsParse:[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],weekdays:'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),weekdaysShort:'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),weekdaysMin:'do_lu_ma_mi_ju_vi_sá'.split('_'),weekdaysParseExact:true,longDateFormat:{LT:'H:mm',LTS:'H:mm:ss',L:'DD/MM/YYYY',LL:'D [de] MMMM [de] YYYY',LLL:'D [de] MMMM [de] YYYY H:mm',LLLL:'dddd, D [de] MMMM [de] YYYY H:mm'},calendar:{sameDay:function(){return '[hoy a la'+((this.hours()!==1)?'s':'')+'] LT';},nextDay:function(){return '[mañana a la'+((this.hours()!==1)?'s':'')+'] LT';},nextWeek:function(){return 'dddd [a la'+((this.hours()!==1)?'s':'')+'] LT';},lastDay:function(){return '[ayer a la'+((this.hours()!==1)?'s':'')+'] LT';},lastWeek:function(){return '[el] dddd [pasado a la'+((this.hours()!==1)?'s':'')+'] LT';},sameElse:'L'},relativeTime:{future:'en %s',past:'hace %s',s:'unos segundos',ss:'%d segundos',m:'un minuto',mm:'%d minutos',h:'una hora',hh:'%d horas',d:'un día',dd:'%d días',M:'un mes',MM:'%d meses',y:'un año',yy:'%d años'},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:'%dº',week:{dow:1,doy:4}});var Italian=moment.defineLocale('it',{months:'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),monthsShort:'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),weekdays:'domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato'.split('_'),weekdaysShort:'dom_lun_mar_mer_gio_ven_sab'.split('_'),weekdaysMin:'do_lu_ma_me_gi_ve_sa'.split('_'),longDateFormat:{LT:'HH:mm',LTS:'HH:mm:ss',L:'DD/MM/YYYY',LL:'D MMMM YYYY',LLL:'D MMMM YYYY HH:mm',LLLL:'dddd D MMMM YYYY HH:mm'},calendar:{sameDay:'[Oggi alle] LT',nextDay:'[Domani alle] LT',nextWeek:'dddd [alle] LT',lastDay:'[Ieri alle] LT',lastWeek:function(){switch(this.day()){case 0:return '[la scorsa] dddd [alle] LT';default:return '[lo scorso] dddd [alle] LT';}},sameElse:'L'},relativeTime:{future:function(s){return((/^[0-9].+$/).test(s)?'tra':'in')+' '+s;},past:'%s fa',s:'alcuni secondi',ss:'%d secondi',m:'un minuto',mm:'%d minuti',h:'un\'ora',hh:'%d ore',d:'un giorno',dd:'%d giorni',M:'un mese',MM:'%d mesi',y:'un anno',yy:'%d anni'},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:'%dº',week:{dow:1,doy:4}});moment.locale("en");var URILocation='';function GetUriParameter(parameter){parameter=parameter.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+parameter.toLowerCase()+"=([^&#]*)";var regex=new RegExp(regexS,'i');var results=regex.exec(URILocation);if(results==null)
return null;else return results[1];}
function cleanLocationUrl(){URILocation=window.location.href.replace(/\<|\>|\"|\'|\%|\;|\(|\)|\+|javascript|\:|script|eval/ig,'');}
cleanLocationUrl();function parseQuery(query){var Params=null;var results=!query?(window.location.search?window.location.search.replace('?',''):null):query;if(results==null||results=="")
return null;Params=new Object();var Pairs=results.split(/[;&]/);for(var i=0;i<Pairs.length;i++){var KeyVal=Pairs[i].split('=');if(!KeyVal||KeyVal.length!=2)continue;var key=unescape(KeyVal[0]).toLowerCase();var val=KeyVal[1];if(key!="promocode"){val=unescape(KeyVal[1]);}
val=val.replace(/\+/g,' ');Params[key]=val;}
return Params;}
function getAtrributeFromQuery(name,query){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(query==null||query==""?window.location.href:query);if(results==null)
return "";else
return results[1];}
function are_cookies_enabled(){var cookieEnabled=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!cookieEnabled){document.cookie="testcookie";cookieEnabled=(document.cookie.indexOf("testcookie")!=-1)?true:false;}
return(cookieEnabled);}
function trim(stringToTrim){return stringToTrim.replace(/^\s+|\s+$/g,"");}
function ltrim(stringToTrim){return stringToTrim.replace(/^\s+/,"");}
function rtrim(stringToTrim){return stringToTrim.replace(/\s+$/,"");}
jQuery.fn.isNullOrEmpty=function(){return jQuery(this).length==0||jQuery(this).val()==""};(function($){var zIndex=9999;var handleResize=true;$.fn.hasEventHandler=function(event,fn){if(!event){return this;}
var has={event:false,namespace:false,handler:false},events=this.data("events"),namespace=event.split(".");event=namespace.shift();namespace=namespace.join(".");if(events){if(!namespace){has.namespace=true;}
if(!fn){has.handler=true;}
if(event in events){$.each(events[event],function(i,v){if(namespace){if(namespace===v.namespace&&event===v.type){has.namespace=true;has.event=true;if(fn&&fn===v.handler){has.handler=true;}}}
else{if(event===v.type){has.event=true;if(fn&&fn===v.handler){has.handler=true;}}}});}}
return has.event&&has.namespace&&has.handler;};$.fn.firesEvent=function(eventName){var el=document.createElement($(this)[0].tagName);eventName='on'+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,'return;');isSupported=typeof el[eventName]=='function';}
el=null;return isSupported;};$.fn.center=function(_parent){var op=!_parent?$(window):this.parent().last();this.css({position:"absolute"});var lms=$("*",this).filter(function(){return parseInt($(this).css("margin-left"),10)<0;});var mlm=0;for(var i=0;i<lms.length;i++){if(parseInt($(lms[i]).css("margin-left"),10)<mlm)
mlm=parseInt($(lms[i]).css("margin-left"),10);}
var tms=$("*",this).filter(function(){return parseInt($(this).css("margin-top"),10)<0;});var mtm=0;for(var i=0;i<lms.length;i++){if(parseInt($(tms[i]).css("margin-top"),10)<mtm)
mtm=parseInt($(tms[i]).css("margin-top"),10);}
this.offset({left:-mlm,top:-mtm});this.css({left:(_parent&&op.position()?op.position().left:0)+(((_parent&&op.outerWidth(false)?op.outerWidth(false):op.width())-this.outerWidth(false))/2)+op.scrollLeft()+"px",top:(_parent&&op.position()?op.position().top:0)+(((_parent&&op.outerHeight(false)?op.outerHeight(false):op.height())-this.outerHeight(false))/2)+op.scrollTop()+"px"});if(this.width()+parseInt(this.css("left"),10)>op.width()){this.css("left",(_parent&&op.position()?op.position().left:0)+(((_parent&&op.outerWidth(false)?op.outerWidth(false):op.width())-this.outerWidth(false))/2)+"px");}
return this;};$.fn.corner=function(_parent,isTop,isLeft){this.css("position","absolute");this.css("left",0).css("top",0);var op=!_parent?$(window):this.parent().last();this.css("left",(isLeft?0:op.width()-this.outerWidth(false))+op.scrollLeft()).css("top",(isTop?0:op.height()-this.outerHeight(false))+op.scrollTop());return this;};$.fn.showModal=function(_parent,shadowFlow,onHideHandler){if($.modals==undefined)$.modals=[];for(var i=0;i<$.modals.length;i++){$.modals[i].shadow.css("visibility","hidden");}
this.css("position","absolute");var tsel=this.selector.replace(/#| /gi,"");if(tsel=="")
tsel=this.attr("id");if(tsel=="")
this.attr("id",tsel="modalWindow"+$.modals.length);var shadowDiv=$("#"+tsel+"Shadow");if(shadowDiv.length==0){shadowDiv=$("<div class='shadow' id='"+tsel+"Shadow'></div>");shadowDiv.insertBefore(this);}
var thisModal=$.modals.Find({selector:this.selector});var op=_parent?this.parent().last():this.offsetParent();if(op.length==0)return;if(op.prop("tagName").toLowerCase()=="body")op=op.parent();var isHTML=op.prop("tagName").toLowerCase()=="html";var zindex=$.modals.length==0?parseInt(op.css("z-index"))||$.page.zIndex():$.modals[$.modals.length-1].modalZindex;if(isNaN(zindex)||!zindex)zindex=zIndex;else zindex++;this.show();this.center(_parent);shadowDiv.show();shadowDiv.css("visibility","visible").css("z-index",thisModal?thisModal.shadowZindex:zindex);this.css("z-index",thisModal?thisModal.modalZindex:(zindex+1));if(!shadowFlow){shadowDiv.height((isHTML?$(window):op).height());shadowDiv.width((isHTML?$(window):op).width());shadowDiv.center(_parent);}
else{shadowDiv.css("left",(this.offset().left+5)+"px").css("top",(this.offset().top+10)+"px");shadowDiv.width(this.width());shadowDiv.height(this.height());}
if(thisModal){var _mm=$.modals.Confiscate({selector:this.selector});$.modals[$.modals.length]=_mm;return this;}
if($.modals.length==0){$(window).on("resize.modal",jQuery.fn.modalOnResizeHandler);$(window).on("scroll.modal",jQuery.fn.modalOnScrollHandler);$(document).on("keydown.modal",jQuery.fn.modalOnKeyDownHandler);}
this.onHide=onHideHandler||function(){return true;};this.isHiding=false;$.modals[$.modals.length]={selector:this.selector==""?"#"+this.attr("id"):this.selector,modal:this,shadow:shadowDiv,modalZindex:zindex+1,shadowZindex:zindex,toParent:_parent,hasShadowFlow:shadowFlow,parent:op};if($.modals.length>1)
$.modals[$.modals.length-2].shadow.css("visibility","hidden");return this;};$.fn.hideModal=function(){var mth;if($.modals){mth=$.modals.Find({selector:this.selector==""?"#"+this.attr("id"):this.selector});if(!mth||!mth.modal)return;if(mth.modal.onHide($(this))===false){return this;}}
else return this;mth.modal.isHiding=true;mth.shadow.hide();this.hide();if($.modals.length==1){$(window).off("resize.modal",jQuery.fn.modalOnResizeHandler);$(document).off("keydown.modal",jQuery.fn.modalOnKeyDownHandler);$(window).off("scroll.modal",jQuery.fn.modalOnScrollHandler);}
$.modals.Remove({selector:this.selector==""?"#"+this.attr("id"):this.selector});if($.modals.length>0)
$.modals[$.modals.length-1].shadow.css("visibility","visible");return this;};$.fn.modalOnResizeHandler=function(e){if(!$.modals||!handleResize)return;for(var i=0;i<$.modals.length;i++){if($.modals[i].isHiding)continue;$.modals[i].modal.center($.modals[i].toParent);if(!$.modals[i].modal.hasShadowFlow){$.modals[i].shadow.height($.modals[i].parent.height());$.modals[i].shadow.width($.modals[i].parent.width());$.modals[i].shadow.center($.modals[i].toParent);}
else{$.modals[i].shadow.css("left",($.modals[i].modal.offset().left+5)+"px").css("top",($.modals[i].modal.offset().top+10)+"px");$.modals[i].shadow.width($.modals[i].modal.width());$.modals[i].shadow.height($.modals[i].modal.height());}}};$.fn.modalOnKeyDownHandler=function(e){if(e.keyCode==27&&$.modals&&$.modals.length>0){if(e.target.tagName.toLowerCase()=="select"||e.target.tagName.toLowerCase()=="input"||e.target.tagName.toLowerCase()=="textarea"){e.stopPropagation();e.preventDefault();return false;}
$.modals[$.modals.length-1].modal.hideModal();e.stopPropagation();e.preventDefault();}};$.fn.modalOnScrollHandler=function(e){if(!$.modals)return;for(var i=0;i<$.modals.length;i++){if($.modals[i].modal.isHiding)continue;$.modals[i].modal.center($.modals[i].toParent);var shadowDiv=$.modals[i].shadow;if(!$.modals[i].modal.hasShadowFlow){$.modals[i].shadow.center($.modals[i].toParent);}
else{$.modals[i].shadow.css("left",($.modals[i].modal.offset().left+5)+"px").css("top",($.modals[i].modal.offset().top+10)+"px");}}};$.fn.getClasses=function(classesToOmit){var classes=this.attr("class").split(/\s+/gi);if(classesToOmit.length==0)return classes;for(var i=0;i<classesToOmit.length;i++){for(var c=0;c<classes.length;c++){if(classes[c].toLowerCase().indexOf(classesToOmit[i].toLowerCase())>-1){classes.splice(c,1);c--;}}}
return classes;};$.fn.fitWidth=function(percentage,includeMargins,parent,minVal,maxVal){$(this).each(function(){var p=!parent?$(this).parent():(parent instanceof jQuery?parent:$(parent));var inp={padLeft:parseInt($(this).css('padding-left'),10)||0,padRight:parseInt($(this).css('padding-right'),10)||0,mrgLeft:includeMargins?parseInt($(this).css('margin-left'),10)||0:0,mrgRight:includeMargins?parseInt($(this).css('margin-right'),10)||0:0,brdLeft:parseInt($(this).css('border-left-width'),10)||0,brdRight:parseInt($(this).css('border-right-width'),10)||0}
var fitTo=p.innerWidth()-(parseInt(p.css("padding-left"))||0)-(parseInt(p.css("padding-right"))||0);var fieldWidth=(fitTo-(inp.padLeft+inp.padRight+inp.mrgLeft+inp.mrgRight+inp.brdLeft+inp.brdRight))*(percentage/100);$(this).width(fieldWidth);if(minVal&&$(this).width()<minVal)$(this).setWidth(minVal);if(maxVal&&$(this).width()>maxVal)$(this).setWidth(maxVal);});return this;};$.fn.fitHeight=function(percentage,includeMargins,parent,minVal,maxVal){$(this).each(function(){var p=!parent?$(this).parent():(parent instanceof jQuery?parent:$(parent));var inp={padTop:parseInt($(this).css('padding-top'),10)||0,padBot:parseInt($(this).css('padding-bottom'),10)||0,mrgTop:includeMargins?parseInt($(this).css('margin-top'),10)||0:0,mrgBot:includeMargins?parseInt($(this).css('margin-bottom'),10)||0:0,brdTop:parseInt($(this).css('border-top-width'),10)||0,brdBot:parseInt($(this).css('border-bottom-width'),10)||0}
var fitTo=p.innerHeight()-(parseInt(p.css("padding-top"))||0)-(parseInt(p.css("padding-bottom"))||0);var fieldHeight=(fitTo-(inp.padTop+inp.padBot+inp.mrgTop+inp.mrgBot+inp.brdTop+inp.brdBot))*(percentage/100);$(this).height(fieldHeight);if(minVal&&$(this).height()<minVal)$(this).setHeight(minVal);if(maxVal&&$(this).height()>maxVal)$(this).setHeight(maxVal);});return this;};$.fn.fitSize=function(width_percentage,height_percentage,includeMargings,parent,width_minVal,width_maxVal,height_minVal,height_maxVal){$(this).each(function(){$(this).fitWidth(width_percentage,includeMargings,parent,width_minVal,width_maxVal).fitHeight(height_percentage,includeMargings,parent,height_minVal,height_maxVal);});return this;};$.fn.setWidth=function(width,includeMargins){$(this).each(function(){var inp={padLeft:parseInt($(this).css('padding-left'),10)||0,padRight:parseInt($(this).css('padding-right'),10)||0,mrgLeft:includeMargins?parseInt($(this).css('margin-left'),10)||0:0,mrgRight:includeMargins?parseInt($(this).css('margin-right'),10)||0:0,brdLeft:parseInt($(this).css('border-left-width'),10)||0,brdRight:parseInt($(this).css('border-right-width'),10)||0}
var w=width-inp.padLeft-inp.padRight-inp.brdLeft-inp.brdRight-(includeMargins?inp.mrgLeft:0)-(includeMargins?inp.mrgRight:0);$(this).width(w);var real_width=$(this).outerWidth(false);var prev_real_width=real_width;while(real_width>width){$(this).width(--w);real_width=$(this).outerWidth(false);if(prev_real_width==real_width)break;}});return this;};$.fn.setHeight=function(height,includeMargins){$(this).each(function(){var inp={padTop:parseInt($(this).css('padding-top'),10)||0,padBot:parseInt($(this).css('padding-bottom'),10)||0,mrgTop:includeMargins?parseInt($(this).css('margin-top'),10)||0:0,mrgBot:includeMargins?parseInt($(this).css('margin-bottom'),10)||0:0,brdTop:parseInt($(this).css('border-top-width'),10)||0,brdBot:parseInt($(this).css('border-bottom-width'),10)||0}
var h=height-inp.padTop-inp.padBot-inp.brdTop-inp.brdBot-(includeMargins?inp.mrgTop:0)-(includeMargins?inp.mrgBot:0);$(this).height(h);var real_height=$(this).outerHeight(false);var prev_real_height=real_height;while(real_height>height){$(this).height(--h);real_height=$(this).outerHeight(false);if(prev_real_height==real_height)break;}});return this;};$.fn.setSize=function(width,height,includeMargings){$(this).each(function(){$(this).setWidth(width,includeMargings).setHeight(height,includeMargings);});return this;};$.page={scrollbar:{isVerticalPresent:function(){var docHeight=$(document).height();var scroll=$(window).height()+$(window).scrollTop();return(docHeight!=scroll);},isHorizontalPresent:function(){var docWidth=$(document).width();var scroll=$(window).width();return(docWidth!=scroll);},width:function(){if(!this._scrollbarWidth){if(/(MSIE (\d+\.\d+);)|(Trident (\/\d+\.\d+);)/.test(navigator.userAgent)){var div=$("<div />").css({width:50,height:50,overflow:"hidden"});div.append($("<div />").css({height:100}))
div.insertBefore($($("body").children().eq(0)));var indiv=$("div",div);var w=indiv.width();div.css({overflow:"scroll"});this._scrollbarWidth=w-indiv.width();div.remove();}
else{var $body=$('html');var w=$body.css('overflow','hidden').width();$body.css('overflow','scroll');w-=$body.width();if(!w)w=$body.width()-$body[0].clientWidth;$body.css('overflow','');this._scrollbarWidth=w;}}
return this._scrollbarWidth;}},zIndex:function(){try{var zIndex=0;$(':visible').each(function(){if($(this).css&&$(this).css("z-index")){var z=parseInt($(this).css("z-index"));z=isNaN(z)?0:z;if(z>zIndex)zIndex=z;}})
return zIndex;}
catch(err){return 0;}},selection:{remove:function(){var selection=window.getSelection?window.getSelection():document.selection?document.selection:null;if(!!selection)selection.empty?selection.empty():selection.removeAllRanges();}},direction:function(){if(!this._pageDir){this._pageDir=$("body").css("direction");if(!this._pageDir||this._pageDir=="")
this._pageDir=$("html").css("direction");if(!this._pageDir||this._pageDir=="")
this._pageDir="ltr";}
return this._pageDir;},querystring:function(key){if(!this._querystring){this._querystring={};var me=this;(function(){var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "));},query=window.location.search.substring(1);while(match=search.exec(query))
me._querystring[decode(match[1])]=decode(match[2]);})();}
if(!key||key=="")
return this._querystring||{};return this._querystring[key];},showLoading:function(el){(el||$("#mmImgLoading")).showModal(false,false);},hideLoading:function(el){(el||$("#mmImgLoading")).hideModal();},isValid:function(Cslid,toCheck){$.page.setValidators();var ids=[];var include=true;if(arguments.length>0){ids=arguments[0]instanceof Array?arguments[0]:arguments[0].split(",");include=arguments[1]==undefined||arguments[1]==null?true:arguments[1];}
var is_valid=true;var clonedValidators=$.validators.slice(0);for(var i=0;i<clonedValidators.length;i++){if(ids.length>0){if((ids.Contains(clonedValidators[i].ControlToValidateID)&&!include)||(!ids.Contains(clonedValidators[i].ControlToValidateID)&&include))continue;}
var v=$.page.validateValidators(clonedValidators[i],i);is_valid=is_valid&&v;if(!is_valid)
clonedValidators.RemoveAll({ControlToValidateID:clonedValidators[i].ControlToValidateID});}
return is_valid;},setValidators:function(){var inputs=$("input[type=hidden].validator");if($.validators&&$.validators.length==inputs.length)return;$.validators=new Array();var count=0;for(var i=0;i<inputs.length;i++){$.validators[$.validators.length]=eval($(inputs[i]).val());var el=$("#"+$.validators[$.validators.length-1].ControlToValidateID);if(el.length==0){$.validators.splice($.validators.length-1,1);continue;}
if(el.firesEvent("change")){el.on("change",{index:count++},function(e){$.page.validateValidators(null,e.data.index);});}
else{$.validators[$.validators.length-1].html=el.html();$.validators[$.validators.length-1].interval=setInterval((function(index){return function(){var el=$("#"+$.validators[index].ControlToValidateID);if($.validators[index].html!=el.html()){$.validators[index].html=el.html();$.page.validateValidators(null,index);}}})(count++),1000);}}},validateValidators:function(validator,vid){if(!validator)validator=$.validators[vid];var ctv=$("#"+validator.ControlToValidateID);if(ctv.length==0)return true;var is_valid=true;var v;for(var i=0;i<validator.Validators.length;i++){v=validator.Validators[i];switch(v.Type.toLowerCase()){case 'regexp':var rx=new RegExp(v.Expression);var matches=rx.exec(ctv.val());is_valid=(matches!=null&&ctv.val()==matches[0]);break;case 'uf':case 'udf':case 'func':case 'function':case 'userfunc':try{is_valid=v.Expression(ctv);}
catch(err){}
break;default:break;}
if(!is_valid){if(ctv.attr("oldTitle")=="")
ctv.attr("oldTitle",ctv.attr("title")||"");ctv.attr("title",v.ErrorMessage);break;}
else{if(ctv.attr("title")==v.ErrorMessage)
ctv.attr("title",ctv.attr("oldTitle")||"");else ctv.attr("title","");}}
if(!is_valid)
ctv.addClass("validator-error");else
ctv.removeClass("validator-error","");var c=ctv
while(c.length>0&&c[0].tagName){if(c.css("display")=="none"&&!is_valid){c.showModal(false,false);break;}
c=c.parent();}
return is_valid;},entitle:function(titleSelector){var gtt=$(titleSelector||".globalTitle");if(gtt.length==0){$("body").append($("<div />").addClass((titleSelector.replace(".","")||"globalTitle")+" hidden").css("position","absolute").css("max-width","250px").css("padding","5px").css("z-index","1000"));}
$(document).delegate("[title]","mousemove",{s:titleSelector},function(e){var $this=this instanceof jQuery?this:$(this);if($this.attr("title")!=""){$this.attr("_title",$this.attr("title"));$this.attr("title","");}
var gtt=$(e.data.s||".globalTitle");gtt.html($(this).attr("_title"));gtt.css({left:e.pageX+15,top:e.pageY+15});if(!gtt.is(":visible"))gtt.css({zIndex:$.page.zIndex()+1});gtt.show();gtt.hide();if(parseInt(gtt.css("left"),10)+gtt.outerWidth()>$(window).width()){gtt.css("left",parseInt(gtt.css("left"),10)-gtt.outerWidth());}
if(parseInt(gtt.css("top"),10)+gtt.outerHeight()>($(window).height()+$(window).scrollTop())){gtt.css("top",parseInt(gtt.css("top"),10)-gtt.outerHeight()-20);}
gtt.show();e.stopPropagation();}).delegate("[title]","mouseout",{s:titleSelector},function(e){$(e.data.s||".globalTitle").hide();});},ajax:function(func,param,url,altSuccess,altError){var _action=typeof(url)=="string"?url:$("#form1").attr("action");if(_action.indexOf("?")>-1){_action=_action.substring(0,_action.indexOf("?"));}
$.ajax({type:"POST",url:(typeof(url)=="boolean"?"service.asmx":_action)+"/"+func,data:param!=null?JSON.stringify(param):null,contentType:"application/json; charset=utf-8",dataType:"json",success:function(ret){if(altSuccess&&typeof altSuccess=="function"){altSuccess(ret,func,this.parameter);}
else{if(window.onSuccess)
onSuccess(ret,func,this.parameter);}},error:function(ret){if(altError&&typeof altError=="function"){altError(ret,func,this.parameter);}
else{if(window.onError)
onError(ret,func,this.parameter);}},parameter:param});},iframe:function(id,part){switch(part){case "window":case "w":if(document.getElementById(id).contentWindow)return document.getElementById(id).contentWindow;else return document.frames[id].window;break;case "document":case "d":if(document.getElementById(id).contentDocument)return document.getElementById(id).contentDocument;else return document.frames[id].document;break;case "body":case "b":var doc;if(document.getElementById(id).contentDocument)doc=document.getElementById(id).contentDocument;else doc=document.frames[id].document;return doc.getElementsByTagName(id)[0];break;}}};$.CPAC={popupElement:null,titleElement:null,contentElement:null,doersElement:null,visible:false,instances:[],index:0,template:"",init:function(popupTemplate,titleElementSelector,contentElementSelector,doersElementSelector){this.template=popupTemplate;this.popupElement=$(this.template);this.titleElement=titleElementSelector instanceof jQuery?titleElementSelector:$(titleElementSelector,this.popupElement);this.contentElement=contentElementSelector instanceof jQuery?contentElementSelector:$(contentElementSelector,this.popupElement);this.doersElement=doersElementSelector instanceof jQuery?doersElementSelector:$(doersElementSelector,this.popupElement);},show:function(content,title,doers,hideHandler,customPopupElementSize){if(this.instances.length==0)
this.instances[this.instances.length]={popupElement:this.popupElement,titleElement:this.titleElement,contentElement:this.contentElement,doersElement:this.doersElement,isClone:false};if(this.visible){this.clone();}
var inst=this.instances[this.instances.length-1];inst.hideHandler=hideHandler;if(!inst.popupElement||!(inst.popupElement instanceof jQuery)||inst.popupElement.length==0){throw "User interaction pop up element not initialized";return false;}
if(title&&title!=""&&(!inst.titleElement||!(inst.titleElement instanceof jQuery)||inst.titleElement.length==0)){throw "User interaction title element not initialized";return false;}
if(content&&content!=""&&(!inst.contentElement||!(inst.contentElement instanceof jQuery)||inst.contentElement.length==0)){throw "User interaction content element not initialized";return false;}
inst.titleElement.html(title);inst.contentElement.html("");if(content){if(content instanceof jQuery)inst.contentElement.append(content);else if(content!="")inst.contentElement.html(content);}
inst.doersElement.html("");for(var i=0;doers&&i<doers.length;i++){if(!doers[i])continue;var at;if(doers[i].jQueryObject&&doers[i].jQueryObject instanceof jQuery){at=doers[i].jQueryObject;}
else{at=$("<input type='button' />").addClass(doers[i].cssclass||"").val(doers[i].title||"");doers[i].handler=($.isFunction(doers[i].data)?doers[i].data:(doers[i].handler||function(e){}));}
at.bind(doers[i].objectEvent||"click",{ppe:inst.popupElement,sender:at,f:doers[i].handler,udata:$.isFunction(doers[i].data)?null:doers[i].data},function(e){var ee={};ee.data=e.data.udata||{};ee.data.sender=e.data.sender;var close=!e.data.f?true:e.data.f(ee);if(close==null||close===true){if(e.data.ppe.length)
e.data.ppe.hideModal();}});inst.doersElement.append(at);}
this.visible=true;var self=this;$("body").append(inst.popupElement);if(customPopupElementSize){var el=inst.popupElement;if(customPopupElementSize.selector)
el=$(customPopupElementSize.selector,inst.popupElement);if(customPopupElementSize.width)el.setWidth(customPopupElementSize.width);if(customPopupElementSize.height)el.setHeight(customPopupElementSize.height);}
if(!inst.popupElement.attr("id"))inst.popupElement.attr("id","uiModal"+this.instances.length);inst.popupElement.showModal(false,false,function(sender){var ret=true;var e={sender:sender};if(self.instances[self.instances.length-1].hideHandler)ret=self.instances[self.instances.length-1].hideHandler(e);self.instances[self.instances.length-1].popupElement.remove();self.instances.splice(self.instances.length-1,1);self.bubble=e.bubble||self.bubble;if(self.bubble){while(self.instances.length){self.instances[self.instances.length-1].popupElement.hideModal();}
self.bubble=false;}
self.visible=self.instances.length>0;return ret;});},clone:function(){var ppeClone=this.popupElement.clone();var ttlClone=$(this.titleElement.selector.replace(this.popupElement.selector,""),ppeClone);var cntClone=$(this.contentElement.selector.replace(this.popupElement.selector,""),ppeClone);var atsClone=$(this.doersElement.selector.replace(this.popupElement.selector,""),ppeClone);this.instances[this.instances.length]={popupElement:ppeClone,titleElement:ttlClone,contentElement:cntClone,doersElement:atsClone,isClone:true};ppeClone.attr("id","uiModals"+this.instances.length);},hide:function(all){if(this.instances.length==0)return;while(this.instances.length){this.instances[this.instances.length-1].popupElement.hideModal();if(all)break;}},doer:function(p1,p2,p3,p4){if(arguments[0]instanceof jQuery){this.jQueryObject=arguments[0];this.objectEvent=arguments[1];}
else{this.title=arguments[0];this.cssClass=arguments[1];}
this.data=arguments[2];this.handler=arguments[3];}};$.mouseMoveData={};$.fn.documentMouseMove=function(e){if(!e)e=window.event;$.page.selection.remove();$.mouseMoveData.iLeft=e.clientX-$.mouseMoveData.iOffsetX;$.mouseMoveData.iTop=e.clientY-$.mouseMoveData.iOffsetY;$.mouseMoveData.dragger.css("position","absolute");var newLeft=$.mouseMoveData.iOrgLeft+$.mouseMoveData.iLeft;var newTop=$.mouseMoveData.iOrgTop+$.mouseMoveData.iTop;var sbw=$.page.scrollbar.width();if(newLeft<sbw)newLeft=sbw;if(newTop<sbw+$(document).scrollTop())newTop=sbw+$(document).scrollTop();if(newLeft+$.mouseMoveData.dragger.outerWidth(false)>$(window).width())newLeft=$(window).width()-$.mouseMoveData.dragger.outerWidth(false)-sbw;if(newTop+$.mouseMoveData.dragger.outerHeight(false)>$(window).height()+$(document).scrollTop())newTop=$(window).height()-$.mouseMoveData.dragger.outerHeight(false)-sbw+$(document).scrollTop();$.mouseMoveData.dragger.offset({left:newLeft,top:newTop});if($.mouseMoveData.dragger.attr("hasShadowFlow")=="true"){$("#"+$.mouseMoveData.dragger.attr("id")+"Shadow").css({left:newLeft+5,top:newTop+10});}
return false;}
$(document).on("mousedown",function(e){if(e.which>1)return;handleResize=false;$.mouseMoveData.picker=$(e.target);var isSelfPicker=$.mouseMoveData.picker.hasClass("mousepicker");if(!isSelfPicker&&!$.mouseMoveData.picker.parents(".picker").length)return;if(!isSelfPicker)
$.mouseMoveData.picker=$.mouseMoveData.picker.parents(".picker");if($.mouseMoveData.picker.hasClass("nomove")||$.mouseMoveData.picker.parents(".nomove").length)return;if($.mouseMoveData.picker.length==0)return;$.mouseMoveData.picker.css({cursor:"move"});var isSelfDragger=$.mouseMoveData.picker.hasClass("mousedragger");$.mouseMoveData.dragger=isSelfDragger?$.mouseMoveData.picker:$.mouseMoveData.picker.parents(".mousedragger");$.mouseMoveData.zIndex=parseInt($.mouseMoveData.dragger.css("zIndex"),10);$.mouseMoveData.dragger.css("zindex",$.mouseMoveData.zIndex>zIndex?$.mouseMoveData.zIndex+1:$.mouseMoveData.zIndex);$.mouseMoveData.cursor=$.mouseMoveData.dragger.css("cursor");$.mouseMoveData.iframes=$("iframe",$.mouseMoveData.dragger);$.mouseMoveData.iframes=$.mouseMoveData.iframes.filter(function(e){$(this).css("display")=="block";});$.mouseMoveData.iframes.hide();$.mouseMoveData.iOffsetX=e.clientX;$.mouseMoveData.iOffsetY=e.clientY;$.mouseMoveData.iOrgLeft=$.mouseMoveData.dragger.offset().left;$.mouseMoveData.iOrgTop=$.mouseMoveData.dragger.offset().top;$(document).on("mousemove",$.fn.documentMouseMove);return;});$(document).on("mouseup",function(e){if(e.which>1)return false;handleResize=true;$(document).off("mousemove",$.fn.documentMouseMove);if($.mouseMoveData.iframes&&$.mouseMoveData.iframes.length){$.mouseMoveData.iframes.show();}
if($.mouseMoveData.dragger&&$.mouseMoveData.dragger.length&&$.mouseMoveData.zIndex>zIndex){$.mouseMoveData.dragger.css("z-index",$.mouseMoveData.zIndex);}
if($.mouseMoveData.picker&&$.mouseMoveData.picker.length)$.mouseMoveData.picker.css({cursor:$.mouseMoveData.cursor});return false;});})(jQuery);function JqueryAjax(options){var settings=$.extend({url:'',data:{},successfun:false,errorfunc:false,synchronious:false,crossDomain:false,method:'POST'},options);$.ajax({async:!settings.synchronious,type:settings.method,url:settings.url,contentType:"application/json; charset=utf-8",dataType:(!settings.crossDomain)?"json":"jsonp",data:settings.data,timeout:300000,success:settings.successfun,error:settings.errorfunc});}
Array.prototype.Contains=function(val){for(var i=0;i<this.length;i++){if(val instanceof Object){for(p in val){if(this[i][p]!=val[p])return false;}
return true;}
else{if(this[i]==val)return true;}}
return false;};Array.prototype.Find=function(val){for(var i=0;i<this.length;i++){if(val instanceof Object){var c=false;for(var p in val){if(this[i][p]!=val[p])c=true;}
if(c)continue;return this[i];}
else{if(this[i]==val)return this[i];}}
return null;};Array.prototype.FindAll=function(val){var obj=[]
for(var i=0;i<this.length;i++){if(val instanceof Object){var ok=true;for(var p in val){if(val[p]instanceof Array){if(!val[p].Find(this[i][p])){ok=false;break;}}
else{if(this[i][p]!=val[p]){ok=false;break;}}}
if(ok)obj[obj.length]=this[i];}
else{if(this[i]==val)obj[obj.length]=this[i];}}
return obj;};Array.prototype.Confiscate=function(val){for(var i=0;i<this.length;i++){if(val instanceof Object){var c=false;for(var p in val){if(this[i][p]!=val[p])c=true;}
if(c)continue;var item=this[i];this.splice(i,1);return item;}
else{if(this[i]==val){var item=this[i];this.splice(i,1);return item;}}}
return null;}
String.prototype.Capitalize=function(allwords){if(!allwords){return(this.length>0?this.substring(0,1).toUpperCase():"")+(this.length>1?this.substring(1).toLowerCase():"");}
var nstr="";var s="";var strs=this.split(' ');for(var i=0;i<strs.length;i++){nstr+=s+strs[i].Capitalize(false);s=" ";}
return nstr;};String.prototype.IsIn=function(){if(arguments.length==0)return false;for(var i=0;i<arguments.length;i++){if(arguments[i]instanceof Array){for(var j=0;j<arguments[i].length;j++){if(this==arguments[i][j])return true;}}
if(this==arguments[i])return true;}
return false;};if(typeof(Array.prototype.Remove)=='undefined'){Array.prototype.Remove=function(val){for(var i=0;i<this.length;i++){if(val instanceof Object){var c=false;for(var p in val){if(typeof(this[i][p])=="function"?(this[i][p]()!=val[p]):(this[i][p]!=val[p]))c=true;}
if(c)continue;this.splice(i,1);return true;}
else{if(this[i]!=val)continue;this.splice(i,1);return true;}}
return false;};}
if(typeof(Array.prototype.RemoveAll)=='undefined'){Array.prototype.RemoveAll=function(val,startIndex){var length=this.length;for(var i=(startIndex||0);i<this.length;i++){if(val instanceof Object){var ok=true;for(var p in val){if(val[p]instanceof Array){if(!val[p].Find(typeof(this[i][p])=="function"?this[i][p]():this[i][p])){ok=false;break;}}
else{if(typeof(this[i][p])=="function"?(this[i][p]()!=val[p]):(this[i][p]!=val[p])){ok=false;break;}}}
if(ok){this.splice(i,1);i--;}}
else{if(val!=null&&this[i]!=val)continue;this.splice(i,1);i--;}}
return length!=this.length;};}
var isHuman=false;var SearchRequest;var defaultPax=new Object();var ajaxLock=false;var SearchEngine=function(element,options){this.$element=$(element);this.QueryParams=null;this.SearchEngineSettings=null;this.CurrentSetting=null;this.destSelect=null;this.hotelsSelect=null;this.countrySelect=null;this.conID=0;this.resID="";this.RegID=0;this.RoomPaxObject;this.LoadingObject=null;this.isCurrentSearchDates=true;this.initPaxFromSearchRequest=true;this.isDefaultDates=true;this.clearCacheOnError=true;this.datesHolder=null;this.datesData={curAvailibility:new Array(),dealCurAvailibility:new Array(),minDateArr:new moment(),minDateDep:new moment().add(1,'days'),defaultMaxDate:null,minDays:1,_closedDates:new Array(),_closedDatesToDeparture:new Array(),_closedDatesNotAvail:new Array(),_dealClosedDates:new Array(),_dealClosedDatesToDeparture:new Array(),startDealDate:null,endDealDate:null,minDealDays:null,maxDealDays:null,paxCombintaion:null,maxPax:null,departureClosedDaysChanged:false,};}
SearchEngine.VERSION='5.0';SearchEngine.DEFAULTS={lang:"eng",params:null,querystring:null,apiprefixurl:'BE_EngineService.asmx'};function Plugin(option){const loadCss=(chainid,apiPrefixUrl,lang)=>{if(typeof chainid==='string'){chainid=chainid.trim();}
let el=document.createElement('link');el.rel="stylesheet";el.href=`${apiPrefixUrl.replace('BE_EngineService','')}Content/Chains/Chain${chainid}/ChainCSS?file=calendar&chainId=${chainid}&lang=${lang}&v=2`;document.head.appendChild(el);}
return this.each(function(){console.log("search engine plugin was loaded");var $this=$(this);var currentEngine=$this.data('se.engine');var options=$.extend({},SearchEngine.DEFAULTS,$this.data(),typeof option=='object'&&option)
if(!currentEngine)$this.data('se.engine',(currentEngine=new SearchEngine(this,options)))
if(!currentEngine.SearchEngineSettings){var dataParams=options.params;SearchRequest=options.querystring!=undefined&&options.querystring!=""?parseQuery(options.querystring.replace('?','')):parseQuery(null);if(dataParams)
currentEngine.QueryParams=parseQuery(dataParams.replace('?',''));else if(GetUriParameter('lang')){currentEngine.QueryParams=new Object();currentEngine.QueryParams.Lang=GetUriParameter('lang');}
else{currentEngine.QueryParams=new Object();currentEngine.QueryParams.Lang=options.lang;}
var keys=Object.keys(currentEngine.QueryParams);currentEngine.QueryParams.Extra="";for(var i=0;i<keys.length;i++){if(keys[i].indexOf("extra")>-1){currentEngine.QueryParams.Extra+="&"+(keys[i].toString().substr(keys[i].indexOf("extra")+5)+"="+currentEngine.QueryParams[keys[i]]);}}
if(currentEngine.QueryParams.css!=='false'){loadCss(currentEngine.QueryParams.chainid,options.apiprefixurl,currentEngine.QueryParams.lang);}
var dataobject=new Object();dataobject.query=currentEngine.QueryParams;JqueryAjax({url:options.apiprefixurl+"/InitEngineV5",data:JSON.stringify(dataobject),successfun:function(obj){var result=obj.d||obj;if(result.Success){currentEngine.SearchEngineSettings=result.Obj.SearchEngine;currentEngine.SearchEngineSettings.ApiPrefixUrl=options.apiprefixurl;let cssSettings=currentEngine.QueryParams.css;currentEngine.QueryParams=result.Obj.CurrentParams;currentEngine.SearchEngineSettings.Translations=result.Obj.Translations;currentEngine.Styles=result.Obj.Styles;for(var i=0;i<currentEngine.SearchEngineSettings.Settings.length;i++){if(currentEngine.SearchEngineSettings.Settings[i].Lang==currentEngine.QueryParams.Lang){currentEngine.CurrentSetting=currentEngine.SearchEngineSettings.Settings[i];break;}}
moment.locale(currentEngine.QueryParams.DatepickerLang);if(currentEngine.QueryParams.ClearCache)
console.warn(currentEngine.QueryParams.ClearCacheMsg);var deal=null;if($this.data("dealtoshow")){deal=$this.data("dealtoshow");}
if(deal!=null){initDealFromData(deal,currentEngine);}
currentEngine.BuildHtml();if(currentEngine.SearchEngineSettings.EngineSetting.GetLastSearchInSession&&!isSearchRequestValid()&&!currentEngine.QueryParams.CurrentResort&&!currentEngine.QueryParams.IsDealEngine)
{var searchReqSession=sessionStorage.getItem('SearchRequest');if(searchReqSession){SearchRequest=parseQuery(searchReqSession.replace("?",""));}}
if(isSearchRequestValid())
SearchRequest=initSearchRequest(currentEngine);else{currentEngine.isCurrentSearchDates=false;currentEngine.initPaxFromSearchRequest=false;SearchRequest=null;}
currentEngine.initVars();if(currentEngine.SearchEngineSettings.ShowDebugData)
console.log(SearchEngine);}
else{console.error(result.Error);}},errorfunc:function(e){var dataobject=new Object();dataobject.statusText=e.statusText;dataobject.responseText=e.responseText;if(currentEngine.clearCacheOnError){JqueryAjax({url:options.apiprefixurl+"/ClearCacheOnErrorV5",data:JSON.stringify(dataobject),successfun:function(obj){if(obj.d)
window.location.reload();else
currentEngine.clearCacheOnError=false;}});}}});}});}
var old=$.fn.searchEngine
$.fn.searchEngine=Plugin
$.fn.searchEngine.Constructor=SearchEngine
$.fn.searchEngine.noConflict=function(){$.fn.searchEngine=old
return this}
SearchEngine.prototype.BuildHtml=function(){let engineHtml="<div style='opacity:0;transition: opacity linear 200ms;' class='simplex-main-engine-holder "+(typeof this.SearchEngineSettings.EngineSetting.CustomCssClasses==='string'?this.SearchEngineSettings.EngineSetting.CustomCssClasses:'')+"'>";if(this.CurrentSetting!=null){if(this.QueryParams.EditMode){engineHtml+='<div class="engine-header-close-button d-lg-none"><i>&#215;</i></div>';}
engineHtml+="<div class='engine-holder-header'><div class='book-your-stay-text'>"+this.SearchEngineSettings.Translations["BookYourStay"]+"</div>"+
"<div class='discount-rate-text'>"+this.SearchEngineSettings.Translations["DiscountRate"]+"</div>"+
"</div>"+"<div class=\"engine-holder specail-lang"+this.QueryParams.Lang+" step-1"+" "+getEngineTypeClass(this.QueryParams)+(this.QueryParams.SpecailClass!=null&&this.QueryParams.SpecailClass!=""?" "+this.QueryParams.SpecailClass:"")+"\">";if(this.SearchEngineSettings.EngineSetting.ShowIframeComboError){engineHtml+="<div id=\"flowDivComb\" class=\"flow-div-comb\">"+
"<div class=\"close-combo-error\" class=\"flow-div-comb-close\">X</div>"+
"</div>";}
engineHtml+=buildResortsArea(this.SearchEngineSettings,this.QueryParams,this.CurrentSetting)+buildDatepickersArea(this.SearchEngineSettings,this.QueryParams)+RoomSummeryPanel(this.SearchEngineSettings,this.QueryParams)+buildEngineBottomArea(this.SearchEngineSettings,this.QueryParams)+RoomSummeryPanelNew(this.SearchEngineSettings,this.QueryParams);}
else{engineHtml="error";}
engineHtml+="</div></div>";this.$element.html("");this.$element.append(engineHtml);if(window.innerWidth<960&&this.SearchEngineSettings.EngineSetting.UsePromoCodeNew){$(".bottom-engine-holder").css("display","flex");$(".bottom-engine-holder").css("flex-direction","column-reverse");$('.approvePromo').html('X');}
function getEngineTypeClass(QueryParams){var engineType="";if(QueryParams.IsDealEngine)
engineType="engine-type-deal";else if(QueryParams.IsRoomEngine)
engineType="engine-type-room";else if(QueryParams.Be)
engineType="engine-type-be";else if(QueryParams.Popup)
engineType="engine-type-popup";else
engineType="engine-type-main";return engineType;}
function buildResortsArea(SearchEngine,QueryParams,CurrentSetting){if(!SearchEngine.EngineSetting.IsSingleHotel){var htmlContent="<div class=\"resort-holder\" >";htmlContent+="<div class=\"hotel-selector-label d-none\">"+SearchEngine.Translations["HotelLabel"]+"</div>";}
if(SearchEngine.EngineSetting.IsSingleHotel){var htmlContent="<div class=\"resort-holder d-none\">";htmlContent+="<input type=\"hidden\" id=\"SingleHotelId\" value=\""+CurrentSetting.SingleResort.OptimaResortID+"_"+CurrentSetting.SingleResort.Wing+":"+CurrentSetting.SingleResort.DSN+"\" />";}
else if(SearchEngine.UseCountries){htmlContent+="<div class=\"selects\" id=\"selects\">"+
"<select id=\"countrySelect\">";if(!SearchEngine.EngineSetting.HideDefaultOptionInSelect)
htmlContent+="<option value=\"0\">"+SearchEngine.Translations["SelectCountryOption"]+"</option>";for(var i=0;i<CurrentSetting.Countries.length;i++){htmlContent+="<option value=\""+CurrentSetting.Countries[i].CountryId+"\">"+CurrentSetting.Countries[i].CountryName+"</option>";}
htmlContent+="</select>";htmlContent+="<select id=\"destSelect\">";if(!SearchEngine.EngineSetting.HideDefaultOptionInSelect)
htmlContent+="<option value=\"0\">"+SearchEngine.Translations["SelectRegionOption"]+"</option>";for(var i=0;i<CurrentSetting.Regions.length;i++){htmlContent+="<option value=\""+CurrentSetting.Regions[i].RegionID+"\">"+CurrentSetting.Regions[i].RegionName+"</option>";}
htmlContent+="</select>";htmlContent+="<select id=\"hotelSelect\">";if(!SearchEngine.EngineSetting.HideDefaultOptionInSelect)
htmlContent+="<option value=\"0\">"+SearchEngine.Translations["selectHotel"]+"</option>";for(var i=0;i<CurrentSetting.AllResorts.length;i++){htmlContent+="<option value=\""+CurrentSetting.AllResorts[i].OptimaResortID+"_"+CurrentSetting.AllResorts[i].Wing+":"+CurrentSetting.AllResorts[i].DSN+"\">"+CurrentSetting.AllResorts[i].ResortName+"</option>";}
htmlContent+="</select></div>";}
else if(!SearchEngine.EngineSetting.ShowRegionDropDown){htmlContent+="<div class=\"engine-header\">";if(QueryParams.IsDealEngine){SearchEngine.Translations["dealEngineHeader"];}
htmlContent+="</div>";htmlContent+="<div class=\"select-hotel-holder\" tabindex=\"0\" role=\"combobox\" aria-owns=\"ddlHotels\" aria-haspopup=\"listbox\" aria-multiselectable=\"false\" aria-autocomplete=\"false\" id=\"SelectHotelHolder\">"+
"<label for=\"ddlHotels\" class=\"hotel-header\">"+SearchEngine.Translations["HotelLabel"]+"</label>"+
"<span class=\"resort-cohise-sep d-md-none\"></span>";if(SearchEngine.EngineSetting.UseDivDisplayHotelSelection){var chosenHotel=SearchEngine.Translations["selectHotel"];if(QueryParams.CurrentResort!==null){if(QueryParams.CurrentResort.ResortName!==null){chosenHotel=QueryParams.CurrentResort.ResortName;}}
else if(QueryParams.CurrentRegion!==null){chosenHotel=SearchEngine.Translations["hotelsIn"]+QueryParams.CurrentRegion.RegionName;}
else if(GetUriParameter("allHotelsSearch")){self.resID="9999";chosenHotel=SearchEngine.Translations["AllHotelsText"];}
htmlContent+="<span class='hotel-initial-text'>"+chosenHotel+"</span>";htmlContent+="<div role='application' class= 'hotels-div row d-none' id='ddlHotels' role='listbox' aria-hidden='true' aria-expanded='false'>";htmlContent+="<div class='choose-hotels-top col-12 d-none'>";htmlContent+="<div class='book-your-stay-text col-6'>"+SearchEngine.Translations["BookYourStay"]+"</div>";htmlContent+="<div class='discount-rate-text col-6'>"+SearchEngine.Translations["DiscountRate"]+"</div>";htmlContent+="</div>";htmlContent+="<div class='chooser-header col-12'><div class='row'>";htmlContent+="<div class='choose-hotels-label text-uppercase col-4 col-md-2'>"+SearchEngine.Translations["selectHotel"]+"</div>";htmlContent+="<button class='close-hotels-list col-2 col-md-1' aria-label=\""+SearchEngine.Translations["CloseLabel"]+"\">&#215;</button></div></div>";if(SearchEngine.EngineSetting.AllRegionsSearch){var allRegionsId="9999";htmlContent+="<div class=\"all-regions hotel-select\" data-val=\""+allRegionsId+"\">"+
"<button class=\"hotelName\" tabindex=\"0\">"+SearchEngine.Translations["AllHotelsText"]+"</button></div>";}
if(CurrentSetting.Regions&&CurrentSetting.Regions.length>0){for(var i=0;i<CurrentSetting.Regions.length;i++){if(CurrentSetting.Regions[i].Resorts.length>0){htmlContent+="<div class='select-region-holder col-12'><div class='row'>";if(CurrentSetting.Regions[i].Resorts.length==1){htmlContent+="<div class='all-hotel-select col-12 text-uppercase region"+CurrentSetting.Regions[i].RegionID+"' data-val='"+CurrentSetting.Regions[i].RegionID+"'>"+CurrentSetting.Regions[i].RegionName+"</div>";htmlContent+="<div class='hotels-list row col-12'><div class='hotel-select col-12 col-lg-3 region"+CurrentSetting.Regions[i].RegionID+"'  data-val='"+CurrentSetting.Regions[i].Resorts[0].OptimaResortID+"_"+CurrentSetting.Regions[i].Resorts[0].Wing+":"+CurrentSetting.Regions[i].Resorts[0].DSN+"'>"+"<button class='hotelName' tabindex='0'>"+CurrentSetting.Regions[i].Resorts[0].ResortName+"</button></div></div>";}
else{htmlContent+="<div class='all-hotel-select col-12 text-uppercase region"+CurrentSetting.Regions[i].RegionID+"' data-val='"+CurrentSetting.Regions[i].RegionID+"'>"+CurrentSetting.Regions[i].RegionName+"</div>";htmlContent+="<div class='hotels-list row col-12'>";if(SearchEngine.EngineSetting.EnableRegionSearch&&CurrentSetting.Regions[i].Resorts.length>1){htmlContent+="<div tabindex=-1 class='hotel-select col-12 col-lg-3 region"+CurrentSetting.Regions[i].RegionID+"' data-val='"+CurrentSetting.Regions[i].RegionID+"'>"+"<button class='hotelName'>"+SearchEngine.Translations["hotelsIn"]+CurrentSetting.Regions[i].RegionName+"</button>"+"</div>";}
for(var j=0;j<CurrentSetting.Regions[i].Resorts.length;j++){htmlContent+=(CurrentSetting.Regions[i].Resorts[j].OptimaResortID!="0")?("<div class='hotel-select col-12 col-lg-3 region"+CurrentSetting.Regions[i].RegionID+"' data-val="+CurrentSetting.Regions[i].Resorts[j].OptimaResortID+"_"+CurrentSetting.Regions[i].Resorts[j].Wing+":"+CurrentSetting.Regions[i].Resorts[j].DSN+"'>"+"<button tabindex='0' class='hotelName'>"+CurrentSetting.Regions[i].Resorts[j].ResortName+"</button>"+"</div>"):("");}
htmlContent+="</div>";}
htmlContent+="</div></div>";}}}
else{htmlContent+="<div class='select-region-holder col-12'><div class='row'>";htmlContent+="<div class='hotels-list row col-12'>";for(var i=0;i<CurrentSetting.AllResorts.length;i++){htmlContent+=(CurrentSetting.AllResorts[i].OptimaResortID!="0")?("<div class='hotel-select col-12 col-lg-3' data-val="+CurrentSetting.AllResorts[i].OptimaResortID+"_"+CurrentSetting.AllResorts[i].Wing+":"+CurrentSetting.AllResorts[i].DSN+"'>"+"<span class='hotelName'>"+CurrentSetting.AllResorts[i].ResortName+"</span>"+"</div>"):("");}
htmlContent+="</div>";htmlContent+="</div></div>";}
htmlContent+="<div class='hotels-list-close-div d-md-none'><span class='cancel-btn'>"+SearchEngine.Translations["cancelLabel"]+"</span></div>";htmlContent+="</div></div>";}
else{htmlContent+="<select class= 'hotels-div' id=\"ddlHotels\" tilte=\""+SearchEngine.Translations["selectHotel"]+"\">";if(!SearchEngine.EngineSetting.HideDefaultOptionInSelect)
htmlContent+="<option value=\"0\" class=\"select-hotel-option\">"+
SearchEngine.Translations["selectHotel"]+
"</option>";if(SearchEngine.EngineSetting.AllRegionsSearch){var allRegionsId="9999";htmlContent+="<option class=\"all-regions\" value=\""+allRegionsId+"\">"+
SearchEngine.Translations["AllHotelsText"]+
"</option>";}
if(CurrentSetting.Regions&&CurrentSetting.Regions.length>0){for(var i=0;i<CurrentSetting.Regions.length;i++){if(SearchEngine.EngineSetting.EnableRegionSearch){if(CurrentSetting.Regions[i].Resorts.length>0){if(CurrentSetting.Regions[i].Resorts.length==1){if(SearchEngine.EngineSetting.BuildOptionGroup){htmlContent+="<optgroup label=\""+CurrentSetting.Regions[i].RegionName+"\">";}
else{htmlContent+="<option rel=\"group\" class=\"OnlyRegion\" >"+CurrentSetting.Regions[i].RegionName+"</option>";}
htmlContent+="<option class='hotel-select region"+CurrentSetting.Regions[i].RegionID+"'  value='"+CurrentSetting.Regions[i].Resorts[0].OptimaResortID+"_"+CurrentSetting.Regions[i].Resorts[0].Wing+":"+CurrentSetting.Regions[i].Resorts[0].DSN+"'>"+CurrentSetting.Regions[i].Resorts[0].ResortName+"</option>";}
else{if(SearchEngine.EngineSetting.BuildOptionGroup){htmlContent+="<optgroup label=\""+CurrentSetting.Regions[i].RegionName+"\">";}
htmlContent+="<option class='all-hotel-select col-12 region"+CurrentSetting.Regions[i].RegionID+"' value='"+CurrentSetting.Regions[i].RegionID+"'>"+SearchEngine.Translations["hotelsIn"]+CurrentSetting.Regions[i].RegionName+"</option>";for(var j=0;j<CurrentSetting.Regions[i].Resorts.length;j++){htmlContent+=(CurrentSetting.Regions[i].Resorts[j].OptimaResortID!="0")?("<option class='hotel-select region"+CurrentSetting.Regions[i].RegionID+"' value='"+CurrentSetting.Regions[i].Resorts[j].OptimaResortID+"_"+CurrentSetting.Regions[i].Resorts[j].Wing+":"+CurrentSetting.Regions[i].Resorts[j].DSN+"'>"+CurrentSetting.Regions[i].Resorts[j].ResortName+"</option>"):("");}}}}
else{if(CurrentSetting.Regions[i].Resorts.length>0){if(SearchEngine.EngineSetting.BuildOptionGroup){htmlContent+="<optgroup"+"label=\""+CurrentSetting.Regions[i].RegionName+"\">";for(var j=0;j<CurrentSetting.Regions[i].Resorts.length;j++){htmlContent+=(CurrentSetting.Regions[i].Resorts[j].OptimaResortID!="0")?("<option class='hotel-select region"+CurrentSetting.Regions[i].RegionID+"' value='"+CurrentSetting.Regions[i].Resorts[j].OptimaResortID+"_"+CurrentSetting.Regions[i].Resorts[j].Wing+":"+CurrentSetting.Regions[i].Resorts[j].DSN+"'>"+CurrentSetting.Regions[i].Resorts[j].ResortName+"</option>"):("");}
htmlContent+="</optgroup>";}
else{htmlContent+="<option rel=\"group\" class=\"OnlyRegion\">"+CurrentSetting.Regions[i].RegionName+"</option>";for(var j=0;j<CurrentSetting.Regions[i].Resorts.length;j++){htmlContent+=(CurrentSetting.Regions[i].Resorts[j].OptimaResortID!="0")?("<option class='hotel-select region"+CurrentSetting.Regions[i].RegionID+"' value='"+CurrentSetting.Regions[i].Resorts[j].OptimaResortID+"_"+CurrentSetting.Regions[i].Resorts[j].Wing+":"+CurrentSetting.Regions[i].Resorts[j].DSN+"'>"+CurrentSetting.Regions[i].Resorts[j].ResortName+"</option>"):("");}}}}}}
else{for(var i=0;i<CurrentSetting.AllResorts.length;i++){htmlContent+=(CurrentSetting.AllResorts[i].OptimaResortID!=="0")?("<option class='hotel-select' value='"+CurrentSetting.AllResorts[i].OptimaResortID+"_"+CurrentSetting.AllResorts[i].Wing+":"+CurrentSetting.AllResorts[i].DSN+"'>"+CurrentSetting.AllResorts[i].ResortName+"</option>"):("");}}
htmlContent+="</select></div>";}}
else{htmlContent+="<div class=\"selects\" id=\"selects\">"+
"<select id=\"destSelect\">";if(!SearchEngine.EngineSetting.HideDefaultOptionInSelect)
htmlContent+="<option value=\"0\">"+SearchEngine.Translations["SelectRegionOption"]+"</option>";for(var i=0;i<CurrentSetting.Regions.length;i++){htmlContent+="<option value=\""+CurrentSetting.Regions[i].RegionID+"\">"+CurrentSetting.Regions[i].RegionName+"</option>";}
htmlContent+="</select>";htmlContent+="<select id=\"hotelSelect\">";if(!SearchEngine.EngineSetting.HideDefaultOptionInSelect)
htmlContent+="<option value=\"0\">"+SearchEngine.Translations["selectHotel"]+"</option>";for(var i=0;i<CurrentSetting.AllResorts.length;i++){htmlContent+="<option value=\""+CurrentSetting.AllResorts[i].OptimaResortID+"_"+CurrentSetting.AllResorts[i].Wing+":"+CurrentSetting.AllResorts[i].DSN+"\">"+CurrentSetting.AllResorts[i].ResortName+"</option>";}
htmlContent+="</select></div>";}
htmlContent+="</div>";return htmlContent;}
function buildDatepickersArea(SearchEngine,QueryParams){var htmlContent="<div class=\"dates-holder\">"
+"<input type=\"text\" id=\"dates\" readonly />"+
"<span class='dates-text d-lg-none'>"+SearchEngine.Translations["searchDatesHeader"]+"</span>"+
"<div tabindex='0' class='dates-dispaly' >"+
"<span class='dates-sep'></span>"+
"<span class='check-in-date'  role='button'></span><span class='dates-sep'></span><span class='check-out-date'  role='button'></span><span class='date-price'></span>"+
"</div>";htmlContent+="</div>";htmlContent+='<div id="preview-area">'+
'</div>';return htmlContent;}
function RoomSummeryPanel(SearchEngine,QueryParams){var RoomSummeryPanelHtml='<div class="rooms-paxs-summery-holder"><span class="pax-label-title d-lg-none">'+SearchEngine.Translations["guestsText"]+'</span><span class="rooms-paxs-sep"></span>'+'<div class="rooms-paxs-summery" tabindex=\"0\" role=\"button\"></div></div>';if(SearchEngine.EngineSetting.UsePromoCode){var promoVal=(QueryParams.Promo?QueryParams.Promo:(SearchRequest&&SearchRequest.promocode?SearchRequest.promocode:''));RoomSummeryPanelHtml+='<div class="promo-holder'+(promoVal?" d-none":"")+'">'+
'<span class="promo-label '+(SearchEngine.EngineSetting.UseClickPromoCodeText?"":"d-none")+'">'+SearchEngine.Translations["PromoText"]+'</span>'+
'<div class="promo-input-holder'+(SearchEngine.EngineSetting.UseClickPromoCodeText?" d-none":"")+'"><input type="text" id="promo" placeholder="'+SearchEngine.Translations["PromoText"]+'"'+' value="'+promoVal+'" /></div>'+
'</div>'}
return RoomSummeryPanelHtml;}
function RoomSummeryPanelNew(SearchEngine,QueryParams){if(SearchEngine.EngineSetting.UsePromoCodeNew){var element=document.getElementById("booking-engine-holder");element.classList.add("usePromoCodeNew");let promoCodeText=SearchEngine.Translations["TextToOpenPromo"];var promoVal=(QueryParams.Promo?QueryParams.Promo:(SearchRequest&&SearchRequest.promocode?SearchRequest.promocode:''));return '<div class="new-promocode-box'+(promoVal?" d-none":"")+'"><a tabindex="0">'+promoCodeText+'</a>'+buildEnginepromoCode(SearchEngine,QueryParams,promoVal)+'</div>';}
return '';}
function buildEnginepromoCode(SearchEngine,QueryParams,promoVal){return '<div id=promoNew class="pppupPromo d-none">'+'<div class="promo-holder">'+
'<span class="promo-label '+(SearchEngine.EngineSetting.UseClickPromoCodeText?"":"d-none")+'">'+SearchEngine.Translations["TextToOpenPromo"]+'</span>'+
'<div class="promo-input-holder'+(SearchEngine.EngineSetting.UseClickPromoCodeText?" d-none":"")+'"><input type="text" id="promo" placeholder="'+SearchEngine.Translations["PromoText"]+'"'+' value="'+promoVal+'" /></div>'+
'</div>'+'<div class="BtnArea">'+'<btn tabindex="0" class="approvePromo">'+SearchEngine.Translations["ApprovePromoText"]+'</btn>'+'<btn tabindex="0"  class="cancelPromo">'+SearchEngine.Translations["cancelPromoText"]+'</btn>'+'</div>'+'</div>'}
function buildEngineBottomArea(searchEngine,QueryParams){var htmlContent="<div class=\"bottom-engine-holder\">";let buttonText=searchEngine.Translations["buttonSearch"];if(QueryParams.EditMode){buttonText=searchEngine.Translations["buttonSearchEdit"];}
htmlContent+="<div class=\"engine-button-row\">"+
"<input type=\"button\"  class=\"search-button\" value=\""+buttonText+"\" />"+
"<div class=\"bottom-banner\"></div>";htmlContent+="</div><div class=\"float-clear\"></div>";return htmlContent;}}
SearchEngine.prototype.BuildCalendarPopUpHtml=function(){var calendarPopupHtml='<div class="daterangepicker dropdown-menu"><div class="container">';calendarPopupHtml+=buildCalendarContent(this.SearchEngineSettings,this.QueryParams);function buildCalendarContent(SearchEngine,QueryParams){var htmlContent='<div   class="calendars-holder">'+
'<div class="side-content" >'+
'<div class="ranges" tabindex=0 aria-label= "'+SearchEngine.Translations["SelectDateCalendar"]+'">'+
'<div class="summery-dates">'+
'<div class="summery-nights"></div>'+
'<div class="summery-date check-in"><div class="part1"></div><div class="part2"></div></div>'+
'<div class="start-end-dates-seperator"></div>'+
'<div class="summery-date check-out"><div class="part1"></div><div class="part2"></div></div>'+
'<button class="close-desktop-calendar" aria-label= '+SearchEngine.Translations["CloseLabel"]+'></button>'+
'</div>'+
'</div>'+
'<div class="room-paxs-holder">'+
'<div class="rooms-paxs-step"><span class="number">2</span><span class="step-label"></span></div>'+
'<div class="room-paxs-content">'+
'<div class="popup-room-pax-container" data-rooms="1">'+
'</div>'+
'<div class="add-room-container">'+
'<span class="add-room-button-margin"></span>'+
'<button tabindex=0 class="add-room">'+SearchEngine.Translations["AddOneRoom"]+"</button>"+
'<span class="add-room-button-margin"></span>'+
'</div>'+
'</div>'+
'</div>'+
'<div class="submit-area">'+
'<div class="calendar-legend">'+
'<div class="legend-item legend-arrival"><span class="legend-icon"></span><span class="legend-text">'+SearchEngine.Translations["legendArrivalDate"]+'</span></div>'+
'<div class="legend-item legend-departure"><span class="legend-icon"></span><span class="legend-text">'+SearchEngine.Translations["legendDepartureDate"]+'</span></div>'+
'<div class="legend-item legend-available"><span class="legend-icon"></span><span class="legend-text">'+SearchEngine.Translations["legendAvailable"]+'</span></div>'+
'<div class="legend-item legend-notavailable"><span class="legend-icon"></span><span class="legend-text">'+SearchEngine.Translations["legendNotAvailable"]+'</span></div>'+
'<div class="legend-item legend-holiday">'+(SearchEngine.EngineSetting.UseHolidays?'<span class="legend-icon"></span><span class="legend-text">'+SearchEngine.Translations["legendHolidays"]+'</span>':'')+'</div>'+
'<div class="legend-item legend-special-deal"><span class="legend-icon"></span><span class="legend-text">'+SearchEngine.Translations["legendSpecialDeal"]+'</span></div>'+
'<div tabindex=0 class="price-commnet">'+(SearchEngine.EngineSetting.EnablePrices?SearchEngine.Translations["priceComment"]:"")+'</div>'+
'</div>'+
'<div class="toast-and-buttons row">'+
'<div class="toast toast-item min-nights-toast hide" data-autohide="true" data-animation="false"><div class="toast-header"></div><div  tabindex=0 class="toast-body"></div></div >'+
'<div class="toast toast-item holiday-toast hide"  data-autohide="true" data-animation="false"><div class="toast-header"></div><div  tabindex=0 class="toast-body"></div></div >'+
'<div  class="submit-buttons col-6">'+
'<span class="cancel-btn">'+'</span>'+
'<span class="rooms-paxs-cancel-btn">'+'</span>'+
'<input tabindex=0 type="button"  class="done-edit-button"  value="'+SearchEngine.Translations["endRoomsPaxsEdit"]+'" />'+
'</div>'+
'</div>'+
'</div>'+
'</div>'+
'<div class="calender-content">'+
'<div class="top-calendar-holder">'+
'<div class="days-holder"></div>'+
'<div class="dates-step"><span class="number">1</span><span class="step-label"></span></div>'+
'<div class="current-selected"></div>'+
'<div class="dates-and-reset-row">'+
'<div class="daterangepicker_input">'+
'<input class="input-mini form-control" type="text" name="daterangepicker_start" value="" />'+
'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+
'<div class="calendar-time">'+
'<div></div>'+
'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+
'</div>'+
'</div>'+
'<div class="daterangepicker_input">'+
'<input class="input-mini form-control" type="text" name="daterangepicker_end" value="" />'+
'<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>'+
'<div class="calendar-time">'+
'<div></div>'+
'<i class="fa fa-clock-o glyphicon glyphicon-time"></i>'+
'</div>'+
'</div>'+
'<span class="reset-button"></span>'+
'<div class="dates-label-inputs"><span class="dates-select-label">'+SearchEngine.Translations["selectDatesHeader"]+'</span><div class="start-date-label"><span class="date-label">'+SearchEngine.Translations["legendArrivalDate"]+'</span><span class="date-value"></span></div><div class="dates-sep"></div><div class="end-date-label"><span class="date-label">'+SearchEngine.Translations["legendDepartureDate"]+'</span><span class="date-value"></span></div></div>'+
'</div>'+
'</div>'+
'<div tabindex="0" class="calendar-tables-holder">'+
'</div>'+
'<div tabindex="0" class="bottom-calendar-holder"><span class="load-calendars"></span><button class="apply-btn" type="button"></button>'+
'<div id="more-month-area">'+
'<div class="sk-folding-cube">'+
'<div class="sk-cube1 sk-cube"></div>'+
'<div class="sk-cube2 sk-cube"></div>'+
'<div class="sk-cube4 sk-cube"></div>'+
'<div class="sk-cube3 sk-cube"></div>'+
'</div></div>'+
'</div>'+
'</div></div>';return htmlContent;}
calendarPopupHtml+="</div></div>";return calendarPopupHtml;}
SearchEngine.prototype.initVars=function(){const getReffromString=function(reffrom){if(typeof reffrom==='string'&&reffrom!==''){return reffrom;}
var cookie=$.cookie("RefCookie");if(cookie!=null&&cookie!=''){var reffromObj=parseQuery(cookie);if(typeof reffromObj.RefFrom==="string"&&reffromObj.RefFrom!==''){let pure_reffrom_no_origin=reffromObj.RefFrom.split('|');return pure_reffrom_no_origin[0];}}
return '';}
var self=this;self.datesData.minDateArr=new moment(self.QueryParams.Todaydate);self.datesData.minDateDep=new moment().add(self.QueryParams.NumberDepartureDaysFromToday,'days');defaultPax.Adults=self.SearchEngineSettings.EngineSetting.AdultSelect;defaultPax.Children=self.SearchEngineSettings.EngineSetting.ChildrenSelect;defaultPax.Infants=self.SearchEngineSettings.EngineSetting.InfantsSelect;if(are_cookies_enabled()){let reffromBuilder=[];let reffrom=getReffromString(GetUriParameter('reffrom'));let origin=GetUriParameter('origin');if(typeof reffrom==='string'&&reffrom!==''){reffromBuilder.push(reffrom);}
if(typeof origin==='string'&&origin!==''){reffromBuilder.push(origin);}
if(reffromBuilder.length){const expires=new Date();expires.setTime(+expires+1*864e+5);const path='/';const value="RefFrom="+reffromBuilder.join('|')+"&Referrer="+encodeURIComponent(document.referrer);document.cookie=[encodeURIComponent('RefCookie'),'=',encodeURIComponent(value),expires?'; expires='+expires.toUTCString():'',path?'; path='+path:''].join('');}}
if(self.SearchEngineSettings.EngineSetting.UseDivDisplayHotelSelection){initDivChosenHotelColor(self);}
if(self.SearchEngineSettings.EngineSetting.UseClickPromoCodeText){initClickPressPromoHolder();}
if(self.SearchEngineSettings.EngineSetting.UsePromoCodeNew){initNewPromocodeEvent();}
if(self.SearchEngineSettings.UseCountries){initCountries();if(self.SearchEngineSettings.EngineSetting.HideDefaultOptionInSelect&&(self.resID==""||self.resID=="-1"||self.resID=="0"))
self.resID=hotelsSelect.val();}
else if(self.SearchEngineSettings.EngineSetting.IsSingleHotel){self.resID=self.CurrentSetting.SingleResort.OptimaResortID+"_"+self.CurrentSetting.SingleResort.Wing+":"+self.CurrentSetting.SingleResort.DSN;setAvailibility(self);}
else{self.initMultiHotel();if(self.SearchEngineSettings.EngineSetting.HideDefaultOptionInSelect&&(self.resID==""||self.resID=="-1"||self.resID=="0"))
self.resID=hotelsSelect.val();}
$('.CloseComboError',self.$element).click(function(){hideComboError();});$('.search-button',self.$element).click(function(){PrepareForSubmit(self);});$('.search-button',self.$element).hover(function(){humanDetect();});$('.engine-header-close-button > i',self.$element).click(function(){if(typeof ToggleEngineBookingVisibility==='function'){ToggleEngineBookingVisibility();}})
if(self.SearchEngineSettings.EngineSetting.UseCustomTitles){$.page.entitle(".custom-title")}
if(typeof window.EngineReady!="undefined")
window.EngineReady(self.$element);if(CheckIfHotelSelectNeedToBeHide(self)){$('.resort-holder',self.$element).hide();}}
SearchEngine.prototype.initMultiHotel=function(){var self=this;if(!self.SearchEngineSettings.EngineSetting.ShowRegionDropDown){self.hotelsSelect=$("#ddlHotels",self.$element);if(self.resID==""||self.resID==0)
self.resID=self.QueryParams.CurrentResort?self.QueryParams.CurrentResort.OptimaResortID+"_"+self.QueryParams.CurrentResort.Wing+":"+self.QueryParams.CurrentResort.DSN:"";if(self.RegID==""||self.RegID==0)
self.RegID=self.QueryParams.CurrentRegion?self.QueryParams.CurrentRegion.RegionID:"";if(self.QueryParams.IsDealEngine||self.QueryParams.IsRoomEngine){$(self.hotelsSelect).parent().addClass("hidden");setAvailibility(self);}
else if(self.hotelsSelect.length>0){self.hotelsSelect.change(function(){SearchRequest=null;self.resID=$(this).val();if(self.resID.split(":").length>1)
setAvailibility(self);else{setStartDates(self);if($('.engine-holder',self.$element).hasClass('step-1')){$('.engine-holder',self.$element).removeClass('step-1').addClass('step-2');}}});if(self.resID!=""){self.hotelsSelect.val(self.resID);setAvailibility(self);}
else{if(self.RegID!=0){self.resID=self.RegID;self.isDefaultDates=false;self.hotelsSelect.val(self.RegID);if($('.engine-holder',self.$element).hasClass('step-1')){$('.engine-holder',self.$element).removeClass('step-1').addClass('step-2');}}
else if(GetUriParameter("allHotelsSearch")){self.resID="9999";self.hotelsSelect.val(self.resID);}
setStartDates(self);}}}
else{self.destSelect=$('#destSelect',self.$element);self.hotelsSelect=$("#hotelSelect",self.$element);if(!SearchRequest)
{if(self.resID==""||self.resID==0){self.resID=self.QueryParams.CurrentResort?self.QueryParams.CurrentResort.OptimaResortID+"_"+self.QueryParams.CurrentResort.Wing+":"+self.QueryParams.CurrentResort.DSN:"";hotelSelectChanged(self.resID);}
if(self.RegID==""||self.RegID==0){self.RegID=self.QueryParams.CurrentRegion?self.QueryParams.CurrentRegion.RegionID:"";destSelectChanged(self,self.RegID);setStartDates(self);}}
if(self.QueryParams.IsDealEngine||self.QueryParams.isRoomEngine){$(self.hotelsSelect).parent().addClass("hidden");setAvailibility(self);}
else if(self.destSelect.length>0&&self.hotelsSelect.length>0){$(self.destSelect).change(function(){self.destSelectChanged(self,$(this).val());});$(self.hotelsSelect).change(function(){hotelSelectChanged($(this).val());});if(SearchRequest){if(self.RegID!=""){destSelectChanged(self.RegID);setStartDates(self);}
else if(self.resID!=""){hotelSelectChanged(self,self.resID);}
else{self.resID=self.hotelsSelect.val();setStartDates(self);}}}}}
SearchEngine.prototype.initCountries=function(){var self=this;self.countrySelect=$("#countrySelect",self.$element);self.destSelect=$('#destSelect',self.$element);self.hotelsSelect=$("#hotelSelect",self.$element);if(!SearchRequest)
{if(self.resID==""||self.resID==0){self.resID=self.QueryParams.CurrentResort?self.QueryParams.CurrentResort.OptimaResortID+"_"+self.QueryParams.CurrentResort.Wing+":"+self.QueryParams.CurrentResort.DSN:"";hotelSelectChanged(self.resID);}
if(self.RegID==""||self.RegID==0){self.RegID=self.QueryParams.CurrentRegion?self.QueryParams.CurrentRegion.RegionID:"";destSelectChanged(self,self.RegID);setStartDates(self);}
if(self.conID==""||self.conID==0){self.conID=self.QueryParams.CurrentCountry?self.QueryParams.CurrentCountry.CountryId:"";countrySelectChanged(self,self.conID);}}
if(self.QueryParams.IsDealEngine||self.QueryParams.isRoomEngine){$(self.hotelsSelect).parent().addClass("hidden");setAvailibility(self);}
else if(self.countrySelect.length>0&&self.destSelect.length>0&&self.hotelsSelect.length>0){$(self.countrySelect).change(function(){countrySelectChanged(self,$(this).val());});$(self.destSelect).change(function(){destSelectChanged(self,$(this).val());});$(self.hotelsSelect).change(function(){hotelSelectChanged($(this).val());});if(self.RegID!=""){destSelectChanged(self,self.RegID);setStartDates(self);}
else if(self.resID!=""){hotelSelectChanged(self,self.resID);}
else{self.resID=hotelsSelect.val();setStartDates(self);}}}
$(document).ready(function InitEngineOnLoad(){$('[data-init="engine"]').each(function(){var $searchEngine=$(this);Plugin.call($searchEngine,$searchEngine.data());});});function initDateRange(self){var customDay=null;if(self.QueryParams.IsDealEngine){if(self.datesHolder){self.datesHolder=$('#dates',self.$element).data('daterangepicker').remove();}
$('#dates',self.$element).daterangepicker({locale:setDatePickerregional(self.SearchEngineSettings.Translations),template:self.BuildCalendarPopUpHtml(),autoApply:self.SearchEngineSettings.EngineSetting.AutoApplySelection,CloseCalendarOnCheckOutMobile:self.SearchEngineSettings.EngineSetting.CloseCalendarOnCheckOutMobile,MonthToShow:self.SearchEngineSettings.EngineSetting.MonthToShow,AddMonthToShow:self.SearchEngineSettings.EngineSetting.AddMonthToShow,resID:self.resID,resName:getResortName(self)});self.datesHolder=$('#dates',self.$element).data('daterangepicker');self.datesHolder.isMobile=isMobileByAgent(navigator.userAgent||navigator.vendor||window.opera);self.datesHolder.minDate=self.datesData.startDealDate.clone();self.datesHolder.maxDate=self.datesData.endDealDate.clone().add(-self.datesData.minDealDays,"days");$('#dates',self.$element).on('hide.daterangepicker',function(ev,picker){IndicateAnimation(self);});$('#dates',self.$element).on('rendercalendar.daterangepicker',function(ev,picker){if(picker.endDate===null){self.datesHolder.minDate=self.datesHolder.startDate.clone();self.datesHolder.maxDate=self.datesData.endDealDate.clone();setDealDateDeparture(self.datesHolder.startDate.clone(),self);self.datesHolder.isInvalidDate=function(date){var obj={isClose:ifIsClosedDate(date,self.datesData._dealClosedDatesToDeparture),errorMsg:self.SearchEngineSettings.Translations.soldoutDeal};return obj;};}
else{self.datesHolder.minDate=self.datesData.startDealDate;self.datesHolder.maxDate=self.datesData.endDealDate.clone().add(-self.datesData.minDealDays,"days");self.datesHolder.isInvalidDate=function(date){var obj={isClose:ifIsClosedDate(date,self.datesData._dealClosedDates),errorMsg:self.SearchEngineSettings.Translations.soldoutDeal}
return obj;};}});self.datesHolder.initRoomsAndPaxs(self,SearchRequest);self.datesHolder.isCustomDate=function(date){var cssClasses="";if(self.SearchEngineSettings.EngineSetting.UseHolidays){customDay=getHolidayDay(date,self);if(customDay)
cssClasses+="holiday-day";}
if(self.SearchEngineSettings.EngineSetting.ShowDealsOnCalendar){var DealDay=getdealDay(date,self);if(DealDay){customDay+=DealDay;cssClasses+=" deal-day";}}
return cssClasses;};self.datesHolder.getDayTitle=function(date){return getMinNightsAndBookingTitle(self,date.startOf("day"),customDay);};self.datesHolder.getDayPrice=function(date,addcustomHtml){return "";};if(self.SearchEngineSettings.DisableHotelAvailibilyInDeals)
self.SearchEngineSettings.EnableAutoPaxUpdate=false;setDealDateDeparture(self.datesData.startDealDate,self,true);}
else{var currentStartDate=null;var currentEndDate=null;if(self.datesHolder){if(!moment(self.datesHolder.startDate.format('YYYY-MM-DD')).isSame(self.datesData.minDateArr.format('YYYY-MM-DD'))||!moment(self.datesHolder.endDate.format('YYYY-MM-DD')).isSame(self.datesData.minDateDep.format('YYYY-MM-DD'))){currentStartDate=self.datesHolder.startDate;currentEndDate=self.datesHolder.endDate;}
self.datesHolder=$('#dates',self.$element).data('daterangepicker').remove();}
$('#dates',self.$element).daterangepicker({locale:setDatePickerregional(self.SearchEngineSettings.Translations),template:self.BuildCalendarPopUpHtml(),autoApply:self.SearchEngineSettings.EngineSetting.AutoApplySelection,CloseCalendarOnCheckOutMobile:self.SearchEngineSettings.EngineSetting.CloseCalendarOnCheckOutMobile,MonthToShow:self.SearchEngineSettings.EngineSetting.MonthToShow,AddMonthToShow:self.SearchEngineSettings.EngineSetting.AddMonthToShow,resID:self.resID,resName:getResortName(self)});self.datesHolder=$('#dates',self.$element).data('daterangepicker');self.datesHolder.isMobile=isMobileByAgent(navigator.userAgent||navigator.vendor||window.opera);self.datesData.defaultMaxDate=typeof self.SearchEngineSettings.EngineSetting.OpenDaysCount!=='undefined'&&self.SearchEngineSettings.EngineSetting.OpenDaysCount!=0?self.datesData.minDateArr.clone().add(self.SearchEngineSettings.EngineSetting.OpenDaysCount,'days'):self.datesData.minDateArr.clone().add(1000,'days');self.datesHolder.minDate=self.datesData.minDateArr;self.datesHolder.maxDate=self.datesData.defaultMaxDate;$('#dates',self.$element).on('hide.daterangepicker',function(ev,picker){IndicateAnimation(self);});$('#dates',self.$element).on('rendercalendar.daterangepicker',function(ev,picker){if(picker.endDate===null){self.datesHolder.minDate=self.datesHolder.startDate;self.datesHolder.minDate=findMinDateOpen(self.datesHolder.startDate,self.datesData.curAvailibility,self.datesData._closedDatesToDeparture,self.datesData._closedDatesNotAvail);self.datesHolder.maxDate=findMaxDateOpen(self,self.datesHolder.minDate,self.datesData._closedDatesNotAvail,self.datesData._closedDatesToDeparture);self.datesHolder.isInvalidDate=function(date){var obj={isClose:ifIsClosedDate(date,self.datesData._closedDatesToDeparture,null,self.datesHolder.minDate),errorMsg:self.SearchEngineSettings.Translations.soldoutDep};return obj;};if($('.engine-holder',self.$element).hasClass('step-2')){$('.engine-holder',self.$element).removeClass('step-2').addClass('step-3');}}
else{self.datesHolder.minDate=self.datesData.minDateArr;self.datesHolder.maxDate=self.datesData.defaultMaxDate;self.datesHolder.isInvalidDate=function(date){var obj={isClose:ifIsClosedDate(date,self.datesData._closedDates),errorMsg:""};if(obj.isClose)
{var arrDate=findDateInArray(date.startOf("day"),self.datesData._closedDatesNotAvail);if(arrDate){obj.errorMsg=self.SearchEngineSettings.Translations.soldout}
else{obj.errorMsg=self.SearchEngineSettings.Translations.soldoutArr}}
return obj;};}});self.datesHolder.initRoomsAndPaxs(self,SearchRequest);self.datesHolder.isCustomDate=function(date){var cssClasses="";if(self.SearchEngineSettings.EngineSetting.UseHolidays){customDay=getHolidayDay(date,self);if(customDay)
cssClasses+="holiday-day";}
if(self.SearchEngineSettings.EngineSetting.ShowDealsOnCalendar){var DealDay=getdealDay(date,self);if(DealDay){customDay+=DealDay;cssClasses+=" deal-day";}}
return cssClasses;};self.datesHolder.getDayTitle=function(date){return getMinNightsAndBookingTitle(self,date.startOf("day"),customDay);};self.datesHolder.getDayPrice=function(date,addcustomHtml){return getPriceByDate(self,date.startOf("day"),addcustomHtml);}
if(SearchRequest&&self.isCurrentSearchDates){self.isCurrentSearchDates=false;self.isDefaultDates=false;setDatesToDatepicker(self,SearchRequest.in,SearchRequest.out,self.datesData._closedDates);self.datesHolder.DatesFromSearchRequest=true;}
else{if(self.isDefaultDates){self.isDefaultDates=false;setDatesToDatepicker(self,self.datesData.minDateArr,null,self.datesData._closedDates);}
else{if(currentStartDate!=null&&currentEndDate!=null)
{if(ifIsClosedDate(currentStartDate,self.datesData._closedDates)||ifIsClosedDate(currentEndDate,self.datesData._closedDatesToDeparture)||moment(findMaxDateOpen(self,findMinDateOpen(currentStartDate.clone(),self.datesData.curAvailibility,self.datesData._closedDatesToDeparture,self.datesData._closedDatesNotAvail).clone(),self.datesData._closedDatesNotAvail,self.datesData._closedDatesToDeparture).format("YYYY-MM-DD")).isSameOrBefore(currentEndDate.format("YYYY-MM-DD")))
{if(self.SearchEngineSettings.Translations["DatesNotAvilInCurrentHotel"]!=""&&self.SearchEngineSettings.Translations["DatesNotAvilInCurrentHotel"].indexOf("hotel")>-1&&self.SearchEngineSettings.Translations["DatesNotAvilInCurrentHotel"].indexOf("dates")>-1)
alert(self.SearchEngineSettings.Translations["DatesNotAvilInCurrentHotel"].replace('{hotel}',getResortName(self)).replace('{dates}',(currentStartDate.format("DD.MM.YYYY")+" - "+currentEndDate.format("DD.MM.YYYY"))));setDatesToDatepicker(self,self.datesData.minDateArr,null,self.datesData._closedDates);}
else{setDatesToDatepicker(self,currentStartDate,currentEndDate,self.datesData._closedDates);}}
else
{setDatesToDatepicker(self,self.datesData.minDateArr,null,self.datesData._closedDates);}}
SearchRequest=null;}}
$('.dates-dispaly',self.$element).on('keydown.daterangepicker',function(e){if(e.keyCode===13){console.log(e);$('#dates',self.$element).trigger('click');}});hideLoading("datepicker",self.$element);}
function setDatesToDatepicker(self,start,end,_closedDates){self.datesHolder.setStartDate(moveToFirstOpenDate(start.clone(),self.datesData._closedDates));var minDate=findMinDateOpen(self.datesHolder.startDate.clone(),self.datesData.curAvailibility,self.datesData._dealClosedDatesToDeparture);var minArrDate=moveToFirstOpenDate(self.datesData.minDateArr.clone(),self.datesData._closedDates);self.datesHolder.minDate=minArrDate;if(end)
self.datesHolder.setEndDate(end);else
self.datesHolder.setEndDate(minDate);}
function findMinDateOpen(selecteddate,curAvailibility,_closedDatesToDeparture,_closedDatesNoAvail){var minDays=null;var currentDayObj=findDateInArray(selecteddate,curAvailibility);if(currentDayObj)
minDays=currentDayObj.MinLOS;var temp=selecteddate.clone();for(var i=0;i<minDays;i++){temp.add(1,"days");}
for(var i=0;i<_closedDatesToDeparture.length;i++){if(moment(temp.format('YYYY-MM-DD')).isSame(_closedDatesToDeparture[i].format('YYYY-MM-DD'))){if(checkDepartureDate(temp,_closedDatesNoAvail)){break;}
else{temp.add(1,"days");}}}
if(moment(temp.format('YYYY-MM-DD')).isSame(selecteddate.format('YYYY-MM-DD')))
return temp.add(1,"days");else
return temp;}
function findMaxDateOpen(self,nowDate,_closedDatesNotAvail,_closedDatesToDeparture){var temp=nowDate;var defaultMaxDate=self.datesData.defaultMaxDate;var foundClosedDay=false;for(var i=0;i<_closedDatesNotAvail.length;i++){if(moment(temp.format('YYYY-MM-DD')).isSameOrBefore(_closedDatesNotAvail[i].format('YYYY-MM-DD'))){temp=_closedDatesNotAvail[i].clone();if(checkDepartureDate(temp,_closedDatesToDeparture)){temp.add(1,"days");}
else{defaultMaxDate=temp;}
foundClosedDay=true;break;}}
if(!moment(temp.format('YYYY-MM-DD')).isSame(nowDate.format('YYYY-MM-DD')))
defaultMaxDate=temp;if(self.SearchEngineSettings.EngineSetting.MaxDaysToSelectDepartureDate&&self.datesHolder.startDate){var maxDaysDate=self.datesHolder.startDate.clone().add(self.SearchEngineSettings.EngineSetting.MaxDaysToSelectDepartureDate,"days");if(moment(maxDaysDate.format('YYYY-MM-DD')).isSameOrBefore(moment(temp.format('YYYY-MM-DD')))||moment(temp.format('YYYY-MM-DD')).isSame(moment(nowDate.format('YYYY-MM-DD')))&&!foundClosedDay){defaultMaxDate=maxDaysDate;}}
return defaultMaxDate;}
function checkDepartureDate(date,_closedDatesAvail){var check=false;for(var i=0;i<_closedDatesAvail.length;i++){if(moment(date.format("YYYY-MM-DD")).isSame(moment(_closedDatesAvail[i]).format("YYYY-MM-DD"))){check=true;}}
return check;}
function IndicateAnimation(self){var btnEl=$('.search-button',self.$element);btnEl.removeClass('animate-indication');void btnEl[0].offsetWidth;btnEl.addClass('animate-indication');}
function findMinDateOpenDeal(nowDate,minDays,self){var tempminDays=minDays;if(!self.SearchEngineSettings.EngineSetting.DisableHotelMinNightsInDeals){var currentDayObj=findDateInArray(nowDate,self.datesData.dealCurAvailibility);if(currentDayObj)
tempminDays=currentDayObj.MinLOS;if(minDays<tempminDays)
minDays=tempminDays;}
var temp=nowDate.clone();if(minDays&&minDays>1){for(var i=1;i<minDays;i++){temp.add(1,"days");if(ifIsClosedDate(temp,self.datesData._dealClosedDatesToDeparture,self.datesData.endDealDate)){return nowDate;}}
return temp.add(1,"days");}
else{return nowDate.add(1,"days");}}
function setDealClosedDatesRender(self){self.datesData._dealClosedDates=new Array();self.datesData._dealClosedDatesToDeparture=new Array();var count=self.datesData.dealCurAvailibility.length;var date;for(var i=0;i<count;i++){date=new moment(self.datesData.dealCurAvailibility[i].Date);if(moment(date.format("YYYY-MM-DD")).isBefore(moment(self.datesData.startDealDate.format("YYYY-MM-DD")))){self.datesData._dealClosedDates.push(date);continue;}
if(self.datesData.dealCurAvailibility[i].Closed===true||self.datesData.dealCurAvailibility[i].ClosedForArrival===true){self.datesData._dealClosedDates.push(date);}
else{if(self.QueryParams.DealToShow["c_arrive_on_"+date.day()]=="0"||self.QueryParams.DealToShow["c_valid_on_"+date.day()]==="0"){self.datesData._dealClosedDates.push(date);}
else
if(isNextDateCanBeAvail(date,i,self)||isNextDateisValidDealDay(date,i,self)){self.datesData._dealClosedDates.push(date);}}
if(self.datesData.dealCurAvailibility[i].Closed===true||self.datesData.dealCurAvailibility[i].ClosedForDeparture===true){self.datesData._dealClosedDatesToDeparture.push(date);}
else{if(self.QueryParams.DealToShow["c_valid_on_"+date.day()]==="0"){self.datesData._dealClosedDatesToDeparture.push(date);}}
if(moment(date.format("YYYY-MM-DD")).isAfter(moment(self.datesData.endDealDate.format("YYYY-MM-DD")))){break;}}}
function isNextDateCanBeAvail(date,i,self){var tempMinDays=self.datesData.minDealDays;if(!self.SearchEngineSettings.EngineSetting.DisableHotelAvailibilyInDeals&&self.datesData.dealCurAvailibility[i].MinDays>self.datesData.minDealDays&&!self.SearchEngineSettings.EngineSetting.DisableHotelMinNightsInDeals)
tempMinDays=self.datesData.dealCurAvailibility[i].MinLOS;for(var j=0;j<tempMinDays-1&&i<self.datesData.dealCurAvailibility.length-tempMinDays;j++){if(self.datesData.dealCurAvailibility[i+(j+1)].Closed===true)
return true;}
return false;}
function isNextDateisValidDealDay(date,i,self){var tempMinDays=self.datesData.minDealDays;if(!self.SearchEngineSettings.EngineSetting.DisableHotelAvailibilyInDeals&&self.datesData.dealCurAvailibility[i].MinDays>self.datesData.minDealDays&&!self.SearchEngineSettings.EngineSetting.DisableHotelMinNightsInDeals)
tempMinDays=self.datesData.dealCurAvailibility[i].MinDays;for(var j=1;j<tempMinDays;j++){var temp=date.clone().add(j,"days");if(self.QueryParams.DealToShow["c_valid_on_"+temp.day()]=="0")
return true;}
return false;}
function setDealDateDeparture(date,self,end){if(self.datesData.departureClosedDaysChanged){if(!self.SearchEngineSettings.EngineSetting.DisableHotelAvailibilyInDeals)
setDealClosedDatesRender(self);else
initDealClosedDatesWithoutHotel(self);}
self.datesHolder.setStartDate(moveToFirstOpenDate(date,self.datesData._dealClosedDates,self.datesData.endDealDate));self.datesHolder.minDate=self.datesHolder.startDate.clone();if(moment(date.clone().add(self.datesData.maxDealDays,"days").format("YYYY-MM-DD")).isSameOrAfter(moment(self.datesHolder.maxDate.format("YYYY-MM-DD")))){self.datesHolder.maxDate=date.clone().add(self.datesData.maxDealDays,"days");}
if(moment(date.clone().add(self.datesData.maxDealDays,"days").format("YYYY-MM-DD")).isSameOrAfter(moment(self.datesData.endDealDate.format("YYYY-MM-DD")))){self.datesHolder.maxDate=self.datesData.endDealDate;}
else if(self.datesHolder.endDate==null){self.datesHolder.maxDate=date.clone().add(self.datesData.maxDealDays,"days");}
var temp=date.clone();for(var i=1;moment(temp.format("YYYY-MM-DD")).isBefore(moment(self.datesHolder.maxDate.format("YYYY-MM-DD")));i++){temp=date.clone().add(i,"days");if(self.QueryParams.DealToShow["c_valid_on_"+temp.day()]=="0"){self.datesHolder.maxDate=temp;break;}}
removeDateFromCloseToDeparture(temp,self);if(end){self.datesHolder.setEndDate(findMinDateOpenDeal(self.datesHolder.minDate,self.datesData.minDealDays,self));}}
function removeDateFromCloseToDeparture(date,self){for(var i=0;i<self.datesData._dealClosedDatesToDeparture.length;i++){if(moment(date.format("YYYY-MM-DD")).isSameOrBefore(moment(self.datesData._dealClosedDatesToDeparture[i].format("YYYY-MM-DD")))){if(moment(self.datesHolder.maxDate.format("YYYY-MM-DD")).isBefore(moment(self.datesData._dealClosedDatesToDeparture[i].format("YYYY-MM-DD"))))
break;self.datesHolder.maxDate=self.datesData._dealClosedDatesToDeparture[i];self.datesData._dealClosedDatesToDeparture.splice(i,1);self.datesData.departureClosedDaysChanged=true;break;}}}
function showLoading(type,element){switch(type){case "datepicker":{$('.dates-holder',element).css('visibility','hidden');$('#preview-area',element).css('visibility','visible');}}}
function hideLoading(type,element){switch(type){case "datepicker":{$('.dates-holder',element).css('visibility','visible');$('#preview-area',element).css('visibility','hidden');}}}
function setDatePickerregional(Translations){return{"direction":Translations.direction,"separator":Translations.separator,"format":Translations.format,"applyLabel":Translations.applyLabel,"cancelLabel":Translations.cancelLabel,"fromLabel":Translations.fromLabel,"toLabel":Translations.toLabel,"customRangeLabel":Translations.customRangeLabel,"weekLabel":Translations.weekLabel,"daysOfWeek":Translations.daysOfWeek.split(","),"daysOfWeekfull":Translations.daysOfWeekfull.split(","),"monthNames":Translations.monthNames.split(","),"firstDay":parseInt(Translations.firstDay),"checkInLabel":Translations.SearchArrivalDate,"checkOutLabel":Translations.SearchDepartureDate,"nights":Translations.TotalNightsText,"reset":Translations.reset,"searchDatesHeader":Translations.searchDatesHeader,"selectGuetsStep":Translations.selectGuestStep,"hotelSelectError":Translations.HotelSelectError,"paxsError":Translations.paxsError,"selectCheckInDate":Translations.selectCheckInDate,"selectCheckOutDate":Translations.selectCheckOutDate,"datesLabelFormat":Translations.datesLabelFormat,"PrevMonth":Translations.PrevMonth,"NextMonth":Translations.NextMonth};}
function setStartDates(self){clearDatesData(self);initDateRange(self);}
function clearDatesData(self){self.datesData={curAvailibility:new Array(),dealCurAvailibility:new Array(),minDateArr:new moment(),minDateDep:new moment().add(1,'days'),defaultMaxDate:null,minDays:1,_closedDates:new Array(),_closedDatesToDeparture:new Array(),_closedDatesNotAvail:new Array(),_dealClosedDates:new Array(),_dealClosedDatesToDeparture:new Array(),startDealDate:null,endDealDate:null,minDealDays:null,maxDealDays:null,paxCombintaion:null,departureClosedDaysChanged:false,}}
function setAvailibility(self){if(self.SearchEngineSettings.EngineSetting.DisableAPIData&&!self.QueryParams.IsDealEngine){setStartDates(self);return;}
if(self.QueryParams.IsDealEngine&&self.SearchEngineSettings.EngineSetting.DisableHotelAvailibilyInDeals){initDealClosedDatesWithoutHotel(self);initDateRange(self);return;}
showLoading("datepicker",self.$element);var HotelsParam=self.resID.split(':');var resortId=HotelsParam[0];var wing=null;if(HotelsParam[0].indexOf("_")>-1){resortId=HotelsParam[0].split("_")[0];wing=HotelsParam[0].split("_")[1];}
var dsn="";if(HotelsParam.length>1){dsn=HotelsParam[1];}
var days=self.SearchEngineSettings.EngineSetting.DaysCount;var dataobject={};dataobject.hotelID=resortId;dataobject.wing=true;dataobject.dsn=dsn;dataobject.lang=self.QueryParams.Lang;dataobject.days=days;dataobject.chainId=self.QueryParams.ChainId;var currentHotel=findHotel(self.CurrentSetting,HotelsParam[0]);if(currentHotel&&currentHotel.HotelsCloudID)
dataobject.HotelsCloudID=currentHotel.HotelsCloudID
dataobject.priceCodeCategoryIDList=self.QueryParams.PriceCodeCategoryIDList&&self.QueryParams.PriceCodeCategoryIDList!=null?self.QueryParams.PriceCodeCategoryIDList:null;if(self.QueryParams.IsDealEngine){if(typeof self.QueryParams.DealToShow==="undefined"||self.QueryParams.DealToShow==null){hideLoading("datepicker");$('.datepickers',self.$element).html("");console.error("error in deal engine, cannot load deal");return;}
self.datesData.startDealDate=new moment(self.QueryParams.DealToShow.StartDate);self.datesData.endDealDate=new moment(self.QueryParams.DealToShow.EndDate);var leadDaysToArrival=parseInt(self.QueryParams.DealToShow.LeadDaysToArrival);var nowDateDeal=self.datesData.minDateArr.clone();if(moment(self.datesData.startDealDate.format("YYYY-MM-DD")).isBefore(moment(nowDateDeal.format("YYYY-MM-DD")))){self.datesData.startDealDate=nowDateDeal;self.datesData.startDealDate.add(leadDaysToArrival,"days");}
else if(moment(nowDateDeal.add(leadDaysToArrival,"days").format("YYYY-MM-DD")).isSameOrAfter(moment(self.datesData.startDealDate.format("YYYY-MM-DD")))){self.datesData.startDealDate=nowDateDeal;}
dataobject.fromdate=self.datesData.startDealDate.format("YYYY-MM-DD");dataobject.enddate=self.datesData.endDealDate.format("YYYY-MM-DD");if(dataobject.fromdate===dataobject.enddate){hideLoading("datepicker");$('.engine-holder',self.$element).html("");console.error("error in deal engine, start and end date are the same");return;}}
else{dataobject.fromdate=null;dataobject.enddate=null;}
JqueryAjax({url:self.SearchEngineSettings.CustomAvailibilityFuncLink?self.SearchEngineSettings.CustomAvailibilityFuncLink:self.SearchEngineSettings.ApiPrefixUrl+"/getAllData",data:JSON.stringify({gap:dataobject}),successfun:function(obj){var result=obj.d||obj;if(self.SearchEngineSettings.ShowDebugData)
console.log(result);if(result.CalendarItems!==null){if(self.QueryParams.IsDealEngine){self.datesData.dealCurAvailibility=result.CalendarItems;self.datesData.paxCombintaion=result.Pax;self.datesData.maxPax=result.MaxPax;if(self.datesData.paxCombintaion===undefined||self.datesData.paxCombintaion.length===0)
self.SearchEngineSettings.EngineSetting.EnableAutoPaxUpdate=false;self.datesData.minDealDays=self.QueryParams.DealToShow.MinDays;self.datesData.maxDealDays=self.QueryParams.DealToShow.MaxDays;var nowDateDeal=self.datesData.minDateArr;if(moment(self.datesData.startDealDate.format("YYYY-MM-DD")).isBefore(nowDateDeal.format("YYYY-MM-DD"))){self.datesData.startDealDate=nowDateDeal.clone();}
if(!self.SearchEngineSettings.EngineSetting.DisableAvailibility)
setDealClosedDatesRender(self);initDateRange(self);}
else{self.datesData.curAvailibility=result.CalendarItems;self.datesData.paxCombintaion=result.Pax;self.datesData.maxPax=result.MaxPax;if(self.datesData.paxCombintaion&&self.datesData.paxCombintaion.length===0)
self.SearchEngineSettings.EngineSetting.EnableAutoPaxUpdate=false;if(!self.SearchEngineSettings.EngineSetting.DisableAvailibility)
setClosedDates(self);initDateRange(self);}}
else{setStartDates(self);}
hideLoading("datepicker");},errorfunc:function(e){setStartDates(self);hideLoading("datepicker");}});if($('.engine-holder').hasClass('step-1')){$('.engine-holder').removeClass('step-1').addClass('step-2');}}
function setClosedDates(self){self.datesData._closedDates=new Array();self.datesData._closedDatesToDeparture=new Array();self.datesData._closedDatesNotAvail=new Array();for(var i=0;i<self.datesData.curAvailibility.length;i++){var date=new moment(self.datesData.curAvailibility[i].Date);if(self.datesData.curAvailibility[i].Closed===true||self.datesData.curAvailibility[i].ClosedForArrival===true||checkNextDaysReg(self.datesData.curAvailibility,i)){self.datesData._closedDates.push(date);}
if(self.datesData.curAvailibility[i].ClosedForDeparture===true){self.datesData._closedDatesToDeparture.push(date);}
if(self.datesData.curAvailibility[i].Closed===true){self.datesData._closedDatesNotAvail.push(date);}}}
function initDealClosedDatesWithoutHotel(self){self.datesData.startDealDate=new moment(self.QueryParams.DealToShow.StartDate);self.datesData.endDealDate=new moment(self.QueryParams.DealToShow.EndDate);var leadDaysToArrival=parseInt(self.QueryParams.DealToShow.LeadDaysToArrival);var nowDateDeal=self.datesData.minDateArr.clone();if(moment(self.datesData.startDealDate.format("YYYY-MM-DD")).isBefore(moment(nowDateDeal.format("YYYY-MM-DD")))){self.datesData.startDealDate=nowDateDeal;self.datesData.startDealDate.add(leadDaysToArrival,"days");}
else if(moment(nowDateDeal.add(leadDaysToArrival,"days").format("YYYY-MM-DD")).isSameOrAfter(moment(self.datesData.startDealDate.format("YYYY-MM-DD")))){self.datesData.startDealDate=nowDateDeal;}
self.datesData.minDealDays=self.QueryParams.DealToShow.MinDays;self.datesData.maxDealDays=self.QueryParams.DealToShow.MaxDays;self.datesData._dealClosedDates=new Array();self.datesData._dealClosedDatesToDeparture=new Array();var date=self.datesData.minDateArr.clone();for(var i=0;moment(date.format("YYYY-MM-DD")).isBefore(moment(self.datesData.endDealDate).format("YYYY-MM-DD"));i++){date=self.datesData.startDealDate.clone().add(i,"days");if(self.QueryParams.DealToShow["c_arrive_on_"+date.day()]=="0"){self.datesData._dealClosedDates.push(date.clone());}
else
if(isNextDateisInvalidDealDay(date,i,self))
self.datesData._dealClosedDates.push(date.clone());if(self.QueryParams.DealToShow["c_valid_on_"+date.day()]=="0"){self.datesData._dealClosedDatesToDeparture.push(date.clone());}
if(moment(date.format("YYYY-MM-DD")).isAfter(moment(self.datesData.endDealDate).format("YYYY-MM-DD"))){break;}}}
function isNextDateisInvalidDealDay(date,i,self){var tempMinDays=self.datesData.minDealDays;if(!self.SearchEngineSettings.EngineSetting.DisableHotelAvailibilyInDeals&&self.datesData.dealCurAvailibility&&self.datesData.dealCurAvailibility[i].MinDays>self.datesData.minDealDays&&!self.SearchEngineSettings.EngineSetting.DisableHotelMinNightsInDeals)
tempMinDays=self.datesData.dealCurAvailibility[i].MinDays;for(var j=1;j<tempMinDays;j++){var temp=date.clone().add(j,"days");if(self.QueryParams.DealToShow["c_valid_on_"+temp.day()]=="0")
return true;}
return false;}
function checkNextDaysReg(curAvailibility,i){var minDays=curAvailibility[i].MinLOS;if(minDays>1){for(var k=0;k<minDays-1;k++){if((k+i+1)<curAvailibility.length){if(curAvailibility[k+i+1].Closed)
return true;}}}
return false;}
function ifIsClosedDate(date,closedDatesArr,endDealDate,mindate){if(endDealDate&&date.isAfter(endDealDate)>0)
return true;if(!closedDatesArr||closedDatesArr.length==0)
return false;if(date.clone().add(1).isBefore(closedDatesArr[0])<0)
return false;if(moment(date.format('YYYY-MM-DD')).isAfter(closedDatesArr[closedDatesArr.length-1].format('YYYY-MM-DD')>0)){return false;}
if(mindate&&moment(mindate.format('YYYY-MM-DD')).isSame(date.format('YYYY-MM-DD'))){return false;}
for(var i=0;i<closedDatesArr.length;i++){if(date.clone().add(1).isBefore(closedDatesArr[i])<0){return false;}
else if(moment(date.format('YYYY-MM-DD')).isSame(closedDatesArr[i].format('YYYY-MM-DD'))){return true;}}
return false;}
function initDealFromData(deal,self){if(typeof deal!="undefined"){self.QueryParams.IsDealEngine=true;self.QueryParams.DealId=deal.c_pack_code_serial_number;self.QueryParams.DealToShow=new Object();self.QueryParams.DealToShow.StartDate=deal.c_start_date;self.QueryParams.DealToShow.EndDate=deal.c_end_date;self.QueryParams.DealToShow.MinDays=deal.c_min_days;self.QueryParams.DealToShow.MaxDays=deal.c_max_days;self.QueryParams.DealToShow.LeadDaysToArrival=deal.c_lead_days_to_arrival?deal.c_lead_days_to_arrival:0;self.QueryParams.DealToShow.c_valid_on_0=deal.c_valid_on_sun;self.QueryParams.DealToShow.c_valid_on_1=deal.c_valid_on_mon;self.QueryParams.DealToShow.c_valid_on_2=deal.c_valid_on_tue;self.QueryParams.DealToShow.c_valid_on_3=deal.c_valid_on_wed;self.QueryParams.DealToShow.c_valid_on_4=deal.c_valid_on_thu;self.QueryParams.DealToShow.c_valid_on_5=deal.c_valid_on_fri;self.QueryParams.DealToShow.c_valid_on_6=deal.c_valid_on_sut;self.QueryParams.DealToShow.c_arrive_on_0=deal.c_arrive_on_sun;self.QueryParams.DealToShow.c_arrive_on_1=deal.c_arrive_on_mon;self.QueryParams.DealToShow.c_arrive_on_2=deal.c_arrive_on_tue;self.QueryParams.DealToShow.c_arrive_on_3=deal.c_arrive_on_wed;self.QueryParams.DealToShow.c_arrive_on_4=deal.c_arrive_on_thu;self.QueryParams.DealToShow.c_arrive_on_5=deal.c_arrive_on_fri;self.QueryParams.DealToShow.c_arrive_on_6=deal.c_arrive_on_sut;if(!self.QueryParams.CurrentResort)
self.resID=deal.c_hotel+"_"+deal.c_wing+":"+deal.DSN;}}
function moveToFirstOpenDate(date,closedDatesArr,endDealDate){while(ifIsClosedDate(date,closedDatesArr,endDealDate)){if(endDealDate&&date.isAfter(endDealDate))
return date;date.add(1,"days");}
return date;}
function getMinNightsAndBookingTitle(self,date,customDate){var dayItem={};var holidaytitle=null;var currentDayObj;if(customDate){holidaytitle=customDate.replace('"',"&quot");}
var minNigthTranslate="title='"+(holidaytitle?holidaytitle+" - ":"")+self.SearchEngineSettings.Translations["SearchTooltip"]+"'";if(self.QueryParams.IsDealEngine&&(self.SearchEngineSettings.EngineSetting.DisableHotelMinNightsInDeals||self.SearchEngineSettings.EngineSetting.DisableHotelAvailibilyInDeals||(self.datesData.dealCurAvailibility&&self.datesData.dealCurAvailibility.length===0)))
{if(self.datesData.minDealDays>1){dayItem.title=minNigthTranslate.replace('{0}',self.datesData.minDealDays);dayItem.holidayTitle=holidaytitle;dayItem.minTitle=self.SearchEngineSettings.Translations["SearchTooltip"].replace('{0}',self.datesData.minDealDays);dayItem.minDays=self.datesData.minDealDays;return dayItem;}
else{dayItem.title=holidaytitle?"title='"+holidaytitle+"'":'';dayItem.holidayTitle=holidaytitle;return dayItem;}}
else{if(self.QueryParams.IsDealEngine){if(self.datesData.dealCurAvailibility&&self.datesData.dealCurAvailibility.length>0){currentDayObj=findDateInArray(date,self.datesData.dealCurAvailibility);if(currentDayObj&&!currentDayObj.Closed){if(currentDayObj.MinLOS>self.datesData.minDealDays){if(currentDayObj.MinDays>1){dayItem.title=minNigthTranslate.replace('{0}',currentDayObj.MinDays);dayItem.minDays=currentDayObj.MinDays;dayItem.holidayTitle=holidaytitle;dayItem.minTitle=self.SearchEngineSettings.Translations["SearchTooltip"].replace('{0}',currentDayObj.MinDays);return dayItem;}
else{dayItem.title=holidaytitle?"title='"+holidaytitle+"'":'';dayItem.holidayTitle=holidaytitle;return dayItem;}}
else if(self.datesData.minDealDays>1){dayItem.title=minNigthTranslate.replace('{0}',self.datesData.minDealDays);dayItem.minDays=self.datesData.minDealDays;dayItem.holidayTitle=holidaytitle;dayItem.minTitle=self.SearchEngineSettings.Translations["SearchTooltip"].replace('{0}',self.datesData.minDealDays);return dayItem;}
else{dayItem.title=holidaytitle?"title='"+holidaytitle+"'":'';dayItem.holidayTitle=holidaytitle;return dayItem;}}}}
else if(self.datesData.curAvailibility&&self.datesData.curAvailibility.length>0){currentDayObj=findDateInArray(date,self.datesData.curAvailibility);if(currentDayObj&&!currentDayObj.Closed){if(currentDayObj.MinLOS>1){dayItem.title=minNigthTranslate.replace('{0}',currentDayObj.MinLOS);dayItem.minDays=currentDayObj.MinLOS;dayItem.holidayTitle=holidaytitle;dayItem.minTitle=self.SearchEngineSettings.Translations["SearchTooltip"].replace('{0}',currentDayObj.MinLOS);return dayItem;}
else{dayItem.title=holidaytitle?"title='"+holidaytitle+"'":'';dayItem.holidayTitle=holidaytitle;return dayItem;}}
else{dayItem.title=holidaytitle?"title='"+holidaytitle+"'":'';dayItem.holidayTitle=holidaytitle;return dayItem;}}
else{dayItem.title=holidaytitle?"title='"+holidaytitle+"'":'';dayItem.holidayTitle=holidaytitle;return dayItem;}}}
function findDateInArray(printDate,arr){var count=arr.length;var high=count-1;var low=0;while(low<=high){var mid=parseInt((low+high)/2);var currentDate;if(arr[mid]){if(arr[mid].DayDate)
currentDate=new moment(arr[mid].DayDate);else if(arr[mid].Date)
currentDate=new moment(arr[mid].Date);else
currentDate=arr[mid];if(moment(currentDate.format('YYYY-MM-DD')).isAfter(printDate.format('YYYY-MM-DD'))){high=mid-1;}
else if(moment(currentDate.format('YYYY-MM-DD')).isBefore(printDate.format('YYYY-MM-DD'))){low=mid+1;}
else{return arr[mid];}}else{break;}}
return null;}
function getPriceByDate(self,date,addCutsomHtml){function drawPricesHtml(currToShow,priceToSow){if(currToShow&&priceToSow&&!Number.isNaN(priceToSow)){if(addCutsomHtml)
return '<span class="date-span price-span"><span class="date-currency">'+toCurrencySymbol(currToShow)
+'</span><span class="date-price" data-price="'+priceToSow.toFixed()+'">'+priceToSow.toFixed()+'</span></span>';else
return toCurrencySymbol(currToShow)+priceToSow.toFixed();}
return ""}
if(self.datesData.curAvailibility&&self.datesData.curAvailibility.length>0&&self.SearchEngineSettings.EngineSetting.EnablePrices){var currentDayObj=findDateInArray(date,self.datesData.curAvailibility);if(currentDayObj){if(self.CurrentSetting.LangID=="1"){return drawPricesHtml(currentDayObj.LocalCurrency,self.datesHolder.isMobile?currentDayObj.MobileLocalPrice:currentDayObj.LocalPrice);}
else{return drawPricesHtml(currentDayObj.TouristCurrency,self.datesHolder.isMobile?currentDayObj.MobileTouristPrice:currentDayObj.TouristPrice);}}}
return "";}
function toCurrencySymbol(curstr){if(curstr){switch(curstr.toLowerCase()){case "usd":return "$";case "ils":case "nis":return "₪";case "eur":return "€";case "aed":return "";case "php":return "₱";}
return curstr;}}
function isMobileByAgent(a){return /android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4));}
function getHolidayDay(printday,self){var currentDayObj=findDateInArray(printday.startOf("day"),self.datesData.curAvailibility);if(currentDayObj&&currentDayObj.Holidays&&currentDayObj.Holidays.length>0){var holiday="";for(var i=0;i<currentDayObj.Holidays.length;i++){var trans=currentDayObj.Holidays[i].Translations.find(r=>r.Lang===self.QueryParams.DatepickerLang);if(trans)
holiday+=trans.Title+(currentDayObj.Holidays.length>1&&i!=currentDayObj.Holidays.length-1?" ,  ":"  ");}
return holiday;}
return "";}
function humanDetect(){if(!isHuman){isHuman=true;}}
function isSearchRequestValid(){return SearchRequest&&SearchRequest.in&&SearchRequest.out&&SearchRequest.hotel;}
function PrepareForSubmit(self){if(self.resID==""||self.resID=="-1"||self.resID=="0"){alert(self.SearchEngineSettings.Translations["HotelSelectError"]);return false;}
if(self.datesHolder.startDate==null){alert(self.SearchEngineSettings.Translations["ArrDateError"]);return false;}
if(self.datesHolder.endDate==null){alert(self.SearchEngineSettings.Translations["DepDateError"]);return false;}
var booking={Arrival:self.datesHolder.startDate.format("YYYY-MM-DD"),Departure:self.datesHolder.endDate.format("YYYY-MM-DD"),Rooms:self.datesHolder.getRoomsAndPaxs()};if((booking.Rooms==null||checkForWrongComb(booking.Rooms,self.datesData.paxCombintaion))&&self.SearchEngineSettings.EngineSetting.DisablePaxs!==true){showComboError(self.SearchEngineSettings,self.$element);return false;}
var url=null;if(typeof window.BuildUrl!="undefined")
url=window.BuildUrl(booking,self.CurrentSetting,self.QueryParams);else
url=BuildUrl(booking,self);if(self.SearchEngineSettings.EngineSetting.CheckIfPromoIsExsist&&!$('.promo-holder #promo').isNullOrEmpty()){var dataobject={};dataobject.hotelID=self.resID.substring(0,self.resID.indexOf('_'));dataobject.lang=self.QueryParams.Lang;dataobject.promo=$('.promo-holder #promo').val();dataobject.chainId=self.QueryParams.ChainId;JqueryAjax({url:self.SearchEngineSettings.ApiPrefixUrl+"/checkPromoCodeV5",data:JSON.stringify(dataobject),successfun:function(obj){var result=obj.d||obj;if(result){if(typeof window.Submit!="undefined")
window.Submit(url,self);else
Submit(url,self);}
else{alert(self.SearchEngineSettings.Translations["promoCodeError"]);return false;}},errorfunc:function(e){if(typeof window.Submit!="undefined")
window.Submit(url,self);else
Submit(url,self);}});}
else{if(typeof window.Submit!="undefined")
window.Submit(url,self,booking);else
Submit(url,self,booking);}}
function Submit(url,self,booking){if(self.SearchEngineSettings.EngineSetting.ShowLoader){}
var trackers,linker;if(typeof ga!=='undefined'&&typeof ga.getAll==='function'&&'gaplugins'in window){trackers=ga.getAll();if(trackers.length){linker=new window.gaplugins.Linker(trackers[0]);url=linker.decorate(url);}}
if(typeof window.Enhanced!="undefined")
window.Enhanced();if(isHuman)
{try{if(typeof Storage!=="undefined"){sessionStorage.setItem("isHuman",isHuman);}
if(self.SearchEngineSettings.EngineSetting.GetLastSearchInSession){sessionStorage.removeItem("SearchRequest");var resPage=self.SearchEngineSettings.EngineSetting.RoomsPage;var regPage=self.SearchEngineSettings.EngineSetting.DestinationPage;if(window.location.href.indexOf("pro/")>-1||(self.SearchEngineSettings.EngineSetting.DefBeProcess&&self.SearchEngineSettings.EngineSetting.DefBeProcess==="pro")){resPage=resPage.replace("be/","be/pro/");regPage=regPage.replace("be/","be/pro/");}
if(window.location.href.indexOf("force=1")>-1){resPage=resPage.replace("be/pro/","be/");regPage=regPage.replace("be/pro/","be/");}
var urlRequest=url.replace(self.SearchEngineSettings.BookingDomain,"").replace(resPage,"").replace(regPage,"");sessionStorage.setItem("SearchRequest",urlRequest);}}
catch(e){console.log(e);}}
var target=self.QueryParams&&self.QueryParams.Target?self.QueryParams.Target:(SearchRequest&&SearchRequest.Target?SearchRequest.Target:null);if(self.SearchEngineSettings.EngineSetting.defaultPromo&&window.location.href.indexOf("be/")<1){target="_blank";}
if(booking){sendEcommerceEventOnSearch(booking,function(){window.open(url,target?target:"_top");})}
else{window.open(url,target?target:"_top");}}
function checkForWrongComb(rooms,paxCombintaion){if(rooms.length>0&&paxCombintaion!=null&&paxCombintaion!=""){for(var i=0;i<rooms.length;i++){if(rooms[i].Pax.Infants==0&&rooms[i].Pax.Children==0&&rooms[i].Pax.Adults==0)
return true;if(paxCombintaion.length>0){for(var k=0;k<paxCombintaion.length;k++){if(paxCombintaion[k].Infants==rooms[i].Pax.Infants&&paxCombintaion[k].Children==rooms[i].Pax.Children&&paxCombintaion[k].Adults==rooms[i].Pax.Adults)
break;}
if(k==(paxCombintaion.length)){return true;}}}
return false;}
return false;}
function showComboError(SearchEngine,$element){if(SearchEngine.EngineSetting.EnableAutoPaxUpdate||$('#flowDivComb').length==0){alert(SearchEngine.Translations["comboError"]);}
else{$('#flowDivComb',$element).show();}}
function hideComboError($element){$('#flowDivComb',$element).hide();}
function CheckIfHotelSelectNeedToBeHide(self){return self.SearchEngineSettings.EngineSetting.EnableHotelSelectHidding&&(GetUriParameter("hotel")&&GetUriParameter("hidehotelselect")||(self.QueryParams.Hotel&&!self.initPaxFromSearchRequest));}
function getReffrom(QueryParams,SearchRequest){if(QueryParams.RefFrom)
return QueryParams.RefFrom;else if(SearchRequest&&SearchRequest.RefFrom)
return SearchRequest.RefFrom
else if(GetUriParameter('reffrom'))
return GetUriParameter('reffrom')
else{if($.cookie("RefCookie")){try{return $.cookie("RefCookie").split('&')[0].replace('RefFrom=','')}catch(e){return null;}}
else
return null;}}
function getPromocode(booking,self)
{var promo="";if(self.QueryParams.Promo){promo="&promocode="+self.QueryParams.Promo;booking.promoCode=self.QueryParams.Promo}
else if(!$('.promo-holder #promo',$(self.$element)).isNullOrEmpty()){promo='&promocode='+$('.promo-holder #promo',$(self.$element)).val();booking.promoCode=$('.promo-holder #promo',$(self.$element)).val();}
else if(self.SearchEngineSettings.EngineSetting.defaultPromo){promo='&promocode='+self.SearchEngineSettings.EngineSetting.defaultPromo;booking.promoCode=self.SearchEngineSettings.EngineSetting.defaultPromo;}
return promo;}
function BuildUrl(booking,self){var HotelsParam=self.resID.split(':');var isSingleResortSearch=self.SearchEngineSettings.EngineSetting.IsSingleHotel||HotelsParam.length==2;var url=self.SearchEngineSettings.BookingDomain;booking.isRegion=!isSingleResortSearch;var resPage=self.SearchEngineSettings.EngineSetting.RoomsPage;var regPage=self.SearchEngineSettings.EngineSetting.DestinationPage;if(window.location.href.indexOf("pro/")>-1||(self.SearchEngineSettings.EngineSetting.DefBeProcess&&self.SearchEngineSettings.EngineSetting.DefBeProcess==="pro")){resPage=resPage.replace("be/","be/pro/");regPage=regPage.replace("be/","be/pro/");}
if(window.location.href.indexOf("force=1")>0){resPage=resPage.replace("be/pro/","be/");regPage=regPage.replace("be/pro/","be/");}
if(isSingleResortSearch){url+=resPage;}
else{url+=regPage;}
url+="?lang="+self.QueryParams.Lang;url+="&chainid="+self.SearchEngineSettings.BookingEngineChainId;booking.Lang=self.QueryParams.Lang;booking.ChainId=self.SearchEngineSettings.BookingEngineChainId;if(isSingleResortSearch){url+="&hotel="+HotelsParam[0];var currentHotel=findHotel(self.CurrentSetting,HotelsParam[0]);booking.HotelId=currentHotel.ResortID;booking.HotelName=(currentHotel&&currentHotel.ResortName)||"";let _currentRegion=findRegion(self.CurrentSetting,currentHotel.RegionID);if(_currentRegion){booking.RegionId=_currentRegion.RegionID;booking.RegionName=_currentRegion.RegionName;}}
else if(HotelsParam[0]==="9999"){url+="&hotel="+getAllHotels(self.CurrentSetting);url+="&allHotelsSearch=true";}
else{url+="&region="+HotelsParam[0];url+="&hotel="+findHotelsbyRegion(self.CurrentSetting,HotelsParam[0]);var currentRegion=findRegion(self.CurrentSetting,HotelsParam[0]);booking.RegionId=HotelsParam[0];booking.HotelId=findHotelsbyRegion(self.CurrentSetting,HotelsParam[0],true);booking.RegionName=currentRegion?currentRegion.RegionName:"";}
url+='&in='+booking.Arrival;url+='&out='+booking.Departure;var totalRooms=0;for(var i=0;i<booking.Rooms.length;i++){var chosenpax=booking.Rooms[i].Pax.Adults+":"+booking.Rooms[i].Pax.Children+":"+booking.Rooms[i].Pax.Infants
if(chosenpax!="0:0:0"){totalRooms++;}}
url+='&rooms='+totalRooms;url+='&'+createRoomsQuery(booking.Rooms);if(self.QueryParams.IsDealEngine){url+="&dealserial="+self.QueryParams.DealId;booking.DealId=self.QueryParams.DealId;}
else if($('.engine-holder',$(self.$element)).attr("data-dealserial")){url+="&dealserial="+$('.engine-holder',$(self.$element)).attr("data-dealserial");}
else if(self.QueryParams.IsRoomEngine)
url+="&roomcode="+self.QueryParams.RoomId;else if($('.engine-holder',$(self.$element)).attr("data-roomcode")){url+="&roomcode="+$('.engine-holder',$(self.$element)).attr("data-roomcode");}
url+=getPromocode(booking,self);var refFrom=getReffrom(self.QueryParams,SearchRequest);if(refFrom){refFrom='&reffrom='+refFrom;booking.Reffrom=refFrom;}
else{refFrom='';}
url+=refFrom;var roomcode=self.QueryParams.Roomcode?self.QueryParams.Roomcode:"";if(roomcode){roomcode='&roomcode='+roomcode;}
url+=roomcode;var currency=null;if($('.ddlCurrency').length>0&&$('.ddlCurrency').val()!=""){currency=$('.ddlCurrency').val();}
else{currency=self.QueryParams.Crn?self.QueryParams.Crn:(SearchRequest&&SearchRequest.crn?SearchRequest.crn:null);}
if(currency){currency='&crn='+currency;}
else{currency='';}
url+=currency;if(self.QueryParams.Extra&&self.QueryParams.Extra!="")
url+=self.QueryParams.Extra;if(CheckIfHotelSelectNeedToBeHide(self)){url+="&hidehotelselect=true";}
localStorage.setItem("lastSearch",url);if(window.location.href.indexOf("force=1")>-1){url+="&force=1";}
return url;}
function sendEcommerceEventOnSearch(booking,callback){TrySendFacebookEvent(booking);if(typeof dataLayer==='undefined'){callback();}else{try{setTimeout(callback,100);let dataLayerObject={event:'search_clicked',ecommerce:{search:{arrival:booking.Arrival,departure:booking.Departure,chainId:booking.ChainId,hotelIds:booking.HotelId,hotelName:booking.HotelName,lang:booking.Lang,reffrom:booking.Reffrom,regionId:booking.RegionId,regionName:booking.RegionName,rooms:booking.Rooms.map(function(r){return[r.Pax.Adults,r.Pax.Children,r.Pax.Infants].join(":");}),promoCode:booking.promoCode}}}
dataLayer.push({ecommerce:null});console.log('data layer pushed %o',dataLayerObject);dataLayer.push(dataLayerObject);}catch(e){console.error(e);}}}
function TrySendFacebookEvent(booking){if('fbq'in window){var data={"content_type":"hotel","content_ids":booking.HotelId,"region":booking.RegionName,"country":booking.RegionName,"city":booking.RegionName,"checkin_date":booking.Arrival,"checkout_date":booking.Departure,"value":0,"currency":"","num_adults":booking.Rooms.reduce((p,c)=>p+c.Pax.Adults,0),"num_children":booking.Rooms.reduce((p,c)=>p+c.Pax.Children+c.Pax.Infants,0)}
fbq('track','Search',data);console.log('fb track event: Search, data: %o',data);}}
function initSearchRequest(currentEngine){if(SearchRequest.hotel){var CurrentResort=findHotel(currentEngine.CurrentSetting,SearchRequest.hotel);currentEngine.resID=CurrentResort?CurrentResort.OptimaResortID+"_"+CurrentResort.Wing+":"+CurrentResort.DSN:"";}
if(SearchRequest.region&&!currentEngine.SearchEngineSettings.EngineSetting.IsSingleHotel){var CurrentRegion=findRegion(currentEngine.CurrentSetting,SearchRequest.region);currentEngine.RegID=CurrentRegion?CurrentRegion.RegionID:"";}
if(GetUriParameter('in')&&GetUriParameter('out')){var arr=GetUriParameter('in');var dep=GetUriParameter('out');SearchRequest.in=moment(arr);SearchRequest.out=moment(dep);}
else if(SearchRequest.in&&SearchRequest.out){SearchRequest.in=moment(SearchRequest.in);SearchRequest.out=moment(SearchRequest.out);}
if(SearchRequest.rooms){SearchRequest.Adults=Array();SearchRequest.Children=Array();SearchRequest.Infants=Array();for(var i=0;i<SearchRequest.rooms;i++){SearchRequest.Adults[i]=eval(SearchRequest['ad'+(i+1)]);SearchRequest.Children[i]=eval(SearchRequest['ch'+(i+1)]);SearchRequest.Infants[i]=eval(SearchRequest['inf'+(i+1)]);}}
return SearchRequest;}
function findHotel(CurrentSetting,hotID){for(var i=0;i<CurrentSetting.AllResorts.length;i++){if(CurrentSetting.AllResorts[i].OptimaResortID+"_"+CurrentSetting.AllResorts[i].Wing==hotID)
return CurrentSetting.AllResorts[i];}}
function findRegion(CurrentSetting,regid,regions){var regionsarr=(regions?regions:CurrentSetting.Regions)||[];for(var i=0;i<regionsarr.length;i++){if(regionsarr[i].RegionID==regid)
return regionsarr[i];}
return null;}
function findHotelsbyRegion(CurrentSetting,regId,getOnlyId){if(CurrentSetting.AllResorts.length){let hotelsInRegion=CurrentSetting.AllResorts.filter(r=>r.RegionID==regId);if(hotelsInRegion.length){return hotelsInRegion.map(h=>h.OptimaResortID+(getOnlyId?'':'_'+h.Wing)).join(',');}}
return '';}
function getAllHotels(CurrentSetting){var hotels="";for(var i=0;i<CurrentSetting.AllResorts.length;i++){hotels+=CurrentSetting.AllResorts[i].OptimaResortID+"_"+CurrentSetting.AllResorts[i].Wing+',';}
return hotels;}
function findCountry(CurrentSetting,countryId){for(var i=0;i<CurrentSetting.Countries.length;i++){if(CurrentSetting.Countries[i].CountryId==countryId)
return CurrentSetting.Countries[i];}
return null;}
function showMainLoader(self){if(typeof window.mainloadingfunc!="undefined"){window.mainloadingfunc(self.LoadingObject);}}
function countrySelectChanged(self,countryid){self.conID=countryid;var currentCountry=findCountry(self.CurrentSetting,countryid);self.destSelect.empty();self.hotelsSelect.empty();if(currentCountry!=null)
{$(self.countrySelect).val(countryid);if($('.engine-holder',self.$element).hasClass('step-1')){$('.engine-holder',self.$element).removeClass('step-1').addClass('step-2');}
if(currentCountry.Regions.length==1){self.RegID=currentCountry.Regions[0].RegionID;self.destSelect.append("<option value=\""+currentCountry.Regions[0].RegionID+"\">"+currentCountry.Regions[0].RegionName+"</option>");if(currentCountry.Regions[0].Resorts.length==1){var hotelObj=currentCountry.Regions[0].Resorts[0];self.hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");self.resID=hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN;if(!SearchRequest)
setAvailibility(self);}
else{self.resID=currentCountry.Regions[0].RegionID;self.hotelsSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["AllHotelsText"]+" "+currentCountry.Regions[0].RegionName+"</option>");for(var j=0;j<currentCountry.Regions[0].Resorts.length;j++){var hotelObj=currentCountry.Regions[0].Resorts[j];hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");}}}
else{self.resID="";self.RegID=0;self.destSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["SelectRegionOption"]+"</option>");self.hotelsSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["selectHotel"]+"</option>");for(var i=0;i<currentCountry.Regions.length;i++){self.destSelect.append("<option  value=\""+currentCountry.Regions[i].RegionID+"\">"+currentCountry.Regions[i].RegionName+"</option>");for(var j=0;j<currentCountry.Regions[i].Resorts.length;j++){var hotelObj=currentCountry.Regions[i].Resorts[j];self.hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");}}}}
else{self.resID="";self.RegID=0;self.destSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["SelectRegionOption"]+"</option>");self.hotelsSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["selectHotel"]+"</option>");for(var i=0;i<self.CurrentSetting.Regions.length;i++){self.destSelect.append("<option  value=\""+self.CurrentSetting.Regions[i].RegionID+"\">"+self.CurrentSetting.Regions[i].RegionName+"</option>");}
for(var j=0;j<self.CurrentSetting.AllResorts.length;j++){var hotelObj=self.CurrentSetting.AllResorts[j];self.hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");}}}
function destSelectChanged(self,regionid){var currentRegion=findRegion(self.CurrentSetting,regionid);if(currentRegion!=null){if(self.SearchEngineSettings.UseCountries){if(conID==0)
{countrySelectChanged(self,currentRegion.CountryID);}
var currentCountry=findCountry(self.CurrentSetting,currentRegion.CountryID);currentRegion=findRegion(self.CurrentSetting,currentRegion.RegionID,currentCountry.Regions);}
$(self.destSelect).val(regionid);self.resID=regionid;if(self.hotelsSelect.val()=='0'||regionid!=self.RegID){rePopulateHotels(currentRegion);self.RegID=regionid;}}
else{if(self.SearchEngineSettings.UseCountries){countrySelectChanged(self,self.conID);}
else
rePopulateHotels(self,null);}}
function hotelSelectChanged(self,hotelid){if(hotelid!=''&&hotelid!='0'){var currentResort=findHotel(self.CurrentSetting,hotelid.split(":")[0]);destSelectChanged(self,currentResort.RegionID);self.resID=hotelid;self.hotelsSelect.val(hotelid);if(self.resID.split(":").length>1)
setAvailibility(self);else
setStartDates(self);}
else{self.resID=self.RegID;var currentRegion=findRegion(self.CurrentSetting,self.RegID);if(currentRegion&&currentRegion.Resorts&&currentRegion.Resorts.length>0)
rePopulateHotels(self,currentRegion);}}
function rePopulateHotels(self,currentRegion){self.hotelsSelect.empty();if(currentRegion){if(currentRegion.Resorts.length==1){var hotelObj=currentRegion.Resorts[0];self.hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");self.resID=hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN;if(!SearchRequest)
setAvailibility(self);}
else{self.resID=currentRegion.RegionID;self.hotelsSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["AllHotelsText"]+" "+currentRegion.RegionName+"</option>");for(var j=0;j<currentRegion.Resorts.length;j++){var hotelObj=currentRegion.Resorts[j];self.hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");}}}
else{self.resID="";self.hotelsSelect.append("<option value=\"0\">"+self.SearchEngineSettings.Translations["selectHotel"]+"</option>");for(var j=0;j<self.CurrentSetting.AllResorts.length;j++){var hotelObj=self.CurrentSetting.AllResorts[j];self.hotelsSelect.append("<option  value=\""+hotelObj.OptimaResortID+'_'+hotelObj.Wing+":"+hotelObj.DSN+"\">"+hotelObj.ResortName+"</option>");}}}
function Pax(Adults,children,infants){this.Adults=isNaN(Adults)?0:Adults;this.Children=isNaN(children)?0:children;this.Infants=isNaN(infants)?0:infants;this.getQueryAdults=function(roomNum){return "ad"+roomNum+"="+this.Adults;}
this.getQueryChildren=function(roomNum){return "ch"+roomNum+"="+this.Children;}
this.getQueryInfants=function(roomNum){return "inf"+roomNum+"="+this.Infants;}
this.getQueryString=function(roomNum){return this.getQueryAdults(roomNum)+"&"+this.getQueryChildren(roomNum)+"&"+this.getQueryInfants(roomNum);}
this.Build=function(roomNum){return this.getQueryString(roomNum)}}
function createRoomsQuery(roomsArray){var str=[];for(var i=0;i<roomsArray.length;i++){var chosenpax=roomsArray[i].Pax.Adults+":"+roomsArray[i].Pax.Children+":"+roomsArray[i].Pax.Infants
if(chosenpax!="0:0:0"){str[str.length]=`ad${str.length+1}=${roomsArray[i].Pax.Adults}&ch${str.length+1}=${roomsArray[i].Pax.Children}&inf${str.length+1}=${roomsArray[i].Pax.Infants}`;}}
return str.join('&');}
function getResortName(self){if(self.resID&&self.resID!=""&&self.resID!=0){if(self.SearchEngineSettings.EngineSetting.IsSingleHotel){return self.CurrentSetting.SingleResort.Name;}
else if(self.SearchEngineSettings.UseCountries){return "";}
else if(!self.SearchEngineSettings.ShowRegionDropDown){if(self.resID.split(":").length>1)
{var currentHotel=findHotel(self.CurrentSetting,self.resID.split(":")[0]);if(currentHotel){return currentHotel.ResortName;}}
else{var currentRegion=findRegion(self.CurrentSetting,self.resID);if(currentRegion){return self.SearchEngineSettings.Translations["hotelsIn"]+currentRegion.RegionName;}}}
else{return "";}}
else
return "";}
function initDivChosenHotelColor(self){$('.hotel-select',self.$element).click(function(){SearchRequest=null;$(".hotel-select .hotelName").removeClass("chosen-hotel");$(this).find('.hotelName').toggleClass("chosen-hotel");self.resID=this.dataset.val;setAvailibility(self);$('.hotels-div').addClass("d-none");$(".select-hotel-holder").find('.chosen-resort-name').remove();$(".select-hotel-holder").find('.hotel-initial-text').remove();$(".select-hotel-holder").append($("<label class='chosen-resort-name'>"+$(this).find(".hotelName").html()+"</label>"));return false;});$('.resort-holder',self.$element).click(OpenHotelsListDiv);$('.resort-holder',self.$element).keydown(function(e){if(e.keyCode===13){OpenHotelsListDiv();}});$('.close-hotels-list',self.$element).click(function(){return CloseHotelsListDiv();});$('.hotels-list-close-div .cancel-btn',self.$element).click(function(){return CloseHotelsListDiv();});function OpenHotelsListDiv(){$('.hotels-div',self.$element).removeClass("d-none");$(document).on('mousedown.daterangepicker',outsideClick).on('touchend.daterangepicker',outsideClick).on('focusin.daterangepicker',outsideClick);}
function outsideClick(e){if(e.type=="focusin"||$(e.target).closest('.hotels-div').length)return;CloseHotelsListDiv();}
function CloseHotelsListDiv(){$('.hotels-div',self.$element).addClass("d-none");$(document).off('mousedown.daterangepicker',outsideClick).off('touchend.daterangepicker',outsideClick).off('focusin.daterangepicker',outsideClick);return false;}}
function initClickPressPromoHolder(){$('.promo-holder',self.$element).click(function(){$(".promo-label").addClass("d-none");$(".promo-input-holder").removeClass("d-none");return false;});}
function initNewPromocodeEvent(){var newPromocodeBox=$('.new-promocode-box',self.$element);$('.new-promocode-box > a',self.$element).on('click keypress',function(event){if(event.type==='click'||(event.type==='keypress'&&event.keyCode===13)){var element=document.getElementById("promoNew");element.classList.remove("d-none");initCloseNewPromocodeEvent();}});$('.BtnArea > .cancelPromo',self.$element).on('click keypress',function(event){if(event.type==='click'||(event.type==='keypress'&&event.keyCode===13)){var element=document.getElementById("promoNew");element.classList.add("d-none");IndicateAnimation(self);}});$('.BtnArea > .approvePromo',self.$element).on('click keypress',function(event){if(event.type==='click'||(event.type==='keypress'&&event.keyCode===13)){var element=document.getElementById("promoNew");element.classList.add("d-none");IndicateAnimation(self);}});}
function initCloseNewPromocodeEvent(){$(document).mouseup(function(e){var element=document.getElementById("promoNew");if(!document.getElementById('promoNew').contains(e.target)){element.classList.add("d-none");}});}}(jQuery);